!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(h,t){var f=[],l=f.slice,m=f.concat,a=f.push,i=f.indexOf,n={},r=n.toString,g=n.hasOwnProperty,y={},o="1.11.2",k=function(e,t){return new k.fn.init(e,t)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,c=/^-ms-/,u=/-([\da-z])/gi,p=function(e,t){return t.toUpperCase()};function d(e){var t=e.length,n=k.type(e);return"function"!==n&&!k.isWindow(e)&&(!(1!==e.nodeType||!t)||"array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}k.fn=k.prototype={jquery:o,constructor:k,selector:"",length:0,toArray:function(){return l.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:l.call(this)},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return k.each(this,e,t)},map:function(n){return this.pushStack(k.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:a,sort:f.sort,splice:f.splice},k.extend=k.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||k.isFunction(s)||(s={}),a===c&&(s=this,a--);a<c;a++)if(null!=(i=arguments[a]))for(r in i)e=s[r],s!==(n=i[r])&&(u&&n&&(k.isPlainObject(n)||(t=k.isArray(n)))?(t?(t=!1,o=e&&k.isArray(e)?e:[]):o=e&&k.isPlainObject(e)?e:{},s[r]=k.extend(u,o,n)):n!==undefined&&(s[r]=n));return s},k.extend({expando:"jQuery"+(o+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===k.type(e)},isArray:Array.isArray||function(e){return"array"===k.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!k.isArray(e)&&0<=e-parseFloat(e)+1},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==k.type(e)||e.nodeType||k.isWindow(e))return!1;try{if(e.constructor&&!g.call(e,"constructor")&&!g.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(y.ownLast)for(t in e)return g.call(e,t);for(t in e);return t===undefined||g.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[r.call(e)]||"object":typeof e},globalEval:function(e){e&&k.trim(e)&&(h.execScript||function(e){h.eval.call(h,e)})(e)},camelCase:function(e){return e.replace(c,"ms-").replace(u,p)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r=0,i=e.length,o=d(e);if(n){if(o)for(;r<i&&!1!==t.apply(e[r],n);r++);else for(r in e)if(!1===t.apply(e[r],n))break}else if(o)for(;r<i&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(s,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(d(Object(e))?k.merge(n,"string"==typeof e?[e]:e):a.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(i)return i.call(t,e,n);for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;)e[i++]=t[r++];if(n!=n)for(;t[r]!==undefined;)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,s=!n;i<o;i++)!t(e[i],i)!==s&&r.push(e[i]);return r},map:function(e,t,n){var r,i=0,o=e.length,s=[];if(d(e))for(;i<o;i++)null!=(r=t(e[i],i,n))&&s.push(r);else for(i in e)null!=(r=t(e[i],i,n))&&s.push(r);return m.apply([],s)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(i=e[t],t=e,e=i),k.isFunction(e)?(n=l.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(l.call(arguments)))}).guid=e.guid=e.guid||k.guid++,r):undefined},now:function(){return+new Date},support:y}),k.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var e=function(n){var e,h,b,o,r,m,f,g,w,u,l,y,x,i,v,_,s,a,k,C="sizzle"+1*new Date,T=n.document,E=0,p=0,c=se(),d=se(),S=se(),j=function(e,t){return e===t&&(l=!0),0},N=1<<31,A={}.hasOwnProperty,t=[],F=t.pop,P=t.push,O=t.push,R=t.slice,L=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",D="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",q=B.replace("w","w#"),M="\\["+D+"*("+B+")(?:"+D+"*([*^$|!~]?=)"+D+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+q+"))|)"+D+"*\\]",H=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",W=new RegExp(D+"+","g"),U=new RegExp("^"+D+"+|((?:^|[^\\\\])(?:\\\\.)*)"+D+"+$","g"),$=new RegExp("^"+D+"*,"+D+"*"),z=new RegExp("^"+D+"*([>+~]|"+D+")"+D+"*"),V=new RegExp("="+D+"*([^\\]'\"]*?)"+D+"*\\]","g"),K=new RegExp(H),X=new RegExp("^"+q+"$"),Z={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+D+"*(even|odd|(([+-]|)(\\d*)n|)"+D+"*(?:([+-]|)"+D+"*(\\d+)|))"+D+"*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^"+D+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+D+"*((?:-\\d)?\\d*)"+D+"*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,G=/^[^{]+\{\s*\[native \w/,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,ne=new RegExp("\\\\([\\da-f]{1,6}"+D+"?|("+D+")|.)","ig"),re=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},ie=function(){y()};try{O.apply(t=R.call(T.childNodes),T.childNodes),t[T.childNodes.length].nodeType}catch(xe){O={apply:t.length?function(e,t){P.apply(e,R.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function oe(e,t,n,r){var i,o,s,a,c,u,l,f,p,d;if((t?t.ownerDocument||t:T)!==x&&y(t),n=n||[],a=(t=t||x).nodeType,"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return n;if(!r&&v){if(11!==a&&(i=Y.exec(e)))if(s=i[1]){if(9===a){if(!(o=t.getElementById(s))||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&k(t,o)&&o.id===s)return n.push(o),n}else{if(i[2])return O.apply(n,t.getElementsByTagName(e)),n;if((s=i[3])&&h.getElementsByClassName)return O.apply(n,t.getElementsByClassName(s)),n}if(h.qsa&&(!_||!_.test(e))){if(f=l=C,p=t,d=1!==a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(u=m(e),(l=t.getAttribute("id"))?f=l.replace(te,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",c=u.length;c--;)u[c]=f+ge(u[c]);p=ee.test(e)&&he(t.parentNode)||t,d=u.join(",")}if(d)try{return O.apply(n,p.querySelectorAll(d)),n}catch(S){}finally{l||t.removeAttribute("id")}}}return g(e.replace(U,"$1"),t,n,r)}function se(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function ae(e){return e[C]=!0,e}function ce(e){var t=x.createElement("div");try{return!!e(t)}catch(xe){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var n=e.split("|"),r=e.length;r--;)b.attrHandle[n[r]]=t}function le(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||N)-(~e.sourceIndex||N);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function fe(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pe(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function de(s){return ae(function(o){return o=+o,ae(function(e,t){for(var n,r=s([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function he(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in h=oe.support={},r=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},y=oe.setDocument=function(e){var t,n,c=e?e.ownerDocument||e:T;return c!==x&&9===c.nodeType&&c.documentElement?(i=(x=c).documentElement,(n=c.defaultView)&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",ie,!1):n.attachEvent&&n.attachEvent("onunload",ie)),v=!r(c),h.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),h.getElementsByTagName=ce(function(e){return e.appendChild(c.createComment("")),!e.getElementsByTagName("*").length}),h.getElementsByClassName=G.test(c.getElementsByClassName),h.getById=ce(function(e){return i.appendChild(e).id=C,!c.getElementsByName||!c.getElementsByName(C).length}),h.getById?(b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&v){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},b.filter.ID=function(e){var t=e.replace(ne,re);return function(e){return e.getAttribute("id")===t}}):(delete b.find.ID,b.filter.ID=function(e){var n=e.replace(ne,re);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}}),b.find.TAG=h.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):h.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=h.getElementsByClassName&&function(e,t){if(v)return t.getElementsByClassName(e)},s=[],_=[],(h.qsa=G.test(c.querySelectorAll))&&(ce(function(e){i.appendChild(e).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&_.push("[*^$]="+D+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||_.push("\\["+D+"*(?:value|"+I+")"),e.querySelectorAll("[id~="+C+"-]").length||_.push("~="),e.querySelectorAll(":checked").length||_.push(":checked"),e.querySelectorAll("a#"+C+"+*").length||_.push(".#.+[+~]")}),ce(function(e){var t=c.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&_.push("name"+D+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||_.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),_.push(",.*:")})),(h.matchesSelector=G.test(a=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.oMatchesSelector||i.msMatchesSelector))&&ce(function(e){h.disconnectedMatch=a.call(e,"div"),a.call(e,"[s!='']:x"),s.push("!=",H)}),_=_.length&&new RegExp(_.join("|")),s=s.length&&new RegExp(s.join("|")),t=G.test(i.compareDocumentPosition),k=t||G.test(i.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!h.sortDetached&&t.compareDocumentPosition(e)===n?e===c||e.ownerDocument===T&&k(T,e)?-1:t===c||t.ownerDocument===T&&k(T,t)?1:u?L(u,e)-L(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!i||!o)return e===c?-1:t===c?1:i?-1:o?1:u?L(u,e)-L(u,t):0;if(i===o)return le(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?le(s[r],a[r]):s[r]===T?-1:a[r]===T?1:0},c):x},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==x&&y(e),t=t.replace(V,"='$1']"),h.matchesSelector&&v&&(!s||!s.test(t))&&(!_||!_.test(t)))try{var n=a.call(e,t);if(n||h.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(xe){}return 0<oe(t,x,null,[e]).length},oe.contains=function(e,t){return(e.ownerDocument||e)!==x&&y(e),k(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==x&&y(e);var n=b.attrHandle[t.toLowerCase()],r=n&&A.call(b.attrHandle,t.toLowerCase())?n(e,t,!v):undefined;return r!==undefined?r:h.attributes||!v?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!h.detectDuplicates,u=!h.sortStable&&e.slice(0),e.sort(j),l){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return u=null,e},o=oe.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},(b=oe.selectors={cacheLength:50,createPseudo:ae,match:Z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,re),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,re),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Z.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&K.test(n)&&(t=m(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,re).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=c[e+" "];return t||(t=new RegExp("(^|"+D+")"+e+"("+D+"|$)"))&&c(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=oe.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(W," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(d,e,t,h,m){var g="nth"!==d.slice(0,3),y="last"!==d.slice(-4),v="of-type"===e;return 1===h&&0===m?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,s,a,c,u=g!==y?"nextSibling":"previousSibling",l=e.parentNode,f=v&&e.nodeName.toLowerCase(),p=!n&&!v;if(l){if(g){for(;u;){for(o=e;o=o[u];)if(v?o.nodeName.toLowerCase()===f:1===o.nodeType)return!1;c=u="only"===d&&!c&&"nextSibling"}return!0}if(c=[y?l.firstChild:l.lastChild],y&&p){for(a=(r=(i=l[C]||(l[C]={}))[d]||[])[0]===E&&r[1],s=r[0]===E&&r[2],o=a&&l.childNodes[a];o=++a&&o&&o[u]||(s=a=0)||c.pop();)if(1===o.nodeType&&++s&&o===e){i[d]=[E,a,s];break}}else if(p&&(r=(e[C]||(e[C]={}))[d])&&r[0]===E)s=r[1];else for(;(o=++a&&o&&o[u]||(s=a=0)||c.pop())&&((v?o.nodeName.toLowerCase()!==f:1!==o.nodeType)||!++s||(p&&((o[C]||(o[C]={}))[d]=[E,s]),o!==e)););return(s-=m)===h||s%h==0&&0<=s/h}}},PSEUDO:function(e,o){var t,s=b.pseudos[e]||b.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return s[C]?s(o):1<s.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?ae(function(e,t){for(var n,r=s(e,o),i=r.length;i--;)e[n=L(e,r[i])]=!(t[n]=r[i])}):function(e){return s(e,0,t)}):s}},pseudos:{not:ae(function(e){var r=[],i=[],a=f(e.replace(U,"$1"));return a[C]?ae(function(e,t,n,r){for(var i,o=a(e,null,r,[]),s=e.length;s--;)(i=o[s])&&(e[s]=!(t[s]=i))}):function(e,t,n){return r[0]=e,a(r,null,n,i),r[0]=null,!i.pop()}}),has:ae(function(t){return function(e){return 0<oe(t,e).length}}),contains:ae(function(t){return t=t.replace(ne,re),function(e){return-1<(e.textContent||e.innerText||o(e)).indexOf(t)}}),lang:ae(function(n){return X.test(n||"")||oe.error("unsupported lang: "+n),n=n.replace(ne,re).toLowerCase(),function(e){var t;do{if(t=v?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===i},focus:function(e){return e===x.activeElement&&(!x.hasFocus||x.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:de(function(){return[0]}),last:de(function(e,t){return[t-1]}),eq:de(function(e,t,n){return[n<0?n+t:n]}),even:de(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:de(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:de(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:de(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=fe(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=pe(e);function me(){}function ge(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ye(s,e,t){var a=e.dir,c=t&&"parentNode"===a,u=p++;return e.first?function(e,t,n){for(;e=e[a];)if(1===e.nodeType||c)return s(e,t,n)}:function(e,t,n){var r,i,o=[E,u];if(n){for(;e=e[a];)if((1===e.nodeType||c)&&s(e,t,n))return!0}else for(;e=e[a];)if(1===e.nodeType||c){if((r=(i=e[C]||(e[C]={}))[a])&&r[0]===E&&r[1]===u)return o[2]=r[2];if((i[a]=o)[2]=s(e,t,n))return!0}}}function ve(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function _e(e,t,n,r,i){for(var o,s=[],a=0,c=e.length,u=null!=t;a<c;a++)(o=e[a])&&(n&&!n(o,r,i)||(s.push(o),u&&t.push(a)));return s}function be(d,h,m,g,y,e){return g&&!g[C]&&(g=be(g)),y&&!y[C]&&(y=be(y,e)),ae(function(e,t,n,r){var i,o,s,a=[],c=[],u=t.length,l=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?l:_e(l,a,d,n,r),p=m?y||(e?d:u||g)?[]:t:f;if(m&&m(f,p,n,r),g)for(i=_e(p,c),g(i,[],n,r),o=i.length;o--;)(s=i[o])&&(p[c[o]]=!(f[c[o]]=s));if(e){if(y||d){if(y){for(i=[],o=p.length;o--;)(s=p[o])&&i.push(f[o]=s);y(null,p=[],i,r)}for(o=p.length;o--;)(s=p[o])&&-1<(i=y?L(e,s):a[o])&&(e[i]=!(t[i]=s))}}else p=_e(p===t?p.splice(u,p.length):p),y?y(null,t,p,r):O.apply(t,p)})}function we(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],s=o||b.relative[" "],a=o?1:0,c=ye(function(e){return e===i},s,!0),u=ye(function(e){return-1<L(i,e)},s,!0),l=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?c(e,t,n):u(e,t,n));return i=null,r}];a<r;a++)if(t=b.relative[e[a].type])l=[ye(ve(l),t)];else{if((t=b.filter[e[a].type].apply(null,e[a].matches))[C]){for(n=++a;n<r&&!b.relative[e[n].type];n++);return be(1<a&&ve(l),1<a&&ge(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(U,"$1"),t,a<n&&we(e.slice(a,n)),n<r&&we(e=e.slice(n)),n<r&&ge(e))}l.push(t)}return ve(l)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,m=oe.tokenize=function(e,t){var n,r,i,o,s,a,c,u=d[e+" "];if(u)return t?0:u.slice(0);for(s=e,a=[],c=b.preFilter;s;){for(o in n&&!(r=$.exec(s))||(r&&(s=s.slice(r[0].length)||s),a.push(i=[])),n=!1,(r=z.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(U," ")}),s=s.slice(n.length)),b.filter)!(r=Z[o].exec(s))||c[o]&&!(r=c[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):d(e,a).slice(0)},f=oe.compile=function(e,t){var n,g,y,v,_,r,i=[],o=[],s=S[e+" "];if(!s){for(t||(t=m(e)),n=t.length;n--;)(s=we(t[n]))[C]?i.push(s):o.push(s);(s=S(e,(g=o,v=0<(y=i).length,_=0<g.length,r=function(e,t,n,r,i){var o,s,a,c=0,u="0",l=e&&[],f=[],p=w,d=e||_&&b.find.TAG("*",i),h=E+=null==p?1:Math.random()||.1,m=d.length;for(i&&(w=t!==x&&t);u!==m&&null!=(o=d[u]);u++){if(_&&o){for(s=0;a=g[s++];)if(a(o,t,n)){r.push(o);break}i&&(E=h)}v&&((o=!a&&o)&&c--,e&&l.push(o))}if(c+=u,v&&u!==c){for(s=0;a=y[s++];)a(l,f,t,n);if(e){if(0<c)for(;u--;)l[u]||f[u]||(f[u]=F.call(r));f=_e(f)}O.apply(r,f),i&&!e&&0<f.length&&1<c+y.length&&oe.uniqueSort(r)}return i&&(E=h,w=p),l},v?ae(r):r))).selector=e}return s},g=oe.select=function(e,t,n,r){var i,o,s,a,c,u="function"==typeof e&&e,l=!r&&m(e=u.selector||e);if(n=n||[],1===l.length){if(2<(o=l[0]=l[0].slice(0)).length&&"ID"===(s=o[0]).type&&h.getById&&9===t.nodeType&&v&&b.relative[o[1].type]){if(!(t=(b.find.ID(s.matches[0].replace(ne,re),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=Z.needsContext.test(e)?0:o.length;i--&&(s=o[i],!b.relative[a=s.type]);)if((c=b.find[a])&&(r=c(s.matches[0].replace(ne,re),ee.test(o[0].type)&&he(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&ge(o)))return O.apply(n,r),n;break}}return(u||f(e,l))(r,t,!v,n,ee.test(e)&&he(t.parentNode)||t),n},h.sortStable=C.split("").sort(j).join("")===C,h.detectDuplicates=!!l,y(),h.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(x.createElement("div"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ue("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),h.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ue("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||ue(I,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(h);k.find=e,k.expr=e.selectors,k.expr[":"]=k.expr.pseudos,k.unique=e.uniqueSort,k.text=e.getText,k.isXMLDoc=e.isXML,k.contains=e.contains;var v=k.expr.match.needsContext,_=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,b=/^.[^:#\[\.,]*$/;function w(e,n,r){if(k.isFunction(n))return k.grep(e,function(e,t){return!!n.call(e,t,e)!==r});if(n.nodeType)return k.grep(e,function(e){return e===n!==r});if("string"==typeof n){if(b.test(n))return k.filter(n,e,r);n=k.filter(n,e)}return k.grep(e,function(e){return 0<=k.inArray(e,n)!==r})}k.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?k.find.matchesSelector(r,e)?[r]:[]:k.find.matches(e,k.grep(t,function(e){return 1===e.nodeType}))},k.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(k(e).filter(function(){for(t=0;t<i;t++)if(k.contains(r[t],this))return!0}));for(t=0;t<i;t++)k.find(e,r[t],n);return(n=this.pushStack(1<i?k.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(w(this,e||[],!1))},not:function(e){return this.pushStack(w(this,e||[],!0))},is:function(e){return!!w(this,"string"==typeof e&&v.test(e)?k(e):e||[],!1).length}});var x,C=h.document,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(k.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:T.exec(e))||!n[1]&&t)return!t||t.jquery?(t||x).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:C,!0)),_.test(n[1])&&k.isPlainObject(t))for(n in t)k.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if((r=C.getElementById(n[2]))&&r.parentNode){if(r.id!==n[2])return x.find(e);this.length=1,this[0]=r}return this.context=C,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):k.isFunction(e)?"undefined"!=typeof x.ready?x.ready(e):e(k):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),k.makeArray(e,this))}).prototype=k.fn,x=k(C);var E=/^(?:parents|prev(?:Until|All))/,S={children:!0,contents:!0,next:!0,prev:!0};function j(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}k.extend({dir:function(e,t,n){for(var r=[],i=e[t];i&&9!==i.nodeType&&(n===undefined||1!==i.nodeType||!k(i).is(n));)1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),k.fn.extend({has:function(e){var t,n=k(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(k.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=v.test(e)||"string"!=typeof e?k(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&k.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?k.unique(o):o)},index:function(e){return e?"string"==typeof e?k.inArray(this[0],k(e)):k.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.unique(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k.dir(e,"parentNode")},parentsUntil:function(e,t,n){return k.dir(e,"parentNode",n)},next:function(e){return j(e,"nextSibling")},prev:function(e){return j(e,"previousSibling")},nextAll:function(e){return k.dir(e,"nextSibling")},prevAll:function(e){return k.dir(e,"previousSibling")},nextUntil:function(e,t,n){return k.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return k.dir(e,"previousSibling",n)},siblings:function(e){return k.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return k.sibling(e.firstChild)},contents:function(e){return k.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:k.merge([],e.childNodes)}},function(r,i){k.fn[r]=function(e,t){var n=k.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=k.filter(t,n)),1<this.length&&(S[r]||(n=k.unique(n)),E.test(r)&&(n=n.reverse())),this.pushStack(n)}});var N,A=/\S+/g,F={};function P(){C.addEventListener?(C.removeEventListener("DOMContentLoaded",O,!1),h.removeEventListener("load",O,!1)):(C.detachEvent("onreadystatechange",O),h.detachEvent("onload",O))}function O(){(C.addEventListener||"load"===event.type||"complete"===C.readyState)&&(P(),k.ready())}k.Callbacks=function(i){var e,n;i="string"==typeof i?F[i]||(n=F[e=i]={},k.each(e.match(A)||[],function(e,t){n[t]=!0}),n):k.extend({},i);var o,t,r,s,a,c,u=[],l=!i.once&&[],f=function(e){for(t=i.memory&&e,r=!0,a=c||0,c=0,s=u.length,o=!0;u&&a<s;a++)if(!1===u[a].apply(e[0],e[1])&&i.stopOnFalse){t=!1;break}o=!1,u&&(l?l.length&&f(l.shift()):t?u=[]:p.disable())},p={add:function(){if(u){var e=u.length;!function r(e){k.each(e,function(e,t){var n=k.type(t);"function"===n?i.unique&&p.has(t)||u.push(t):t&&t.length&&"string"!==n&&r(t)})}(arguments),o?s=u.length:t&&(c=e,f(t))}return this},remove:function(){return u&&k.each(arguments,function(e,t){for(var n;-1<(n=k.inArray(t,u,n));)u.splice(n,1),o&&(n<=s&&s--,n<=a&&a--)}),this},has:function(e){return e?-1<k.inArray(e,u):!(!u||!u.length)},empty:function(){return u=[],s=0,this},disable:function(){return u=l=t=undefined,this},disabled:function(){return!u},lock:function(){return l=undefined,t||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!u||r&&!l||(t=[e,(t=t||[]).slice?t.slice():t],o?l.push(t):f(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!r}};return p},k.extend({Deferred:function(e){var o=[["resolve","done",k.Callbacks("once memory"),"resolved"],["reject","fail",k.Callbacks("once memory"),"rejected"],["notify","progress",k.Callbacks("memory")]],i="pending",s={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var i=arguments;return k.Deferred(function(r){k.each(o,function(e,t){var n=k.isFunction(i[e])&&i[e];a[t[1]](function(){var e=n&&n.apply(this,arguments);e&&k.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[t[0]+"With"](this===s?r.promise():this,n?[e]:arguments)})}),i=null}).promise()},promise:function(e){return null!=e?k.extend(e,s):s}},a={};return s.pipe=s.then,k.each(o,function(e,t){var n=t[2],r=t[3];s[t[1]]=n.add,r&&n.add(function(){i=r},o[1^e][2].disable,o[2][2].lock),a[t[0]]=function(){return a[t[0]+"With"](this===a?s:this,arguments),this},a[t[0]+"With"]=n.fireWith}),s.promise(a),e&&e.call(a,a),a},when:function(e){var i,t,n,r=0,o=l.call(arguments),s=o.length,a=1!==s||e&&k.isFunction(e.promise)?s:0,c=1===a?e:k.Deferred(),u=function(t,n,r){return function(e){n[t]=this,r[t]=1<arguments.length?l.call(arguments):e,r===i?c.notifyWith(n,r):--a||c.resolveWith(n,r)}};if(1<s)for(i=new Array(s),t=new Array(s),n=new Array(s);r<s;r++)o[r]&&k.isFunction(o[r].promise)?o[r].promise().done(u(r,n,o)).fail(c.reject).progress(u(r,t,i)):--a;return a||c.resolveWith(n,o),c.promise()}}),k.fn.ready=function(e){return k.ready.promise().done(e),this},k.extend({isReady:!1,readyWait:1,holdReady:function(e){e?k.readyWait++:k.ready(!0)},ready:function(e){if(!0===e?!--k.readyWait:!k.isReady){if(!C.body)return setTimeout(k.ready);(k.isReady=!0)!==e&&0<--k.readyWait||(N.resolveWith(C,[k]),k.fn.triggerHandler&&(k(C).triggerHandler("ready"),k(C).off("ready")))}}}),k.ready.promise=function(t){if(!N)if(N=k.Deferred(),"complete"===C.readyState)setTimeout(k.ready);else if(C.addEventListener)C.addEventListener("DOMContentLoaded",O,!1),h.addEventListener("load",O,!1);else{C.attachEvent("onreadystatechange",O),h.attachEvent("onload",O);var n=!1;try{n=null==h.frameElement&&C.documentElement}catch(o){}n&&n.doScroll&&function e(){if(!k.isReady){try{n.doScroll("left")}catch(o){return setTimeout(e,50)}P(),k.ready()}}()}return N.promise(t)};var R,L=typeof undefined;for(R in k(y))break;y.ownLast="0"!==R,y.inlineBlockNeedsLayout=!1,k(function(){var e,t,n,r;(n=C.getElementsByTagName("body")[0])&&n.style&&(t=C.createElement("div"),(r=C.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==L&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",y.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=C.createElement("div");if(null==y.deleteExpando){y.deleteExpando=!0;try{delete e.test}catch(r){y.deleteExpando=!1}}e=null}(),k.acceptData=function(e){var t=k.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var I=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,D=/([A-Z])/g;function B(e,t,n){if(n===undefined&&1===e.nodeType){var r="data-"+t.replace(D,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:I.test(n)?k.parseJSON(n):n)}catch(i){}k.data(e,t,n)}else n=undefined}return n}function q(e){var t;for(t in e)if(("data"!==t||!k.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function M(e,t,n,r){if(k.acceptData(e)){var i,o,s=k.expando,a=e.nodeType,c=a?k.cache:e,u=a?e[s]:e[s]&&s;if(u&&c[u]&&(r||c[u].data)||n!==undefined||"string"!=typeof t)return u||(u=a?e[s]=f.pop()||k.guid++:s),c[u]||(c[u]=a?{}:{toJSON:k.noop}),"object"!=typeof t&&"function"!=typeof t||(r?c[u]=k.extend(c[u],t):c[u].data=k.extend(c[u].data,t)),o=c[u],r||(o.data||(o.data={}),o=o.data),n!==undefined&&(o[k.camelCase(t)]=n),"string"==typeof t?null==(i=o[t])&&(i=o[k.camelCase(t)]):i=o,i}}function H(e,t,n){if(k.acceptData(e)){var r,i,o=e.nodeType,s=o?k.cache:e,a=o?e[k.expando]:k.expando;if(s[a]){if(t&&(r=n?s[a]:s[a].data)){i=(t=k.isArray(t)?t.concat(k.map(t,k.camelCase)):t in r?[t]:(t=k.camelCase(t))in r?[t]:t.split(" ")).length;for(;i--;)delete r[t[i]];if(n?!q(r):!k.isEmptyObject(r))return}(n||(delete s[a].data,q(s[a])))&&(o?k.cleanData([e],!0):y.deleteExpando||s!=s.window?delete s[a]:s[a]=null)}}}k.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?k.cache[e[k.expando]]:e[k.expando])&&!q(e)},data:function(e,t,n){return M(e,t,n)},removeData:function(e,t){return H(e,t)},_data:function(e,t,n){return M(e,t,n,!0)},_removeData:function(e,t){return H(e,t,!0)}}),k.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(e===undefined){if(this.length&&(i=k.data(o),1===o.nodeType&&!k._data(o,"parsedAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&B(o,r=k.camelCase(r.slice(5)),i[r]);k._data(o,"parsedAttrs",!0)}return i}return"object"==typeof e?this.each(function(){k.data(this,e)}):1<arguments.length?this.each(function(){k.data(this,e,t)}):o?B(o,e,k.data(o,e)):undefined},removeData:function(e){return this.each(function(){k.removeData(this,e)})}}),k.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=k._data(e,t),n&&(!r||k.isArray(n)?r=k._data(e,t,k.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=k.queue(e,t),r=n.length,i=n.shift(),o=k._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){k.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return k._data(e,n)||k._data(e,n,{empty:k.Callbacks("once memory").add(function(){k._removeData(e,t+"queue"),k._removeData(e,n)})})}}),k.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?k.queue(this[0],t):n===undefined?this:this.each(function(){var e=k.queue(this,t,n);k._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&k.dequeue(this,t)})},dequeue:function(e){return this.each(function(){k.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=k.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=undefined),e=e||"fx";s--;)(n=k._data(o[s],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var W=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=["Top","Right","Bottom","Left"],$=function(e,t){return e=t||e,"none"===k.css(e,"display")||!k.contains(e.ownerDocument,e)},z=k.access=function(e,t,n,r,i,o,s){var a=0,c=e.length,u=null==n;if("object"===k.type(n))for(a in i=!0,n)k.access(e,t,a,n[a],!0,o,s);else if(r!==undefined&&(i=!0,k.isFunction(r)||(s=!0),u&&(s?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(k(e),n)})),t))for(;a<c;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:u?t.call(e):c?t(e[0],n):o},V=/^(?:checkbox|radio)$/i;!function(){var e=C.createElement("input"),t=C.createElement("div"),n=C.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",y.leadingWhitespace=3===t.firstChild.nodeType,y.tbody=!t.getElementsByTagName("tbody").length,y.htmlSerialize=!!t.getElementsByTagName("link").length,y.html5Clone="<:nav></:nav>"!==C.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),y.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",y.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,y.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){y.noCloneEvent=!1}),t.cloneNode(!0).click()),null==y.deleteExpando){y.deleteExpando=!0;try{delete t.test}catch(o){y.deleteExpando=!1}}}(),function(){var e,t,n=C.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})t="on"+e,(y[e+"Bubbles"]=t in h)||(n.setAttribute(t,"t"),y[e+"Bubbles"]=!1===n.attributes[t].expando);n=null}();var K=/^(?:input|select|textarea)$/i,X=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,J=/^(?:focusinfocus|focusoutblur)$/,Q=/^([^.]*)(?:\.(.+)|)$/;function G(){return!0}function Y(){return!1}function ee(){try{return C.activeElement}catch(t){}}function te(e){var t=ne.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}k.event={global:{},add:function(e,t,n,r,i){var o,s,a,c,u,l,f,p,d,h,m,g=k._data(e);if(g){for(n.handler&&(n=(c=n).handler,i=c.selector),n.guid||(n.guid=k.guid++),(s=g.events)||(s=g.events={}),(l=g.handle)||((l=g.handle=function(e){return typeof k===L||e&&k.event.triggered===e.type?undefined:k.event.dispatch.apply(l.elem,arguments)}).elem=e),a=(t=(t||"").match(A)||[""]).length;a--;)d=m=(o=Q.exec(t[a])||[])[1],h=(o[2]||"").split(".").sort(),d&&(u=k.event.special[d]||{},d=(i?u.delegateType:u.bindType)||d,u=k.event.special[d]||{},f=k.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:h.join(".")},c),(p=s[d])||((p=s[d]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,r,h,l)||(e.addEventListener?e.addEventListener(d,l,!1):e.attachEvent&&e.attachEvent("on"+d,l))),u.add&&(u.add.call(e,f),f.handler.guid||(f.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,f):p.push(f),k.event.global[d]=!0);e=null}},remove:function(e,t,n,r,i){var o,s,a,c,u,l,f,p,d,h,m,g=k.hasData(e)&&k._data(e);if(g&&(l=g.events)){for(u=(t=(t||"").match(A)||[""]).length;u--;)if(d=m=(a=Q.exec(t[u])||[])[1],h=(a[2]||"").split(".").sort(),d){for(f=k.event.special[d]||{},p=l[d=(r?f.delegateType:f.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=o=p.length;o--;)s=p[o],!i&&m!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||r&&r!==s.selector&&("**"!==r||!s.selector)||(p.splice(o,1),s.selector&&p.delegateCount--,f.remove&&f.remove.call(e,s));c&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,g.handle)||k.removeEvent(e,d,g.handle),delete l[d])}else for(d in l)k.event.remove(e,d+t[u],n,r,!0);k.isEmptyObject(l)&&(delete g.handle,k._removeData(e,"events"))}},trigger:function(e,t,n,r){var i,o,s,a,c,u,l,f=[n||C],p=g.call(e,"type")?e.type:e,d=g.call(e,"namespace")?e.namespace.split("."):[];if(s=u=n=n||C,3!==n.nodeType&&8!==n.nodeType&&!J.test(p+k.event.triggered)&&(0<=p.indexOf(".")&&(p=(d=p.split(".")).shift(),d.sort()),o=p.indexOf(":")<0&&"on"+p,(e=e[k.expando]?e:new k.Event(p,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=d.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=undefined,e.target||(e.target=n),t=null==t?[e]:k.makeArray(t,[e]),c=k.event.special[p]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!k.isWindow(n)){for(a=c.delegateType||p,J.test(a+p)||(s=s.parentNode);s;s=s.parentNode)f.push(s),u=s;u===(n.ownerDocument||C)&&f.push(u.defaultView||u.parentWindow||h)}for(l=0;(s=f[l++])&&!e.isPropagationStopped();)e.type=1<l?a:c.bindType||p,(i=(k._data(s,"events")||{})[e.type]&&k._data(s,"handle"))&&i.apply(s,t),(i=o&&s[o])&&i.apply&&k.acceptData(s)&&(e.result=i.apply(s,t),!1===e.result&&e.preventDefault());if(e.type=p,!r&&!e.isDefaultPrevented()&&(!c._default||!1===c._default.apply(f.pop(),t))&&k.acceptData(n)&&o&&n[p]&&!k.isWindow(n)){(u=n[o])&&(n[o]=null),k.event.triggered=p;try{n[p]()}catch(m){}k.event.triggered=undefined,u&&(n[o]=u)}return e.result}},dispatch:function(e){e=k.event.fix(e);var t,n,r,i,o,s,a=l.call(arguments),c=(k._data(this,"events")||{})[e.type]||[],u=k.event.special[e.type]||{};if((a[0]=e).delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(s=k.event.handlers.call(this,e,c),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,o=0;(r=i.handlers[o++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(r.namespace)||(e.handleObj=r,e.data=r.data,(n=((k.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,a))!==undefined&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,c=e.target;if(a&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(!0!==c.disabled||"click"!==e.type)){for(i=[],o=0;o<a;o++)i[n=(r=t[o]).selector+" "]===undefined&&(i[n]=r.needsContext?0<=k(n,this).index(c):k.find(n,this,null,[c]).length),i[n]&&i.push(r);i.length&&s.push({elem:c,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},fix:function(e){if(e[k.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=Z.test(i)?this.mouseHooks:X.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new k.Event(o),t=r.length;t--;)e[n=r[t]]=o[n];return e.target||(e.target=o.srcElement||C),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=(r=e.target.ownerDocument||C).documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||o===undefined||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ee()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===ee()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(k.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return k.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=k.extend(new k.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?k.event.trigger(i,null,t):k.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},k.removeEvent=C.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===L&&(e[r]=null),e.detachEvent(r,n))},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&!1===e.returnValue?G:Y):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||k.now(),this[k.expando]=!0},k.Event.prototype={isDefaultPrevented:Y,isPropagationStopped:Y,isImmediatePropagationStopped:Y,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=G,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=G,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=G,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){k.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||k.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),y.submitBubbles||(k.event.special.submit={setup:function(){if(k.nodeName(this,"form"))return!1;k.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=k.nodeName(t,"input")||k.nodeName(t,"button")?t.form:undefined;n&&!k._data(n,"submitBubbles")&&(k.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),k._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&k.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(k.nodeName(this,"form"))return!1;k.event.remove(this,"._submit")}}),y.changeBubbles||(k.event.special.change={setup:function(){if(K.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(k.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),k.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),k.event.simulate("change",this,e,!0)})),!1;k.event.add(this,"beforeactivate._change",function(e){var t=e.target;K.test(t.nodeName)&&!k._data(t,"changeBubbles")&&(k.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||k.event.simulate("change",this.parentNode,e,!0)}),k._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return k.event.remove(this,"._change"),!K.test(this.nodeName)}}),y.focusinBubbles||k.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){k.event.simulate(r,e.target,k.event.fix(e),!0)};k.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=k._data(e,r);t||e.addEventListener(n,i,!0),k._data(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=k._data(e,r)-1;t?k._data(e,r,t):(e.removeEventListener(n,i,!0),k._removeData(e,r))}}}),k.fn.extend({on:function(e,t,n,r,i){var o,s;if("object"==typeof e){for(o in"string"!=typeof t&&(n=n||t,t=undefined),e)this.on(o,t,n,e[o],i);return this}if(null==n&&null==r?(r=t,n=t=undefined):null==r&&("string"==typeof t?(r=n,n=undefined):(r=n,n=t,t=undefined)),!1===r)r=Y;else if(!r)return this;return 1===i&&(s=r,(r=function(e){return k().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=k.guid++)),this.each(function(){k.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,k(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=undefined),!1===n&&(n=Y),this.each(function(){k.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){k.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return k.event.trigger(e,t,n,!0)}});var ne="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",re=/ jQuery\d+="(?:null|\d+)"/g,ie=new RegExp("<(?:"+ne+")[\\s/>]","i"),oe=/^\s+/,se=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ae=/<([\w:]+)/,ce=/<tbody/i,ue=/<|&#?\w+;/,le=/<(?:script|style|link)/i,fe=/checked\s*(?:[^=]|=\s*.checked.)/i,pe=/^$|\/(?:java|ecma)script/i,de=/^true\/(.*)/,he=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,me={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:y.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ge=te(C).appendChild(C.createElement("div"));function ye(e,t){var n,r,i=0,o=typeof e.getElementsByTagName!==L?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==L?e.querySelectorAll(t||"*"):undefined;if(!o)for(o=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||k.nodeName(r,t)?o.push(r):k.merge(o,ye(r,t));return t===undefined||t&&k.nodeName(e,t)?k.merge([e],o):o}function ve(e){V.test(e.type)&&(e.defaultChecked=e.checked)}function _e(e,t){return k.nodeName(e,"table")&&k.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function be(e){return e.type=(null!==k.find.attr(e,"type"))+"/"+e.type,e}function we(e){var t=de.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function xe(e,t){for(var n,r=0;null!=(n=e[r]);r++)k._data(n,"globalEval",!t||k._data(t[r],"globalEval"))}function ke(e,t){if(1===t.nodeType&&k.hasData(e)){var n,r,i,o=k._data(e),s=k._data(t,o),a=o.events;if(a)for(n in delete s.handle,s.events={},a)for(r=0,i=a[n].length;r<i;r++)k.event.add(t,n,a[n][r]);s.data&&(s.data=k.extend({},s.data))}}function Ce(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!y.noCloneEvent&&t[k.expando]){for(r in(i=k._data(t)).events)k.removeEvent(t,r,i.handle);t.removeAttribute(k.expando)}"script"===n&&t.text!==e.text?(be(t).text=e.text,we(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),y.html5Clone&&e.innerHTML&&!k.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&V.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}me.optgroup=me.option,me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td,k.extend({clone:function(e,t,n){var r,i,o,s,a,c=k.contains(e.ownerDocument,e);if(y.html5Clone||k.isXMLDoc(e)||!ie.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(ge.innerHTML=e.outerHTML,ge.removeChild(o=ge.firstChild)),!(y.noCloneEvent&&y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||k.isXMLDoc(e)))for(r=ye(o),a=ye(e),s=0;null!=(i=a[s]);++s)r[s]&&Ce(i,r[s]);if(t)if(n)for(a=a||ye(e),r=r||ye(o),s=0;null!=(i=a[s]);s++)ke(i,r[s]);else ke(e,o);return 0<(r=ye(o,"script")).length&&xe(r,!c&&ye(e,"script")),r=a=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,s,a,c,u,l,f=e.length,p=te(t),d=[],h=0;h<f;h++)if((o=e[h])||0===o)if("object"===k.type(o))k.merge(d,o.nodeType?[o]:o);else if(ue.test(o)){for(a=a||p.appendChild(t.createElement("div")),c=(ae.exec(o)||["",""])[1].toLowerCase(),l=me[c]||me._default,a.innerHTML=l[1]+o.replace(se,"<$1></$2>")+l[2],i=l[0];i--;)a=a.lastChild;if(!y.leadingWhitespace&&oe.test(o)&&d.push(t.createTextNode(oe.exec(o)[0])),!y.tbody)for(i=(o="table"!==c||ce.test(o)?"<table>"!==l[1]||ce.test(o)?0:a:a.firstChild)&&o.childNodes.length;i--;)k.nodeName(u=o.childNodes[i],"tbody")&&!u.childNodes.length&&o.removeChild(u);for(k.merge(d,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=p.lastChild}else d.push(t.createTextNode(o));for(a&&p.removeChild(a),y.appendChecked||k.grep(ye(d,"input"),ve),h=0;o=d[h++];)if((!r||-1===k.inArray(o,r))&&(s=k.contains(o.ownerDocument,o),a=ye(p.appendChild(o),"script"),s&&xe(a),n))for(i=0;o=a[i++];)pe.test(o.type||"")&&n.push(o);return a=null,p},cleanData:function(e,t){for(var n,r,i,o,s=0,a=k.expando,c=k.cache,u=y.deleteExpando,l=k.event.special;null!=(n=e[s]);s++)if((t||k.acceptData(n))&&(o=(i=n[a])&&c[i])){if(o.events)for(r in o.events)l[r]?k.event.remove(n,r):k.removeEvent(n,r,o.handle);c[i]&&(delete c[i],u?delete n[a]:typeof n.removeAttribute!==L?n.removeAttribute(a):n[a]=null,f.push(i))}}}),k.fn.extend({text:function(e){return z(this,function(e){return e===undefined?k.text(this):this.empty().append((this[0]&&this[0].ownerDocument||C).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||_e(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=_e(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?k.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||k.cleanData(ye(n)),n.parentNode&&(t&&k.contains(n.ownerDocument,n)&&xe(ye(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&k.cleanData(ye(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&k.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return k.clone(this,e,t)})},html:function(e){return z(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined)return 1===t.nodeType?t.innerHTML.replace(re,""):undefined;if("string"==typeof e&&!le.test(e)&&(y.htmlSerialize||!ie.test(e))&&(y.leadingWhitespace||!oe.test(e))&&!me[(ae.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(se,"<$1></$2>");try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(k.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,k.cleanData(ye(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(n,r){n=m.apply([],n);var e,t,i,o,s,a,c=0,u=this.length,l=this,f=u-1,p=n[0],d=k.isFunction(p);if(d||1<u&&"string"==typeof p&&!y.checkClone&&fe.test(p))return this.each(function(e){var t=l.eq(e);d&&(n[0]=p.call(this,e,t.html())),t.domManip(n,r)});if(u&&(e=(a=k.buildFragment(n,this[0].ownerDocument,!1,this)).firstChild,1===a.childNodes.length&&(a=e),e)){for(i=(o=k.map(ye(a,"script"),be)).length;c<u;c++)t=a,c!==f&&(t=k.clone(t,!0,!0),i&&k.merge(o,ye(t,"script"))),r.call(this[c],t,c);if(i)for(s=o[o.length-1].ownerDocument,k.map(o,we),c=0;c<i;c++)t=o[c],pe.test(t.type||"")&&!k._data(t,"globalEval")&&k.contains(s,t)&&(t.src?k._evalUrl&&k._evalUrl(t.src):k.globalEval((t.text||t.textContent||t.innerHTML||"").replace(he,"")));a=e=null}return this}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,s){k.fn[e]=function(e){for(var t,n=0,r=[],i=k(e),o=i.length-1;n<=o;n++)t=n===o?this:this.clone(!0),k(i[n])[s](t),a.apply(r,t.get());return this.pushStack(r)}});var Te,Ee,Se={};function je(e,t){var n,r=k(t.createElement(e)).appendTo(t.body),i=h.getDefaultComputedStyle&&(n=h.getDefaultComputedStyle(r[0]))?n.display:k.css(r[0],"display");return r.detach(),i}function Ne(e){var t=C,n=Se[e];return n||("none"!==(n=je(e,t))&&n||((t=((Te=(Te||k("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentWindow||Te[0].contentDocument).document).write(),t.close(),n=je(e,t),Te.detach()),Se[e]=n),n}y.shrinkWrapBlocks=function(){return null!=Ee?Ee:(Ee=!1,(t=C.getElementsByTagName("body")[0])&&t.style?(e=C.createElement("div"),(n=C.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(n).appendChild(e),typeof e.style.zoom!==L&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(C.createElement("div")).style.width="5px",Ee=3!==e.offsetWidth),t.removeChild(n),Ee):void 0);var e,t,n};var Ae,Fe,Pe=/^margin/,Oe=new RegExp("^("+W+")(?!px)[a-z%]+$","i"),Re=/^(top|right|bottom|left)$/;function Le(t,n){return{get:function(){var e=t();if(null!=e){if(!e)return(this.get=n).apply(this,arguments);delete this.get}}}}h.getComputedStyle?(Ae=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):h.getComputedStyle(e,null)},Fe=function(e,t,n){var r,i,o,s,a=e.style;return s=(n=n||Ae(e))?n.getPropertyValue(t)||n[t]:undefined,n&&(""!==s||k.contains(e.ownerDocument,e)||(s=k.style(e,t)),Oe.test(s)&&Pe.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),s===undefined?s:s+""}):C.documentElement.currentStyle&&(Ae=function(e){return e.currentStyle},Fe=function(e,t,n){var r,i,o,s,a=e.style;return null==(s=(n=n||Ae(e))?n[t]:undefined)&&a&&a[t]&&(s=a[t]),Oe.test(s)&&!Re.test(t)&&(r=a.left,(o=(i=e.runtimeStyle)&&i.left)&&(i.left=e.currentStyle.left),a.left="fontSize"===t?"1em":s,s=a.pixelLeft+"px",a.left=r,o&&(i.left=o)),s===undefined?s:s+""||"auto"}),function(){var e,t,n,i,o,s,a;function r(){var e,t,n,r;(t=C.getElementsByTagName("body")[0])&&t.style&&(e=C.createElement("div"),(n=C.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(n).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",i=o=!1,a=!0,h.getComputedStyle&&(i="1%"!==(h.getComputedStyle(e,null)||{}).top,o="4px"===(h.getComputedStyle(e,null)||{width:"4px"}).width,(r=e.appendChild(C.createElement("div"))).style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",e.style.width="1px",a=!parseFloat((h.getComputedStyle(r,null)||{}).marginRight),e.removeChild(r)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(r=e.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(s=0===r[0].offsetHeight)&&(r[0].style.display="",r[1].style.display="none",s=0===r[0].offsetHeight),t.removeChild(n))}(e=C.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(t=(n=e.getElementsByTagName("a")[0])&&n.style)&&(t.cssText="float:left;opacity:.5",y.opacity="0.5"===t.opacity,y.cssFloat=!!t.cssFloat,e.style.backgroundClip="content-box",e.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===e.style.backgroundClip,y.boxSizing=""===t.boxSizing||""===t.MozBoxSizing||""===t.WebkitBoxSizing,k.extend(y,{reliableHiddenOffsets:function(){return null==s&&r(),s},boxSizingReliable:function(){return null==o&&r(),o},pixelPosition:function(){return null==i&&r(),i},reliableMarginRight:function(){return null==a&&r(),a}}))}(),k.swap=function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=s[o];return i};var Ie=/alpha\([^)]*\)/i,De=/opacity\s*=\s*([^)]*)/,Be=/^(none|table(?!-c[ea]).+)/,qe=new RegExp("^("+W+")(.*)$","i"),Me=new RegExp("^([+-])=("+W+")","i"),He={position:"absolute",visibility:"hidden",display:"block"},We={letterSpacing:"0",fontWeight:"400"},Ue=["Webkit","O","Moz","ms"];function $e(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Ue.length;i--;)if((t=Ue[i]+n)in e)return t;return r}function ze(e,t){for(var n,r,i,o=[],s=0,a=e.length;s<a;s++)(r=e[s]).style&&(o[s]=k._data(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&$(r)&&(o[s]=k._data(r,"olddisplay",Ne(r.nodeName)))):(i=$(r),(n&&"none"!==n||!i)&&k._data(r,"olddisplay",i?n:k.css(r,"display"))));for(s=0;s<a;s++)(r=e[s]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}function Ve(e,t,n){var r=qe.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Ke(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;o<4;o+=2)"margin"===n&&(s+=k.css(e,n+U[o],!0,i)),r?("content"===n&&(s-=k.css(e,"padding"+U[o],!0,i)),"margin"!==n&&(s-=k.css(e,"border"+U[o]+"Width",!0,i))):(s+=k.css(e,"padding"+U[o],!0,i),"padding"!==n&&(s+=k.css(e,"border"+U[o]+"Width",!0,i)));return s}function Xe(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Ae(e),s=y.boxSizing&&"border-box"===k.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(((i=Fe(e,t,o))<0||null==i)&&(i=e.style[t]),Oe.test(i))return i;r=s&&(y.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+Ke(e,t,n||(s?"border":"content"),r,o)+"px"}function Ze(e,t,n,r,i){return new Ze.prototype.init(e,t,n,r,i)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Fe(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":y.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=k.camelCase(t),c=e.style;if(t=k.cssProps[a]||(k.cssProps[a]=$e(c,a)),s=k.cssHooks[t]||k.cssHooks[a],n===undefined)return s&&"get"in s&&(i=s.get(e,!1,r))!==undefined?i:c[t];if("string"==(o=typeof n)&&(i=Me.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(k.css(e,t)),o="number"),null!=n&&n==n&&("number"!==o||k.cssNumber[a]||(n+="px"),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),!(s&&"set"in s&&(n=s.set(e,n,r))===undefined)))try{c[t]=n}catch(p){}}},css:function(e,t,n,r){var i,o,s,a=k.camelCase(t);return t=k.cssProps[a]||(k.cssProps[a]=$e(e.style,a)),(s=k.cssHooks[t]||k.cssHooks[a])&&"get"in s&&(o=s.get(e,!0,n)),o===undefined&&(o=Fe(e,t,r)),"normal"===o&&t in We&&(o=We[t]),""===n||n?(i=parseFloat(o),!0===n||k.isNumeric(i)?i||0:o):o}}),k.each(["height","width"],function(e,i){k.cssHooks[i]={get:function(e,t,n){if(t)return Be.test(k.css(e,"display"))&&0===e.offsetWidth?k.swap(e,He,function(){return Xe(e,i,n)}):Xe(e,i,n)},set:function(e,t,n){var r=n&&Ae(e);return Ve(0,t,n?Ke(e,i,n,y.boxSizing&&"border-box"===k.css(e,"boxSizing",!1,r),r):0)}}}),y.opacity||(k.cssHooks.opacity={get:function(e,t){return De.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=k.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";((n.zoom=1)<=t||""===t)&&""===k.trim(o.replace(Ie,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=Ie.test(o)?o.replace(Ie,i):o+" "+i)}}),k.cssHooks.marginRight=Le(y.reliableMarginRight,function(e,t){if(t)return k.swap(e,{display:"inline-block"},Fe,[e,"marginRight"])}),k.each({margin:"",padding:"",border:"Width"},function(i,o){k.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+U[t]+o]=r[t]||r[t-2]||r[0];return n}},Pe.test(i)||(k.cssHooks[i+o].set=Ve)}),k.fn.extend({css:function(e,t){return z(this,function(e,t,n){var r,i,o={},s=0;if(k.isArray(t)){for(r=Ae(e),i=t.length;s<i;s++)o[t[s]]=k.css(e,t[s],!1,r);return o}return n!==undefined?k.style(e,t,n):k.css(e,t)},e,t,1<arguments.length)},show:function(){return ze(this,!0)},hide:function(){return ze(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){$(this)?k(this).show():k(this).hide()})}}),((k.Tween=Ze).prototype={constructor:Ze,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(k.cssNumber[n]?"":"px")},cur:function(){var e=Ze.propHooks[this.prop];return e&&e.get?e.get(this):Ze.propHooks._default.get(this)},run:function(e){var t,n=Ze.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ze.propHooks._default.set(this),this}}).init.prototype=Ze.prototype,(Ze.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[k.cssProps[e.prop]]||k.cssHooks[e.prop])?k.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}}).scrollTop=Ze.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},k.fx=Ze.prototype.init,k.fx.step={};var Je,Qe,Ge,Ye,et,tt,nt,rt=/^(?:toggle|show|hide)$/,it=new RegExp("^(?:([+-])=|)("+W+")([a-z%]*)$","i"),ot=/queueHooks$/,st=[function(t,e,n){var r,i,o,s,a,c,u,l=this,f={},p=t.style,d=t.nodeType&&$(t),h=k._data(t,"fxshow");for(r in n.queue||(null==(a=k._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,c=a.empty.fire,a.empty.fire=function(){a.unqueued||c()}),a.unqueued++,l.always(function(){l.always(function(){a.unqueued--,k.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===("none"===(u=k.css(t,"display"))?k._data(t,"olddisplay")||Ne(t.nodeName):u)&&"none"===k.css(t,"float")&&(y.inlineBlockNeedsLayout&&"inline"!==Ne(t.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",y.shrinkWrapBlocks()||l.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),e)if(i=e[r],rt.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(d?"hide":"show")){if("show"!==i||!h||h[r]===undefined)continue;d=!0}f[r]=h&&h[r]||k.style(t,r)}else u=undefined;if(k.isEmptyObject(f))"inline"===("none"===u?Ne(t.nodeName):u)&&(p.display=u);else for(r in h?"hidden"in h&&(d=h.hidden):h=k._data(t,"fxshow",{}),o&&(h.hidden=!d),d?k(t).show():l.done(function(){k(t).hide()}),l.done(function(){var e;for(e in k._removeData(t,"fxshow"),f)k.style(t,e,f[e])}),f)s=lt(d?h[r]:0,r,l),r in h||(h[r]=s.start,d&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}],at={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=it.exec(t),o=i&&i[3]||(k.cssNumber[e]?"":"px"),s=(k.cssNumber[e]||"px"!==o&&+r)&&it.exec(k.css(n.elem,e)),a=1,c=20;if(s&&s[3]!==o)for(o=o||s[3],i=i||[],s=+r||1;s/=a=a||".5",k.style(n.elem,e,s+o),a!==(a=n.cur()/r)&&1!==a&&--c;);return i&&(s=n.start=+s||+r||0,n.unit=o,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};function ct(){return setTimeout(function(){Je=undefined}),Je=k.now()}function ut(e,t){var n,r={height:e},i=0;for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=U[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function lt(e,t,n){for(var r,i=(at[t]||[]).concat(at["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,t,e))return r}function ft(o,e,t){var n,s,r=0,i=st.length,a=k.Deferred().always(function(){delete c.elem}),c=function(){if(s)return!1;for(var e=Je||ct(),t=Math.max(0,u.startTime+u.duration-e),n=1-(t/u.duration||0),r=0,i=u.tweens.length;r<i;r++)u.tweens[r].run(n);return a.notifyWith(o,[u,n,t]),n<1&&i?t:(a.resolveWith(o,[u]),!1)},u=a.promise({elem:o,props:k.extend({},e),opts:k.extend(!0,{specialEasing:{}},t),originalProperties:e,originalOptions:t,startTime:Je||ct(),duration:t.duration,tweens:[],createTween:function(e,t){var n=k.Tween(o,u.opts,e,t,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(n),n},stop:function(e){var t=0,n=e?u.tweens.length:0;if(s)return this;for(s=!0;t<n;t++)u.tweens[t].run(1);return e?a.resolveWith(o,[u,e]):a.rejectWith(o,[u,e]),this}}),l=u.props;for(function(e,t){var n,r,i,o,s;for(n in e)if(i=t[r=k.camelCase(n)],o=e[n],k.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(s=k.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(l,u.opts.specialEasing);r<i;r++)if(n=st[r].call(u,o,l,u.opts))return n;return k.map(l,lt,u),k.isFunction(u.opts.start)&&u.opts.start.call(o,u),k.fx.timer(k.extend(c,{elem:o,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}k.Animation=k.extend(ft,{tweener:function(e,t){k.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;r<i;r++)n=e[r],at[n]=at[n]||[],at[n].unshift(t)},prefilter:function(e,t){t?st.unshift(e):st.push(e)}}),k.speed=function(e,t,n){var r=e&&"object"==typeof e?k.extend({},e):{complete:n||!n&&t||k.isFunction(e)&&e,duration:e,easing:n&&t||t&&!k.isFunction(t)&&t};return r.duration=k.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in k.fx.speeds?k.fx.speeds[r.duration]:k.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){k.isFunction(r.old)&&r.old.call(this),r.queue&&k.dequeue(this,r.queue)},r},k.fn.extend({fadeTo:function(e,t,n,r){return this.filter($).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=k.isEmptyObject(t),o=k.speed(e,n,r),s=function(){var e=ft(this,k.extend({},t),o);(i||k._data(this,"finish"))&&e.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(i,e,o){var s=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=undefined),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=k.timers,r=k._data(this);if(t)r[t]&&r[t].stop&&s(r[t]);else for(t in r)r[t]&&r[t].stop&&ot.test(t)&&s(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||k.dequeue(this,i)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var e,t=k._data(this),n=t[s+"queue"],r=t[s+"queueHooks"],i=k.timers,o=n?n.length:0;for(t.finish=!0,k.queue(this,s,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===s&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),k.each(["toggle","show","hide"],function(e,r){var i=k.fn[r];k.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ut(r,!0),e,t,n)}}),k.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){k.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),k.timers=[],k.fx.tick=function(){var e,t=k.timers,n=0;for(Je=k.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||k.fx.stop(),Je=undefined},k.fx.timer=function(e){k.timers.push(e),e()?k.fx.start():k.timers.pop()},k.fx.interval=13,k.fx.start=function(){Qe||(Qe=setInterval(k.fx.tick,k.fx.interval))},k.fx.stop=function(){clearInterval(Qe),Qe=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(r,e){return r=k.fx&&k.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=setTimeout(e,r);t.stop=function(){clearTimeout(n)}})},(Ye=C.createElement("div")).setAttribute("className","t"),Ye.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",tt=Ye.getElementsByTagName("a")[0],nt=(et=C.createElement("select")).appendChild(C.createElement("option")),Ge=Ye.getElementsByTagName("input")[0],tt.style.cssText="top:1px",y.getSetAttribute="t"!==Ye.className,y.style=/top/.test(tt.getAttribute("style")),y.hrefNormalized="/a"===tt.getAttribute("href"),y.checkOn=!!Ge.value,y.optSelected=nt.selected,y.enctype=!!C.createElement("form").enctype,et.disabled=!0,y.optDisabled=!nt.disabled,(Ge=C.createElement("input")).setAttribute("value",""),y.input=""===Ge.getAttribute("value"),Ge.value="t",Ge.setAttribute("type","radio"),y.radioValue="t"===Ge.value;var pt=/\r/g;k.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=k.isFunction(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,k(this).val()):n)?t="":"number"==typeof t?t+="":k.isArray(t)&&(t=k.map(t,function(e){return null==e?"":e+""})),(r=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&r.set(this,t,"value")!==undefined||(this.value=t))})):t?(r=k.valHooks[t.type]||k.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&(e=r.get(t,"value"))!==undefined?e:"string"==typeof(e=t.value)?e.replace(pt,""):null==e?"":e:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:k.trim(k.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,s=o?null:[],a=o?i+1:r.length,c=i<0?a:o?i:0;c<a;c++)if(((n=r[c]).selected||c===i)&&(y.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!k.nodeName(n.parentNode,"optgroup"))){if(t=k(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=k.makeArray(t),s=i.length;s--;)if(r=i[s],0<=k.inArray(k.valHooks.option.get(r),o))try{r.selected=n=!0}catch(a){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(e,t){if(k.isArray(t))return e.checked=0<=k.inArray(k(e).val(),t)}},y.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var dt,ht,mt=k.expr.attrHandle,gt=/^(?:checked|selected)$/i,yt=y.getSetAttribute,vt=y.input;k.fn.extend({attr:function(e,t){return z(this,k.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){k.removeAttr(this,e)})}}),k.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===L?k.prop(e,t,n):(1===o&&k.isXMLDoc(e)||(t=t.toLowerCase(),r=k.attrHooks[t]||(k.expr.match.bool.test(t)?ht:dt)),n===undefined?r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=k.find.attr(e,t))?undefined:i:null!==n?r&&"set"in r&&(i=r.set(e,n,t))!==undefined?i:(e.setAttribute(t,n+""),n):void k.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(A);if(o&&1===e.nodeType)for(;n=o[i++];)r=k.propFix[n]||n,k.expr.match.bool.test(n)?vt&&yt||!gt.test(n)?e[r]=!1:e[k.camelCase("default-"+n)]=e[r]=!1:k.attr(e,n,""),e.removeAttribute(yt?n:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&k.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),ht={set:function(e,t,n){return!1===t?k.removeAttr(e,n):vt&&yt||!gt.test(n)?e.setAttribute(!yt&&k.propFix[n]||n,n):e[k.camelCase("default-"+n)]=e[n]=!0,n}},k.each(k.expr.match.bool.source.match(/\w+/g),function(e,t){var o=mt[t]||k.find.attr;mt[t]=vt&&yt||!gt.test(t)?function(e,t,n){var r,i;return n||(i=mt[t],mt[t]=r,r=null!=o(e,t,n)?t.toLowerCase():null,mt[t]=i),r}:function(e,t,n){if(!n)return e[k.camelCase("default-"+t)]?t.toLowerCase():null}}),vt&&yt||(k.attrHooks.value={set:function(e,t,n){if(!k.nodeName(e,"input"))return dt&&dt.set(e,t,n);e.defaultValue=t}}),yt||(dt={set:function(e,t,n){var r=e.getAttributeNode(n);if(r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n))return t}},mt.id=mt.name=mt.coords=function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},k.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:dt.set},k.attrHooks.contenteditable={set:function(e,t,n){dt.set(e,""!==t&&t,n)}},k.each(["width","height"],function(e,n){k.attrHooks[n]={set:function(e,t){if(""===t)return e.setAttribute(n,"auto"),t}}})),y.style||(k.attrHooks.style={get:function(e){return e.style.cssText||undefined},set:function(e,t){return e.style.cssText=t+""}});var _t=/^(?:input|select|textarea|button|object)$/i,bt=/^(?:a|area)$/i;k.fn.extend({prop:function(e,t){return z(this,k.prop,e,t,1<arguments.length)},removeProp:function(e){return e=k.propFix[e]||e,this.each(function(){try{this[e]=undefined,delete this[e]}catch(t){}})}}),k.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!k.isXMLDoc(e))&&(t=k.propFix[t]||t,i=k.propHooks[t]),n!==undefined?i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):_t.test(e.nodeName)||bt.test(e.nodeName)&&e.href?0:-1}}}}),y.hrefNormalized||k.each(["href","src"],function(e,t){k.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),y.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),y.enctype||(k.propFix.enctype="encoding");var wt=/[\t\r\n\f]/g;k.fn.extend({addClass:function(t){var e,n,r,i,o,s,a=0,c=this.length,u="string"==typeof t&&t;if(k.isFunction(t))return this.each(function(e){k(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(A)||[];a<c;a++)if(r=1===(n=this[a]).nodeType&&(n.className?(" "+n.className+" ").replace(wt," "):" ")){for(o=0;i=e[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=k.trim(r),n.className!==s&&(n.className=s)}return this},removeClass:function(t){var e,n,r,i,o,s,a=0,c=this.length,u=0===arguments.length||"string"==typeof t&&t;if(k.isFunction(t))return this.each(function(e){k(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(A)||[];a<c;a++)if(r=1===(n=this[a]).nodeType&&(n.className?(" "+n.className+" ").replace(wt," "):"")){for(o=0;i=e[o++];)for(;0<=r.indexOf(" "+i+" ");)r=r.replace(" "+i+" "," ");s=t?k.trim(r):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(i,t){var o=typeof i;return"boolean"==typeof t&&"string"===o?t?this.addClass(i):this.removeClass(i):k.isFunction(i)?this.each(function(e){k(this).toggleClass(i.call(this,e,this.className,t),t)}):this.each(function(){if("string"===o)for(var e,t=0,n=k(this),r=i.match(A)||[];e=r[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else o!==L&&"boolean"!==o||(this.className&&k._data(this,"__className__",this.className),this.className=this.className||!1===i?"":k._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;n<r;n++)if(1===this[n].nodeType&&0<=(" "+this[n].className+" ").replace(wt," ").indexOf(t))return!0;return!1}}),k.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){k.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),k.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var xt=k.now(),kt=/\?/,Ct=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;k.parseJSON=function(e){if(h.JSON&&h.JSON.parse)return h.JSON.parse(e+"");var i,o=null,t=k.trim(e+"");return t&&!k.trim(t.replace(Ct,function(e,t,n,r){return i&&t&&(o=0),0===o?e:(i=n||t,o+=!r-!n,"")}))?Function("return "+t)():k.error("Invalid JSON: "+e)},k.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{h.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(n){t=undefined}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+e),t};var Tt,Et,St=/#.*$/,jt=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,At=/^(?:GET|HEAD)$/,Ft=/^\/\//,Pt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ot={},Rt={},Lt="*/".concat("*");try{Et=location.href}catch(nn){(Et=C.createElement("a")).href="",Et=Et.href}function It(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(A)||[];if(k.isFunction(t))for(;n=i[r++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Dt(t,i,o,s){var a={},c=t===Rt;function u(e){var r;return a[e]=!0,k.each(t[e]||[],function(e,t){var n=t(i,o,s);return"string"!=typeof n||c||a[n]?c?!(r=n):void 0:(i.dataTypes.unshift(n),u(n),!1)}),r}return u(i.dataTypes[0])||!a["*"]&&u("*")}function Bt(e,t){var n,r,i=k.ajaxSettings.flatOptions||{};for(r in t)t[r]!==undefined&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&k.extend(!0,e,n),e}Tt=Pt.exec(Et.toLowerCase())||[],k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Lt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":k.parseJSON,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Bt(Bt(e,k.ajaxSettings),t):Bt(k.ajaxSettings,e)},ajaxPrefilter:It(Ot),ajaxTransport:It(Rt),ajax:function(e,t){"object"==typeof e&&(t=e,e=undefined),t=t||{};var n,r,l,f,p,d,h,i,m=k.ajaxSetup({},t),g=m.context||m,y=m.context&&(g.nodeType||g.jquery)?k(g):k.event,v=k.Deferred(),_=k.Callbacks("once memory"),b=m.statusCode||{},o={},s={},w=0,a="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!i)for(i={};t=Nt.exec(f);)i[t[1].toLowerCase()]=t[2];t=i[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?f:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=s[n]=s[n]||e,o[e]=t),this},overrideMimeType:function(e){return w||(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)b[t]=[b[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||a;return h&&h.abort(t),c(0,t),this}};if(v.promise(x).complete=_.add,x.success=x.done,x.error=x.fail,m.url=((e||m.url||Et)+"").replace(St,"").replace(Ft,Tt[1]+"//"),m.type=t.method||t.type||m.method||m.type,m.dataTypes=k.trim(m.dataType||"*").toLowerCase().match(A)||[""],null==m.crossDomain&&(n=Pt.exec(m.url.toLowerCase()),m.crossDomain=!(!n||n[1]===Tt[1]&&n[2]===Tt[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Tt[3]||("http:"===Tt[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=k.param(m.data,m.traditional)),Dt(Ot,m,t,x),2===w)return x;for(r in(d=k.event&&m.global)&&0==k.active++&&k.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!At.test(m.type),l=m.url,m.hasContent||(m.data&&(l=m.url+=(kt.test(l)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=jt.test(l)?l.replace(jt,"$1_="+xt++):l+(kt.test(l)?"&":"?")+"_="+xt++)),m.ifModified&&(k.lastModified[l]&&x.setRequestHeader("If-Modified-Since",k.lastModified[l]),k.etag[l]&&x.setRequestHeader("If-None-Match",k.etag[l])),(m.data&&m.hasContent&&!1!==m.contentType||t.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Lt+"; q=0.01":""):m.accepts["*"]),m.headers)x.setRequestHeader(r,m.headers[r]);if(m.beforeSend&&(!1===m.beforeSend.call(g,x,m)||2===w))return x.abort();for(r in a="abort",{success:1,error:1,complete:1})x[r](m[r]);if(h=Dt(Rt,m,t,x)){x.readyState=1,d&&y.trigger("ajaxSend",[x,m]),m.async&&0<m.timeout&&(p=setTimeout(function(){x.abort("timeout")},m.timeout));try{w=1,h.send(o,c)}catch(nn){if(!(w<2))throw nn;c(-1,nn)}}else c(-1,"No Transport");function c(e,t,n,r){var i,o,s,a,c,u=t;2!==w&&(w=2,p&&clearTimeout(p),h=undefined,f=r||"",x.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(a=function(e,t,n){for(var r,i,o,s,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),i===undefined&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){c.unshift(s);break}if(c[0]in n)o=c[0];else{for(s in n){if(!c[0]||e.converters[s+" "+c[0]]){o=s;break}r||(r=s)}o=o||r}if(o)return o!==c[0]&&c.unshift(o),n[o]}(m,x,n)),a=function(e,t,n,r){var i,o,s,a,c,u={},l=e.dataTypes.slice();if(l[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=l.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(s=u[c+" "+o]||u["* "+o]))for(i in u)if((a=i.split(" "))[1]===o&&(s=u[c+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[i]:!0!==u[i]&&(o=a[0],l.unshift(a[1]));break}if(!0!==s)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(nn){return{state:"parsererror",error:s?nn:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}(m,a,x,i),i?(m.ifModified&&((c=x.getResponseHeader("Last-Modified"))&&(k.lastModified[l]=c),(c=x.getResponseHeader("etag"))&&(k.etag[l]=c)),204===e||"HEAD"===m.type?u="nocontent":304===e?u="notmodified":(u=a.state,o=a.data,i=!(s=a.error))):(s=u,!e&&u||(u="error",e<0&&(e=0))),x.status=e,x.statusText=(t||u)+"",i?v.resolveWith(g,[o,u,x]):v.rejectWith(g,[x,u,s]),x.statusCode(b),b=undefined,d&&y.trigger(i?"ajaxSuccess":"ajaxError",[x,m,i?o:s]),_.fireWith(g,[x,u]),d&&(y.trigger("ajaxComplete",[x,m]),--k.active||k.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,n){return k.get(e,t,n,"json")},getScript:function(e,t){return k.get(e,undefined,t,"script")}}),k.each(["get","post"],function(e,i){k[i]=function(e,t,n,r){return k.isFunction(t)&&(r=r||n,n=t,t=undefined),k.ajax({url:e,type:i,dataType:r,data:t,success:n})}}),k._evalUrl=function(e){return k.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},k.fn.extend({wrapAll:function(t){if(k.isFunction(t))return this.each(function(e){k(this).wrapAll(t.call(this,e))});if(this[0]){var e=k(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(n){return k.isFunction(n)?this.each(function(e){k(this).wrapInner(n.call(this,e))}):this.each(function(){var e=k(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=k.isFunction(t);return this.each(function(e){k(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){k.nodeName(this,"body")||k(this).replaceWith(this.childNodes)}).end()}}),k.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!y.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||k.css(e,"display"))},k.expr.filters.visible=function(e){return!k.expr.filters.hidden(e)};var qt=/%20/g,Mt=/\[\]$/,Ht=/\r?\n/g,Wt=/^(?:submit|button|image|reset|file)$/i,Ut=/^(?:input|select|textarea|keygen)/i;function $t(n,e,r,i){var t;if(k.isArray(e))k.each(e,function(e,t){r||Mt.test(n)?i(n,t):$t(n+"["+("object"==typeof t?e:"")+"]",t,r,i)});else if(r||"object"!==k.type(e))i(n,e);else for(t in e)$t(n+"["+t+"]",e[t],r,i)}k.param=function(e,t){var n,r=[],i=function(e,t){t=k.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===undefined&&(t=k.ajaxSettings&&k.ajaxSettings.traditional),k.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,function(){i(this.name,this.value)});else for(n in e)$t(n,e[n],t,i);return r.join("&").replace(qt,"+")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&Ut.test(this.nodeName)&&!Wt.test(e)&&(this.checked||!V.test(e))}).map(function(e,t){var n=k(this).val();return null==n?null:k.isArray(n)?k.map(n,function(e){return{name:t.name,value:e.replace(Ht,"\r\n")}}):{name:t.name,value:n.replace(Ht,"\r\n")}}).get()}}),k.ajaxSettings.xhr=h.ActiveXObject!==undefined?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Xt()||function(){try{return new h.ActiveXObject("Microsoft.XMLHTTP")}catch(nn){}}()}:Xt;var zt=0,Vt={},Kt=k.ajaxSettings.xhr();function Xt(){try{return new h.XMLHttpRequest}catch(nn){}}h.attachEvent&&h.attachEvent("onunload",function(){for(var e in Vt)Vt[e](undefined,!0)}),y.cors=!!Kt&&"withCredentials"in Kt,(Kt=y.ajax=!!Kt)&&k.ajaxTransport(function(c){var u;if(!c.crossDomain||y.cors)return{send:function(e,o){var t,s=c.xhr(),a=++zt;if(s.open(c.type,c.url,c.async,c.username,c.password),c.xhrFields)for(t in c.xhrFields)s[t]=c.xhrFields[t];for(t in c.mimeType&&s.overrideMimeType&&s.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)e[t]!==undefined&&s.setRequestHeader(t,e[t]+"");s.send(c.hasContent&&c.data||null),u=function(e,t){var n,r,i;if(u&&(t||4===s.readyState))if(delete Vt[a],u=undefined,s.onreadystatechange=k.noop,t)4!==s.readyState&&s.abort();else{i={},n=s.status,"string"==typeof s.responseText&&(i.text=s.responseText);try{r=s.statusText}catch(nn){r=""}n||!c.isLocal||c.crossDomain?1223===n&&(n=204):n=i.text?200:404}i&&o(n,r,i,s.getAllResponseHeaders())},c.async?4===s.readyState?setTimeout(u):s.onreadystatechange=Vt[a]=u:u()},abort:function(){u&&u(undefined,!0)}}}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),k.ajaxTransport("script",function(t){if(t.crossDomain){var r,i=C.head||k("head")[0]||C.documentElement;return{send:function(e,n){(r=C.createElement("script")).async=!0,t.scriptCharset&&(r.charset=t.scriptCharset),r.src=t.url,r.onload=r.onreadystatechange=function(e,t){(t||!r.readyState||/loaded|complete/.test(r.readyState))&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),r=null,t||n(200,"success"))},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(undefined,!0)}}}});var Zt=[],Jt=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Zt.pop()||k.expando+"_"+xt++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,s=!1!==e.jsonp&&(Jt.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=k.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Jt,"$1"+r):!1!==e.jsonp&&(e.url+=(kt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||k.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=h[r],h[r]=function(){o=arguments},n.always(function(){h[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Zt.push(r)),o&&k.isFunction(i)&&i(o[0]),o=i=undefined}),"script"}),k.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||C;var r=_.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=k.buildFragment([e],t,i),i&&i.length&&k(i).remove(),k.merge([],r.childNodes))};var Qt=k.fn.load;k.fn.load=function(e,t,n){if("string"!=typeof e&&Qt)return Qt.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return 0<=a&&(r=k.trim(e.slice(a,e.length)),e=e.slice(0,a)),k.isFunction(t)?(n=t,t=undefined):t&&"object"==typeof t&&(o="POST"),0<s.length&&k.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){i=arguments,s.html(r?k("<div>").append(k.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){s.each(n,i||[e.responseText,t,e])}),this},k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){k.fn[t]=function(e){return this.on(t,e)}}),k.expr.filters.animated=function(t){return k.grep(k.timers,function(e){return t===e.elem}).length};var Gt=h.document.documentElement;function Yt(e){return k.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}k.offset={setOffset:function(e,t,n){var r,i,o,s,a,c,u=k.css(e,"position"),l=k(e),f={};"static"===u&&(e.style.position="relative"),a=l.offset(),o=k.css(e,"top"),c=k.css(e,"left"),("absolute"===u||"fixed"===u)&&-1<k.inArray("auto",[o,c])?(s=(r=l.position()).top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(c)||0),k.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(f.top=t.top-a.top+s),null!=t.left&&(f.left=t.left-a.left+i),"using"in t?t.using.call(e,f):l.css(f)}},k.fn.extend({offset:function(t){if(arguments.length)return t===undefined?this:this.each(function(e){k.offset.setOffset(this,t,e)});var e,n,r={top:0,left:0},i=this[0],o=i&&i.ownerDocument;return o?(e=o.documentElement,k.contains(e,i)?(typeof i.getBoundingClientRect!==L&&(r=i.getBoundingClientRect()),n=Yt(o),{top:r.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:r.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):r):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===k.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),k.nodeName(e[0],"html")||(n=e.offset()),n.top+=k.css(e[0],"borderTopWidth",!0),n.left+=k.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-k.css(r,"marginTop",!0),left:t.left-n.left-k.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Gt;e&&!k.nodeName(e,"html")&&"static"===k.css(e,"position");)e=e.offsetParent;return e||Gt})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o=/Y/.test(i);k.fn[t]=function(e){return z(this,function(e,t,n){var r=Yt(e);if(n===undefined)return r?i in r?r[i]:r.document.documentElement[t]:e[t];r?r.scrollTo(o?k(r).scrollLeft():n,o?n:k(r).scrollTop()):e[t]=n},t,e,arguments.length,null)}}),k.each(["top","left"],function(e,n){k.cssHooks[n]=Le(y.pixelPosition,function(e,t){if(t)return t=Fe(e,n),Oe.test(t)?k(e).position()[n]+"px":t})}),k.each({Height:"height",Width:"width"},function(o,s){k.each({padding:"inner"+o,content:s,"":"outer"+o},function(r,e){k.fn[e]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return z(this,function(e,t,n){var r;return k.isWindow(e)?e.document.documentElement["client"+o]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+o],r["scroll"+o],e.body["offset"+o],r["offset"+o],r["client"+o])):n===undefined?k.css(e,t,i):k.style(e,t,n,i)},s,n?e:undefined,n,null)}})}),k.fn.size=function(){return this.length},k.fn.andSelf=k.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return k});var en=h.jQuery,tn=h.$;return k.noConflict=function(e){return h.$===k&&(h.$=tn),e&&h.jQuery===k&&(h.jQuery=en),k},typeof t===L&&(h.jQuery=h.$=k),k}),function(){"use strict";var l,f={name:"doT",version:"1.1.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:undefined,compile:undefined,log:!0,encodeHTMLSource:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}}};l=function(){return this||(0,eval)("this")}(),"undefined"!=typeof module&&module.exports?module.exports=f:"function"==typeof define&&define.amd?define(function(){return f}):l.doT=f;var p={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},d=/$^/;function h(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}f.template=function(e,t,n){var i,o,s=(t=t||f.templateSettings).append?p.append:p.split,a=0,c=t.use||t.define?function r(i,e,o){return("string"==typeof e?e:e.toString()).replace(i.define||d,function(e,r,t,n){return 0===r.indexOf("def.")&&(r=r.substring(4)),r in o||(":"===t?(i.defineParams&&n.replace(i.defineParams,function(e,t,n){o[r]={arg:t,text:n}}),r in o||(o[r]=n)):new Function("def","def['"+r+"']="+n)(o)),""}).replace(i.use||d,function(e,t){i.useParams&&(t=t.replace(i.useParams,function(e,t,n,r){if(o[n]&&o[n].arg&&r){var i=(n+":"+r).replace(/'|\\/g,"_");return o.__exp=o.__exp||{},o.__exp[i]=o[n].text.replace(new RegExp("(^|[^\\w$])"+o[n].arg+"([^\\w$])","g"),"$1"+r+"$2"),t+"def.__exp['"+i+"']"}}));var n=new Function("def","return "+t)(o);return n?r(i,n,o):n})}(t,e,n||{}):e;c=("var out='"+(t.strip?c.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):c).replace(/'|\\/g,"\\$&").replace(t.interpolate||d,function(e,t){return s.start+h(t)+s.end}).replace(t.encode||d,function(e,t){return i=!0,s.startencode+h(t)+s.end}).replace(t.conditional||d,function(e,t,n){return t?n?"';}else if("+h(n)+"){out+='":"';}else{out+='":n?"';if("+h(n)+"){out+='":"';}out+='"}).replace(t.iterate||d,function(e,t,n,r){return t?(a+=1,o=r||"i"+a,t=h(t),"';var arr"+a+"="+t+";if(arr"+a+"){var "+n+","+o+"=-1,l"+a+"=arr"+a+".length-1;while("+o+"<l"+a+"){"+n+"=arr"+a+"["+o+"+=1];out+='"):"';} } out+='"}).replace(t.evaluate||d,function(e,t){return"';"+h(t)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),i&&(t.selfcontained||!l||l._encodeHTML||(l._encodeHTML=f.encodeHTMLSource(t.doNotSkipEncoded)),c="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+f.encodeHTMLSource.toString()+"("+(t.doNotSkipEncoded||"")+"));"+c);try{return new Function(t.varname,c)}catch(u){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+c),u}},f.compile=function(e,t){return f.template(e,null,t)}}(),window.loginWin=function(e,t,n){var r=document.createElement("div"),i=document.createElement("div"),o=document.getElementsByTagName("BODY")[0];document.getElementsByTagName("HTML")[0],r.id="loginWinMask",i.id="loginWin",r.style.cssText="position: fixed;top: 0px;left: 0px;z-index: 100000000;width: 100%;height: 100%;background-color: #000;filter: alpha(opacity=50); opacity: .5;",i.style.cssText="position: fixed;top: 50%;left: 50%;z-index: 100000001;width: 400px;height: 472px;margin-top: -236px;margin-left: -200px;font-family: 'microsoft yahei';";var s=location.href;n?"#"==s.charAt(s.length-1)?"login"==t?src=e+"Pc/Login/iframe?returnUrl="+s+"hashAction-"+n:"register"==t&&(src=e+"Pc/Login/iframe#tab-2?returnUrl="+s+"hashAction-"+n):"login"==t?src=e+"Pc/Login/iframe?returnUrl="+s+"#hashAction-"+n:"register"==t&&(src=e+"Pc/Login/iframe#tab-2?returnUrl="+s+"#hashAction-"+n):(s.charAt(s.length-1),"login"==t?src=e+"Pc/Login/iframe?returnUrl="+s:"register"==t&&(src=e+"Pc/Login/iframe#tab-2?returnUrl="+s)),tipViewHtml="<div class='closeBtn' style='position: absolute;z-index: 1;right: -6px;top: 10px;width: 34px;height: 35px;'><a id='loginWinCloseBtn' href='javascript:;' style='display:none;cursor: pointer;width: 18px;height: 18px;background: url("+e+"/pc/images/login/login_ico.png) no-repeat 0 -418px;' title='关闭'></a></div><iframe src='"+src+"' width='400px' height='472px' frameborder='0' scrolling='no' id='iframe_login'  allowtransparency='true'></iframe>",i.innerHTML=tipViewHtml,o.appendChild(r),o.appendChild(i);var a=document.getElementById("loginWinCloseBtn");a.onclick=function(){u(r),u(i)},a.onmouseover=function(){a.style.backgroundPosition="0 -197px"},a.onmouseout=function(){a.style.backgroundPosition="0 -418px"};var c=document.getElementById("iframe_login");function u(e){var t=e.parentNode;t&&t.removeChild(e)}c.attachEvent?c.attachEvent("onload",function(){a.style.display="block"}):c.onload=function(){a.style.display="block"}},$(function(){var e,t=window.location.search.substr(1).split("&"),n={};for(e=0;e<t.length;e++)aParamArr=t[e].split("="),aParamArr[0].length&&(n[aParamArr[0]]=decodeURI(aParamArr[1]));n.jsAction&&"function"==typeof window[n.jsAction]&&window[n.jsAction]()}),window.lodingTip=function(e){e=e||"";var t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("i"),i=document.createElement("img"),o=document.createElement("br"),s=document.getElementsByTagName("BODY")[0];return"close"==e&&(removeElement(t),removeElement(n),removeElement(r)),t.style.cssText="position: fixed;top:50%;left: 50%;width: 235px;height: 118px;line-height:54px;margin-top: -59px;margin-left: -117px;z-index: 100000;border-radius: 6px;text-align: center;font-size: 16px;color: #fff;background:url("+loginSite+"/pc/images/login/successbg.png) no-repeat 0 0;",n.style.cssText="position:fixed;left:0;top:0;z-index:10000;width:100%;height:100%;",r.style.cssText=" position:relative;top:-3px;margin-left: 4px;font-style:normal;",i.style.cssText="position:relative;top:26px;width:26px;height:26px;",i.src=loginSite+"/pc/images/login/loading1.gif",r.innerHTML=e,t.appendChild(i),t.appendChild(o),t.appendChild(r),t.appendChild(n),s.appendChild(t),t},(window.KFZ||(window.KFZ={}))&&(window.KFZ.tools||(window.KFZ.tools={})),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1}),window.KFZ.tools.onErrorReplace=function(e,t,n){window.KFZ.tools.parseURL(t.src).path==e&&(t.onerror=null,n&&n.off("error")),t.src=e},window.KFZ.tools.loadImage=function(e,t){var n=new Image;n.onload=function(){n.onload=null,t&&t(n)},n.src=e},window.KFZ.tools.cookies=function(e,t,n){if(void 0===t){var r=null;if(document.cookie&&""!=document.cookie){var i=document.cookie.indexOf(e+"=");if(-1!=i){i=i+e.length+1;var o=document.cookie.indexOf(";",i);-1==o&&(o=document.cookie.length),r=decodeURIComponent(document.cookie.substring(i,o))}}return r}n||(n={}),null===t&&(t="",n.expires=-1);var s,a="";n.expires&&("number"==typeof n.expires||n.expires.toUTCString)&&("number"==typeof n.expires?(s=new Date).setTime(s.getTime()+24*n.expires*60*60*1e3):s=n.expires,a="; expires="+s.toUTCString());var c=n.path?"; path="+n.path:"",u=n.domain?"; domain="+n.domain:"",l=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),a,c,u,l].join("")},window.KFZ.tools.parseURL=function(e){e=e||location.href;var o=document.createElement("a");return{source:o.href=e,protocol:o.protocol.replace(":",""),host:o.hostname,port:o.port,query:o.search,hash:o.hash.replace("#",""),path:o.pathname.replace(/^([^\/])/,"/$1"),file:(o.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],relative:(o.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:o.pathname.replace(/^\//,"").split("/"),params:function(){for(var e,t={},n=o.search.replace(/^\?/,"").split("&"),r=n.length,i=0;i<r;i++)n[i]&&(t[(e=n[i].split("="))[0]]=e[1]);return t}()}},window.KFZ.tools.browserInfo=function(){var e=navigator.userAgent,t=-1<e.indexOf("Opera"),n=-1<e.indexOf("compatible")&&-1<e.indexOf("MSIE")&&!t,r=-1<e.indexOf("Windows NT 6.1; Trident/7.0;")&&!n,i=-1<e.indexOf("Firefox"),o=-1<e.indexOf("Safari")&&-1==e.indexOf("Chrome"),s=-1<e.indexOf("Chrome")&&-1<e.indexOf("Safari");if(n){new RegExp("MSIE (\\d+\\.\\d+);").test(e);var a=parseFloat(RegExp.$1);return 7==a?"IE7":8==a?"IE8":9==a?"IE9":10==a?"IE10":11==a?"IE11":"0"}return i?"FF":t?"Opera":o?"Safari":s?"Chrome":r?"Edge":void 0},window.KFZ.tools.contactManager={debug:!1,events:{},eventsWatch:{},on:function(e,t,n){var r=n||{};return this.events[e]=this.events[e]||[],this.events[e].push({description:r.description,from:r.from,once:r.once,run:"function"==typeof t?t:function(){}}),this.events[e].length},watch:function(e,t,n){for(var r=n||{},i=e.length,o={};i--;)this.events[e[i]]||this.on(e[i]),this.eventsWatch[e[i]]=this.eventsWatch[e[i]]||[],this.eventsWatch[e[i]].push({description:r.description,from:r.from,run:"function"==typeof t?t:function(){}}),o[e[i]]=this.eventsWatch[e[i]].length;return o},off:function(e,t,n){return e?"watch"==t?0<=n?this.eventsWatch[e]&&this.eventsWatch[e][n]&&(this.eventsWatch[e][n]=null):this.eventsWatch[e]&&delete this.eventsWatch[e]:"on"==t&&0<=n?this.events[e]&&this.events[e][n]&&(this.events[e][n]=null):this.events[e]&&delete this.events[e]:this.events={},this},run:function(e,t){var n=t||{};if(this.events[e])for(var r=this.events[e],i=r.length;i--;){this.eventRun(r[i],n.param);var o={eventName:e,onFrom:r[i].from,onDescription:r[i].description,runFrom:n.from,runDescription:n.description,runParam:n.param};this.console(o)}if(this.eventsWatch[e])for(var s=this.eventsWatch[e],a=s.length;a--;)this.eventRun(s[a],n.param);return this},eventRun:function(e,t){setTimeout(function(){e.run(t)},0)},console:function(e){this.debug&&window.console&&(window.console.group(e.eventName),window.console.log("注册来源：",e.onFrom?e.onFrom:"未知来源"),window.console.log("事件描述：",e.onDescription?e.onDescription:"未知描述"),window.console.log("触发来源：",e.runFrom?e.runFrom:"未知来源"),window.console.log("触发条件：",e.runDescription?e.runDescription:"未知条件"),window.console.log("触发时间：",(new Date).toLocaleString()),window.console.log("传递的参数：",e.runParam),window.console.groupEnd())}},window.KFZ.tools.receiverName=function(e){return e.replace(new RegExp(["\ud83c[\udf00-\udfff]","\ud83d[\udc00-\ude4f]","\ud83d[\ude80-\udeff]"].join("|"),"g"),"?")},function(e,t){var o,n;e.widgets||(e.widgets={}),e.widgets["nav/page"]=((n={base:"/",userInfo:{},delCartInfo:{},delCartDom:"",cartNum:"",cartTime:0,tpl:{areaTpl:(o=e.jQuery)("#area-tpl").html(),nickNameTpl:o("#nick-name-tpl").html(),loginTpl:o("#login-tpl").html(),noLoginTpl:o("#no-login-tpl").html(),sellerCenterTpl:o("#seller-center-tpl").html(),cartListTpl:o("#cart-list-tpl").html(),cartNoneTpl:o("#cart-none-tpl").html(),noLoginCartNoneTpl:o("#no-login-cart-none-tpl").html(),qrCodeTpl:o("#qr-code-tpl").html(),navLoadTpl:o("#nav-load-tpl").html()},dom:{navHeader:o("#navHeader"),areaText:o("#areaText"),areaWin:o("#areaWin"),msgNum:o("#msgNum"),nickName:o("#nickName"),loginWin:o("#loginWin"),sellerWin:o("#sellerWin"),cartListWin:o("#cartListWin"),cartLink:o("#cartLink"),cartNum:o("#cartNum"),unReadNum:o("#unReadNum"),codeWim:o("#codeWim")},area:"1000000000",areaInfo:{1000000000:"北京",2000000000:"上海",3000000000:"天津",4000000000:"重庆",5000000000:"安徽",6000000000:"福建",7000000000:"甘肃",8000000000:"广东",9000000000:"广西",10000000000:"贵州",11000000000:"海南",12000000000:"河北",13000000000:"河南",14000000000:"黑龙江",15000000000:"湖北",16000000000:"湖南",17000000000:"吉林",18000000000:"江苏",19000000000:"江西",20000000000:"辽宁",21000000000:"内蒙古",22000000000:"宁夏",23000000000:"青海",24000000000:"山东",25000000000:"山西",26000000000:"陕西",27000000000:"四川",28000000000:"西藏",29000000000:"新疆",30000000000:"云南",31000000000:"浙江",32000000000:"澳门",33000000000:"台湾",34000000000:"香港",40000000000:"海外"},getUserInfo:function(t){var n=this;o.ajax({url:KFZ.site.user+"Newpc/getUserInfo",type:"GET",dataType:"jsonp",cache:!1,timeout:3e3,success:function(e){e.status&&(e.data.isLogin?(window.KFZ.userInfo=n.userInfo=e.data,n.userInfoLoadedNotice(e.data,"用户信息加载完成 init"),n.statusInit(),n.areaInit(),n.imNoticeConnectNotice("进行消息连接")):(n.areaInit(),t&&"function"==typeof window.loginWin&&window.loginWin(KFZ.site.login,"login")))},error:function(){n.areaInit(),t&&"function"==typeof window.loginWin&&window.loginWin(KFZ.site.login,"login")}})},init:function(){var e=this;window.KFZ.userInfo||(window.KFZ.userInfo={}),this.initNav(),setTimeout(function(){e.loadRender(),e.codeRender(),e.getUserInfo(),e.getCartList(!0)})},initNav:function(){this.contactManagerConf(),this.statusInit(),this.navFocusWatch(),this.cartListInit(),this.loginInit()},contactManagerConf:function(){var t=this;window.KFZ.tools.contactManager.on("msgNotice",function(e){t.UnreadNumRender(e)},{from:"公共头部",description:"未读消息数量发生变化 -> 同步头部消息数量 contactManagerConf"}),window.KFZ.tools.contactManager.on("areaNotice",function(e){(e=e||window.KFZ.tools.cookies("reciever_area"))&&9<e.length&&(e=e.slice(0,e.length-9)+"000000000",t.userInfo.area=e,t.updateArea(e))},{from:"公共头部",description:"监听用户所在地变化通知 -> 同步用户所在地信息 contactManagerConf"}),window.KFZ.tools.contactManager.on("cartNotice",function(){t.getCartList()},{from:"公共头部",description:"监听购物车数量变化通知 -> 同步购物车数量 contactManagerConf"})},loadRender:function(){var e=doT.template(this.tpl.navLoadTpl);this.dom.cartListWin.find(".load-box").html(e({base:this.base}))},codeRender:function(){var e=doT.template(this.tpl.qrCodeTpl);this.dom.codeWim.html(e({base:this.base}))},statusInit:function(){this.userInfo.isLogin?(this.nickNameRender(),this.loginWinRender()):this.noLoginWinRender(),this.sellerWinRender()},UnreadNumRender:function(e){"normal"==(0<e?"":"normal")?(this.dom.msgNum.removeClass("msg-un-read").addClass("msg-normal"),this.dom.unReadNum.html("")):(this.dom.msgNum.removeClass("msg-normal").addClass("msg-un-read"),99<e?this.dom.unReadNum.html("99+"):this.dom.unReadNum.html(e))},getCartList:function(t){var n=this;o.ajax({url:KFZ.site.cart+"jsonp/listcart",type:"GET",dataType:"jsonp",data:{limit:5},success:function(e){e.status&&e.result.data&&(t||n.userInfo.isLogin||n.getUserInfo(),n.cartListRender(e.result))}})},cartListRender:function(e){var t=this,n="",r=e.data,i=e.page.recordCount;this.cartNum=1*i,0==e.data.length?(this.dom.cartNum.html(""),t.updateCartNumNotice(0),n=this.userInfo.isLogin?doT.template(this.tpl.cartNoneTpl)():doT.template(this.tpl.noLoginCartNoneTpl)()):(this.dom.cartNum.html(e.page.recordCount),t.updateCartNumNotice(e.page.recordCount),n=doT.template(this.tpl.cartListTpl)({cartList:r,cartNum:i,base:this.base})),this.dom.cartListWin.html(n),this.dom.cartListWin.find("img").on("error",function(){window.KFZ.tools.onErrorReplace(t.base+"static/kfz-navHeader/error.jpg",this,o(this))})},nickNameRender:function(){var e=doT.template(this.tpl.nickNameTpl);this.dom.nickName.html(e({nickName:this.userInfo.nickname}))},currentUrl:function(){var e=window.location.hash.substr(1).replace(/\?.*/g,""),t=window.location.href.replace(/#[\w-\/]*/gi,"").replace(/\?returnUrl=.*$/,"");return"?returnUrl="+encodeURIComponent(t+(e?(/\?/.test(t)?"&":"?")+"hash="+e:""))},loginWinRender:function(){var t=this,e=doT.template(this.tpl.loginTpl);this.dom.loginWin.html(e()),window.KFZ.userInfo.photo&&window.KFZ.tools.loadImage(window.KFZ.userInfo.photo,function(e){t.dom.loginWin.find(".pic-img").attr("src",window.KFZ.userInfo.photo).removeClass("hide"),t.dom.loginWin.find(".pic-ico").hide()}),this.dom.loginWin.find(".logout-btn").click(function(){location.href=window.KFZ.site.login+"logout/"+t.currentUrl()})},sellerWinRender:function(){var e=doT.template(this.tpl.sellerCenterTpl);this.dom.sellerWin.html(e({userType:this.userInfo.userType||[]}))},noLoginWinRender:function(){var t=this,e=doT.template(this.tpl.noLoginTpl);this.dom.loginWin.html(e()),this.dom.loginWin.find(".icon-btn").click(function(){var e="";switch(o(this).attr("type")){case"weixin":e="Pc/Openweixin/loginOAuth2";break;case"qq":e="/Pc/Openqq/loginOAuth2";break;case"weibo":e="Pc/Openweibo/loginOAuth2"}location.href=window.KFZ.site.login+e+t.currentUrl()})},areaInit:function(){var r=this,e=this.userInfo.area||window.KFZ.tools.cookies("reciever_area");e||(e="1000000000");var t=e.slice(0,e.length-9)+"000000000";this.areaInfo[t]||(t=e="1000000000"),this.setArea({area:t}),this.userInfo.area=t,this.dom.areaText.html("送至 "+this.areaInfo[t]),this.areaRender(),this.dom.areaWin.find(".text").click(function(e){e.stopPropagation();var t=o(this),n=t.attr("code");r.updateArea(n,t)&&r.setArea({area:n})})},areaRender:function(){var e=doT.template(this.tpl.areaTpl);this.dom.areaWin.html(e({areaList:this.areaInfo,active:this.userInfo.area||""}))},updateArea:function(e,t){e=e;var n=this.areaInfo[e],r=t||this.dom.areaWin.find(".text[code="+e+"]");return!r.parent().hasClass("active")&&(r.parent().addClass("active").siblings(".active").removeClass("active").parents(".item-info").removeClass("info-focus-active"),this.dom.areaText.html("送至 "+n),this.userInfo.area=e,this.userInfo.areaName=n,!0)},setArea:function(t){var n=this;this.area=window.KFZ.tools.cookies("reciever_area"),o.ajax({url:KFZ.site.user+"Newpc/setUserArea",type:"GET",dataType:"jsonp",data:t,success:function(e){e.status&&n.updateAreaNotice(t.area,"选择用户所在地 areaInit")}})},isPc:function(){return/phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone/i.test(navigator.userAgent)?"WEB":"PC"},navFocusWatch:function(){var t=this;"PC"===this.isPc()?this.dom.navHeader.find(".item-info").mouseenter(function(){var e=o(this);e.attr("name"),e.addClass("info-focus-active")}).mouseleave(function(){o(this).removeClass("info-focus-active"),t.dom.cartListWin.find(".revoke-btn").hide(),t.delCartDom&&t.delCartDom.remove()}):(this.dom.navHeader.find(".item-info").mouseenter(function(){var e=o(this);e.attr("name"),e.addClass("info-focus-active")}).mouseleave(function(){o(this).removeClass("info-focus-active"),t.dom.cartListWin.find(".revoke-btn").hide(),t.delCartDom&&t.delCartDom.remove()}),this.dom.navHeader.find(".dest").click(function(){var e=o(this);e.attr("name"),e.addClass("info-focus-active")})),this.dom.cartLink.mouseenter(function(){var e=(new Date).getTime();1e3<e-t.cartTime&&(t.cartTime=e,t.getCartList())})},cartListInit:function(){var i=this;this.dom.cartListWin.delegate(".del-btn","click",function(){var e=o(this).parents(".item"),t=e.attr("shopid"),n=e.attr("itemid"),r={carts:[{cartId:e.attr("cartid"),itemId:n}]};i.delCartInfo={shopId:t,itemId:n,num:1},i.delCartItem(r,e)}).delegate(".revoke-btn","click",function(){i.addCartItem(),o(this).hide()}).delegate(".login-btn","click",function(){i.getUserInfo(!0)})},delCartItem:function(t,n){var r=this;o.ajax({url:KFZ.site.cart+"jsonp/delCartItem",type:"GET",dataType:"jsonp",data:t,success:function(e){e.status?(n.hide(),r.cartNum-=1,r.dom.cartNum.html(r.cartNum),r.updateCartNumNotice(r.cartNum),r.delCartDom=n,r.dom.cartListWin.find(".revoke-btn").show(),r.delCartNotice(t,"删除购物车操作成功后 delCartItem")):console.log("删除失败，请重试！")}})},addCartItem:function(){var t=this;o.ajax({url:KFZ.site.cart+"jsonp/add/",type:"GET",dataType:"jsonp",data:t.delCartInfo,success:function(e){e.status?(t.dom.cartListWin.find(".item-list").prepend(t.delCartDom),t.delCartDom.show(),t.cartNum+=1,t.dom.cartNum.html(t.cartNum),t.updateCartNumNotice(t.cartNum),t.revokeCartNotice("加入购物车成功后 addCartItem")):console.log("撤销失败，请重新添加该商品！")}})},loginInit:function(){var e=this;this.dom.loginWin.delegate(".login-btn","click",function(){e.getUserInfo(!0)}).delegate(".register-btn","click",function(){"function"==typeof window.loginWin&&window.loginWin(KFZ.site.login,"register")})},delCartNotice:function(e,t){window.KFZ.tools.contactManager.run("delCart",{param:e,from:"公共头部",description:t||"未知描述"})},revokeCartNotice:function(e){window.KFZ.tools.contactManager.run("revokeCart",{from:"公共头部",description:e||"未知描述"})},updateCartNumNotice:function(e,t){window.KFZ.tools.contactManager.run("cartNumNotice",{param:e,from:"公共头部",description:t||"未知描述"})},updateAreaNotice:function(e,t){this.areaFlag&&this.area==window.KFZ.tools.cookies("reciever_area")||(this.areaFlag=!0,window.KFZ.tools.contactManager.run("updateArea",{param:e,from:"公共头部",description:t||"未知描述"}))},userInfoLoadedNotice:function(e,t){window.KFZ.tools.contactManager.run("userInfoLoaded",{param:e,from:"公共头部",description:t||"未知描述"})},imNoticeConnectNotice:function(e){window.KFZ.tools.contactManager.run("imNoticeConnect",{from:"公共头部",description:e||"未知描述"})}}).init(),n)}("undefined"!=typeof window?window:this),function(t,n){var r="searchAd/main/searchAd";t.widgets||(t.widgets={}),"function"==typeof define&&define.amd?define("widgets/"+r,["libs/kfz-jquery/src/jQuery"],function(e){return t.widgets[r]=n(e)}):t.widgets[r]=n(t.jQuery)}(this,function(e){({init:function(){this.imgError()},imgError:function(){e("#searchAd img").on("error",function(){KFZ.tools.onErrorReplace("/searchfront/img/error.jpg",this)})}}).init()}),function(e,t){e.widgets||(e.widgets={}),e.widgets.ie8Version=function(e){var t=navigator.userAgent,n=-1!=t.indexOf("Windows NT 5")&&-1!=t.indexOf("MSIE")&&-1==t.indexOf("Opera"),r=-1!=t.indexOf("MSIE 6.0")||-1!=t.indexOf("MSIE 7.0"),i=-1!=t.indexOf("MSIE 8.0");if(n&&r||r){var o=e('<div style="position:fixed;left:50%;top:50%;width:680px;height:400px;margin-left:-340px;margin-top:-200px;border-radius: 4px;background:#fff;overflow:hidden;z-index:100000001;"><div style="width:100%;height:70px;text-align:center;line-height:70px;font-size:22px;background:#EDF6FF;">浏览器升级提示</div><div style="width:592px;height:216px;border-bottom:1px solid #E5E5E5;margin:0 auto;overflow:hidden;"><div style="float:left;width:400px;height:68px;margin-top:70px;font-size:16px;color: #262626;line-height: 14px;"><p style="margin: 14px 0;">您的浏览器版本过低</p><p style="margin: 14px 0;">为避免购物时可能存在的安全风险，建议您升级浏览器。</p></div><div style="float:right;width:120px;font-size:0;margin-top:41px;text-align:center;"><img src="/searchfront/static/kfz-ie8Verson-search/kfzapp.png" width="120" alt=""><span style="font-size:12px;color:#999999;line-height:34px;">下载孔夫子旧书网App</span></div></div><div style="width:592px;margin:0 auto;"><div style="font-size:12px;color:#999999;margin-top:10px;">或者您还可以下载：</div><div style="width:100%;margin-top:6px;line-height: 0px;text-align:center;"><div style="float:left;width:50px;text-decoration:none;line-height:0px;text-align:center;margin-right: 27px;"><a target="_blank" href="https://pc.qq.com/detail/18/detail_21258.html" ><div><img width="40" src="/searchfront/static/kfz-ie8Verson-search/google.png" alt=""></div><span style="font-size:12px;color:#999999;line-height:20px;">Chrome</span></a></div><div style="float:left;width:50px;text-decoration:none;line-height:0px;text-align:center;margin-right: 27px;"><a target="_blank" href="https://ie.sogou.com/"><div><img width="40" src="/searchfront/static/kfz-ie8Verson-search/sougou.png" alt=""></div><span style="font-size:12px;color:#999999;line-height:20px;">搜狗</span></a></div><div style="float:left;width:50px;text-decoration:none;line-height:0px;text-align:center;margin-right: 27px;"><a target="_blank" href="https://browser.qq.com/?adtag=SEM1"><div><img width="40" src="/searchfront/static/kfz-ie8Verson-search/qq.png" alt=""></div><span style="font-size:12px;color:#999999;line-height:20px;">QQ</span></a></div><div style="float:left;width:50px;text-decoration:none;line-height:0px;text-align:center;margin-right: 27px;"><a target="_blank" href="https://browser.360.cn/se/"><div><img width="40" src="/searchfront/static/kfz-ie8Verson-search/360.png" alt=""></div><span style="font-size:12px;color:#999999;line-height:20px;">360</span></a></div><div style="float:left;width:50px;text-decoration:none;line-height:0px;text-align:center;margin-right: 27px;"><a target="_blank" href="https://www.liebao.cn/"><div><img width="40" src="/searchfront/static/kfz-ie8Verson-search/liebao.png" alt=""></div><span style="font-size:12px;color:#999999;line-height:20px;">猎豹</span></a></div><div style="float:left;width:50px;text-decoration:none;line-height:0px;text-align:center;margin-right: 27px;"><a target="_blank" href="http://www.firefox.com.cn/"><div><img width="40" src="/searchfront/static/kfz-ie8Verson-search/firefox.png" alt=""></div><span style="font-size:12px;color:#999999;line-height:20px;">Firefox</span></a></div><div style="float:left;width:50px;text-decoration:none;line-height:0px;text-align:center;margin-right: 27px;"><a target="_blank" href="http://www.maxthon.cn/hd/fastbrowser1/?t=hp3"><div><img width="40" src="/searchfront/static/kfz-ie8Verson-search/aoyou.png" alt=""></div><span style="font-size:12px;color:#999999;line-height:20px;">遨游</span></a></div><div style="float:left;width:50px;text-decoration:none;line-height:0px;text-align:center;"><a target="_blank" href="https://liulanqi.baidu.com/"><div><img width="40" src="/searchfront/static/kfz-ie8Verson-search/baidu.png" alt=""></div><span style="font-size:12px;color:#999999;line-height:20px;">百度</span></a></div></div></div></div>'),s=e('<div style="position: fixed;top: 0px;left: 0px;z-index: 100000000;width: 100%;height: 100%;background-color: #000;filter: alpha(opacity=50); opacity: .5;"></div>');(c=e("body")).prepend(s),c.prepend(o)}if(i){var a=e('<div style="width:100%;height:36px;line-height:36px;background:#ffffe1;font-size:12px;color: #333;"></div>'),c=e("body");a.html("<span style='padding-left: 50px;'>您正在使用的浏览器版本过低，可能导致页面无法正常显示，为提升您的购物体验，建议您升级或更换浏览器</span><span id='viewTopCloseTip' style='float: right;width: 20px;height: 20px;line-height:20px;margin-right: 50px;margin-top: 8px;cursor:pointer;'><img src='/searchfront/static/kfz-ie8Verson-search/1.png' width='14px' height='14px'></span>"),c.prepend(a),e("#viewTopCloseTip").click(function(){a.remove()})}}(e.jQuery)}("undefined"!=typeof window?window:this),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.NProgress=t()}(this,function(){var t,n,l={version:"0.2.0"},f=l.settings={minimum:.08,easing:"linear",positionUsing:"",speed:200,trickle:!0,trickleSpeed:200,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function r(e,t,n){return e<t?t:n<e?n:e}function p(e){return 100*(-1+e)}l.configure=function(e){var t,n;for(t in e)(n=e[t])!==undefined&&e.hasOwnProperty(t)&&(f[t]=n);return this},l.status=null,l.set=function(o){var e=l.isStarted();o=r(o,f.minimum,1),l.status=1===o?null:o;var s=l.render(!e),a=s.querySelector(f.barSelector),c=f.speed,u=f.easing;return s.offsetWidth,i(function(e){var t,n,r,i;""===f.positionUsing&&(f.positionUsing=l.getPositioningCSS()),d(a,(t=o,n=c,r=u,(i="translate3d"===f.positionUsing?{transform:"translate3d("+p(t)+"%,0,0)"}:"translate"===f.positionUsing?{transform:"translate("+p(t)+"%,0)"}:{"margin-left":p(t)+"%"}).transition="all "+n+"ms "+r,i)),1===o?(d(s,{transition:"none",opacity:1}),s.offsetWidth,setTimeout(function(){d(s,{transition:"all "+c+"ms linear",opacity:0}),setTimeout(function(){l.remove(),e()},c)},c)):setTimeout(e,c)}),this},l.isStarted=function(){return"number"==typeof l.status},l.start=function(){l.status||l.set(0);var e=function(){setTimeout(function(){l.status&&(l.trickle(),e())},f.trickleSpeed)};return f.trickle&&e(),this},l.done=function(e){return e||l.status?l.inc(.3+.5*Math.random()).set(1):this},l.inc=function(e){var t=l.status;return t?1<t?void 0:("number"!=typeof e&&(e=0<=t&&t<.2?.1:.2<=t&&t<.5?.04:.5<=t&&t<.8?.02:.8<=t&&t<.99?.005:0),t=r(t+e,0,.994),l.set(t)):l.start()},l.trickle=function(){return l.inc()},n=t=0,l.promise=function(e){return e&&"resolved"!==e.state()&&(0===n&&l.start(),t++,n++,e.always(function(){0==--n?(t=0,l.done()):l.set((t-n)/t)})),this},l.render=function(e){if(l.isRendered())return document.getElementById("nprogress");s(document.documentElement,"nprogress-busy");var t=document.createElement("div");t.id="nprogress",t.innerHTML=f.template;var n,r=t.querySelector(f.barSelector),i=e?"-100":p(l.status||0),o=document.querySelector(f.parent);return d(r,{transition:"all 0 linear",transform:"translate3d("+i+"%,0,0)"}),f.showSpinner||(n=t.querySelector(f.spinnerSelector))&&u(n),o!=document.body&&s(o,"nprogress-custom-parent"),o.appendChild(t),t},l.remove=function(){a(document.documentElement,"nprogress-busy"),a(document.querySelector(f.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&u(e)},l.isRendered=function(){return!!document.getElementById("nprogress")},l.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var i=function(){var t=[];function n(){var e=t.shift();e&&e(n)}return function(e){t.push(e),1==t.length&&n()}}(),d=function(){var o=["Webkit","O","Moz","ms"],i={};function s(e,t,n){var r;r=(r=t).replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()}),t=i[r]||(i[r]=function(e){var t=document.body.style;if(e in t)return e;for(var n,r=o.length,i=e.charAt(0).toUpperCase()+e.slice(1);r--;)if((n=o[r]+i)in t)return n;return e}(r)),e.style[t]=n}return function(e,t){var n,r,i=arguments;if(2==i.length)for(n in t)(r=t[n])!==undefined&&t.hasOwnProperty(n)&&s(e,n,r);else s(e,i[1],i[2])}}();function o(e,t){return 0<=("string"==typeof e?e:c(e)).indexOf(" "+t+" ")}function s(e,t){var n=c(e),r=n+t;o(n,t)||(e.className=r.substring(1))}function a(e,t){var n,r=c(e);o(e,t)&&(n=r.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function c(e){return(" "+(e&&e.className||"")+" ").replace(/\s+/gi," ")}function u(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return l}),window.KFZ=window.KFZ||{},window.KFZ.searchTools=function(){this.params={},this.paramStr={normal:"",code:""},this.encodeArr=["shopname","itemname","key","author","press","location","exkey"],this.orderParams=[],this.paramDictionary={superdebug:"debug_",mycatid:"myc_",type:"type_",ajaxdata:"ajaxdata_",showtype:"st_",addtime:"g",tag:"tag_",binding:"bind_",catnum:"cat_",shopid:"sid_",sibu:"sibu_",shopname:"r",select:"sel",itemname:"s",status:"y",key:"z",price:"t",quality:"qua_",quaselect:"qsel_",author:"l",press:"m",pubdate:"pub_",years:"n",location:"u",vcat:"vc_",order:"v",pagenum:"w",xinshu:"xs",exkey:"x",special1:"o",special2:"p",special3:"q",getmore:"more_",exact:"i_",itemfilter:"if_",perfect:"iq_",isfuzzy:"j"},this.codeRegOrder=["debug_","myc_","ajaxdata_","type_","bind_","cat_","tag_","g","t","sid_","sibu_","st_","sel","pub_","p","more_","m","o","qua_","qsel_","q","if_","iq_","i_","r","s","y","z","l","n","u","vc_","v","w","xs","x","j"],this.confDictionary=[],this.setConfDictionary()},window.KFZ.searchTools.prototype={setConfDictionary:function(){var n=this;return $.each(this.confDictionary,function(e,t){n.setCodeDictionary(t)}),this},setCodeDictionary:function(n){if(n.param&&n.code){var r="";if(this.paramDictionary[n.param]!=undefined)return this;this.paramDictionary[n.param]=n.code,$.each(this.codeRegOrder,function(e,t){if(n.code==t)return!1;n.code.length<t.length&&-1!=t.indexOf(n.code)&&(r=e+1)}),""!==r?this.codeRegOrder.splice(r,0,n.code):this.codeRegOrder.push(n.code)}return this},setParam:function(e,t){return this.updateParams(e),this.updateOrderParam(e,t),this.encoded(),this},delParam:function(e){return this.delParams(e),this.delOrderParam(e),this.encoded(),this},setParamStr:function(e,t){return this.paramStr[t]=e,this.decode(t),this},getParam:function(e){var t=this.params[e];return t&&(t=this.parserParam(t)),t},getParams:function(){var n=this,r=$.extend(!0,{},this.params);return $.each(r,function(e,t){r[e]=n.getParam(e)}),r},paramSwitch:function(e){return this.paramDictionary[e]},codeSwitch:function(n){var r="";return $.each(this.paramDictionary,function(e,t){if(n==t)return r=e,!1}),r},paramToCodeStr:function(e,t){var n=this,r="code"==t?e:this.encharCode(e),i="";return $.each(r,function(e,t){i=n.paramSwitch(e)+t}),i},encoded:function(){var n=[],r=[];return $.each(this.orderParams,function(e,t){n.push(t.paramStr),r.push(t.codeStr)}),this.paramStr={normal:"?"+n.join("&"),code:r.join("")},this},updateParams:function(e){return $.extend(this.params,e),this},delParams:function(e){return this.params[e]=null,delete this.params[e],this},uniqueOrderParam:function(e){var r="";return $.each(this.orderParams,function(t,n){if($.each(e,function(e){if(n.param[e]!=undefined)return r=t,!1}),r)return!1}),""!==r&&this.orderParams.splice(r,1),this},updateOrderParam:function(e,t){this.uniqueOrderParam(e);var n={param:e,paramStr:"",codeStr:this.paramToCodeStr($.extend(!0,{},e),t)};return $.each(e,function(e,t){n.paramStr=e+"="+t}),this.orderParams.push(n),this},delOrderParam:function(n){var r="";return $.each(this.orderParams,function(e,t){if(t.param[n])return r=e,!1}),""!==r&&this.orderParams.splice(r,1),this},encharCode:function(i){var o=this;return $.each(i,function(n,r){$.each(o.encodeArr,function(e,t){n==t&&(i[n]=o.charToUnicode(r))})}),i},paramStrToNormal:function(){var e,n=this,t=this.paramStr.code,r=this.codeRegOrder.join("|"),i="",o=new RegExp(r,"gm");return e=t.replace(o,function(e){return","+e}).substring(1).split(","),$.each(e,function(e,t){i+=t.replace(o,function(e){var t=n.codeSwitch(e);return t?"&"+t+"=":e})}),n.paramStr.normal="?"+i.substring(1),this},decode:function(s){"code"===s&&this.paramStrToNormal();var a=this,e=this.paramStr.normal.substring(1).split("&");return $.each(e,function(e,t){var n={},r=t.indexOf("=");if(-1!=r){var i=t.substring(0,r),o=t.substring(r+1);n[i]=o,a.setParam(n,s)}}),this},unicodeToChar:function(e){if(void 0===e)return"";for(var t="",n=e.split("k"),r=0,i=n.length;r<i;r++){var o=n[r];o&&(o=parseInt(o,16).toString(10),t+=String.fromCharCode(o))}return t},charToUnicode:function(e){if(!e)return"";for(var t="",n=0,r=(e=""+e).length;n<r;n++)t+="k"+e.charCodeAt(n).toString(16).toLowerCase();return t},splitParam:function(e){var r=this,t=e.split("h"),i=[];return $.each(t,function(e,t){var n={code:t,param:t};-1!=t.indexOf("k")&&(n.param=r.unicodeToChar(t)),i.push(n)}),i},parserParam:function(e){return-1!=(e=e.toString()).indexOf("h")?this.splitParam(e):-1!=e.indexOf("k")?this.unicodeToChar(e):e},cookies:function(e,t,n){if(void 0===t){var r=null;if(document.cookie&&""!=document.cookie){var i=document.cookie.indexOf(e+"=");if(-1!=i){i=i+e.length+1;var o=document.cookie.indexOf(";",i);-1==o&&(o=document.cookie.length),r=decodeURIComponent(document.cookie.substring(i,o))}}return r}n||(n={}),null===t&&(t="",n.expires=-1);var s,a="";n.expires&&("number"==typeof n.expires||n.expires.toUTCString)&&("number"==typeof n.expires?(s=new Date).setTime(s.getTime()+24*n.expires*60*60*1e3):s=n.expires,a="; expires="+s.toUTCString());var c=n.path?"; path="+n.path:"",u=n.domain?"; domain="+n.domain:"",l=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),a,c,u,l].join("")},addSearchHistory:function(e,t){var n="history_"+e,r=this.getSearchHistory(e)||[];if(r.length<=15){for(var i=0;i<r.length;i++)if(t==r[i]){r.splice(i,1);break}r.unshift(t)}else r.pop(),r.unshift(t);return t=JSON.stringify(r),"undefined"==typeof window.localStorage?this.cookies(n,t,{domain:e}):window.localStorage.setItem(n,t),this},getSearchHistory:function(e){var t,n="history_"+e;return t="undefined"==typeof window.localStorage?this.cookies(n)||"[]":window.localStorage.getItem(n)||"[]",JSON.parse(t)},sug:function(e,t){$.ajax({url:"http://search.kongfz.com/sug/suggest_server.jsp",type:"GET",cache:!1,dataType:"script",data:e,success:function(){t()}})}},function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.io=e()}}(function(){return function i(o,s,a){function c(t,e){if(!s[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);throw new Error("Cannot find module '"+t+"'")}var r=s[t]={exports:{}};o[t][0].call(r.exports,function(e){return c(o[t][1][e]||e)},r,r.exports,i,o,s,a)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)c(a[e]);return c}({1:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,n){var s=e("./url"),r=e("socket.io-parser"),a=e("./manager"),c=e("debug")("socket.io-client");t.exports=n=i;var u=n.managers={};function i(e,t){"object"==typeof e&&(t=e,e=undefined),t=t||{};var n,r=s(e),i=r.source,o=r.id;return t.forceNew||t["force new connection"]||!1===t.multiplex?(c("ignoring socket cache for %s",i),n=a(i,t)):(u[o]||(c("new io instance for %s",i),u[o]=a(i,t)),n=u[o]),n.socket(r.path)}n.protocol=r.protocol,n.connect=i,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:10,"socket.io-parser":46}],3:[function(e,t,n){e("./url");var a=e("engine.io-client"),r=e("./socket"),i=e("component-emitter"),o=e("socket.io-parser"),c=e("./on"),s=e("component-bind"),u=(e("object-component"),e("debug")("socket.io-client:manager")),l=e("indexof"),f=e("backo2");function p(e,t){if(!(this instanceof p))return new p(e,t);e&&"object"==typeof e&&(t=e,e=undefined),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||Infinity),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new o.Encoder,this.decoder=new o.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}(t.exports=p).prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},p.prototype.updateSocketIds=function(){for(var e in this.nsps)this.nsps[e].id=this.engine.id},i(p.prototype),p.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},p.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},p.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},p.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},p.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},p.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},p.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},p.prototype.open=p.prototype.connect=function(n){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=a(this.uri,this.opts);var e=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var t=c(e,"open",function(){r.onopen(),n&&n()}),i=c(e,"error",function(e){if(u("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",e),n){var t=new Error("Connection error");t.data=e,n(t)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var o=this._timeout;u("connect attempt will timeout after %d",o);var s=setTimeout(function(){u("connect attempt timed out after %d",o),t.destroy(),e.close(),e.emit("error","timeout"),r.emitAll("connect_timeout",o)},o);this.subs.push({destroy:function(){clearTimeout(s)}})}return this.subs.push(t),this.subs.push(i),this},p.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(c(e,"data",s(this,"ondata"))),this.subs.push(c(this.decoder,"decoded",s(this,"ondecoded"))),this.subs.push(c(e,"error",s(this,"onerror"))),this.subs.push(c(e,"close",s(this,"onclose")))},p.prototype.ondata=function(e){this.decoder.add(e)},p.prototype.ondecoded=function(e){this.emit("packet",e)},p.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},p.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new r(this,e),this.nsps[e]=t;var n=this;t.on("connect",function(){t.id=n.engine.id,~l(n.connected,t)||n.connected.push(t)})}return t},p.prototype.destroy=function(e){var t=l(this.connected,e);~t&&this.connected.splice(t,1),this.connected.length||this.close()},p.prototype.packet=function(e){u("writing packet %j",e);var n=this;n.encoding?n.packetBuffer.push(e):(n.encoding=!0,this.encoder.encode(e,function(e){for(var t=0;t<e.length;t++)n.engine.write(e[t]);n.encoding=!1,n.processPacketQueue()}))},p.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},p.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},p.prototype.close=p.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},p.prototype.onclose=function(e){u("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},p.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();u("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(u("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(u("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(u("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},p.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":4,"./socket":5,"./url":6,backo2:7,"component-bind":8,"component-emitter":9,debug:10,"engine.io-client":11,indexof:42,"object-component":43,"socket.io-parser":46}],4:[function(e,t,n){t.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},{}],5:[function(e,t,n){var o=e("socket.io-parser"),r=e("component-emitter"),s=e("to-array"),i=e("./on"),a=e("component-bind"),c=e("debug")("socket.io-client:socket"),u=e("has-binary");t.exports=p;var l={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},f=r.prototype.emit;function p(e,t){this.io=e,this.nsp=t,(this.json=this).ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}r(p.prototype),p.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[i(e,"open",a(this,"onopen")),i(e,"packet",a(this,"onpacket")),i(e,"close",a(this,"onclose"))]}},p.prototype.open=p.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen()),this},p.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},p.prototype.emit=function(e){if(l.hasOwnProperty(e))return f.apply(this,arguments),this;var t=s(arguments),n=o.EVENT;u(t)&&(n=o.BINARY_EVENT);var r={type:n,data:t};return"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this},p.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},p.prototype.onopen=function(){c("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:o.CONNECT})},p.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},p.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case o.CONNECT:this.onconnect();break;case o.EVENT:case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",e.data)}},p.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},p.prototype.ack=function(n){var r=this,i=!1;return function(){if(!i){i=!0;var e=s(arguments);c("sending ack %j",e);var t=u(e)?o.BINARY_ACK:o.ACK;r.packet({type:t,id:n,data:e})}}},p.prototype.onack=function(e){c("calling ack %s with %j",e.id,e.data),this.acks[e.id].apply(this,e.data),delete this.acks[e.id]},p.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},p.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},p.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},p.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},p.prototype.close=p.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":4,"component-bind":8,"component-emitter":9,debug:10,"has-binary":38,"socket.io-parser":46,"to-array":50}],6:[function(e,t,n){(function(r){var i=e("parseuri"),o=e("debug")("socket.io-client:url");t.exports=function(e,t){var n=e;t=t||r.location;return null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.hostname+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),n=i(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/",n.id=n.protocol+"://"+n.host+":"+n.port,n.href=n.protocol+"://"+n.host+(t&&t.port==n.port?"":":"+n.port),n}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:10,parseuri:44}],7:[function(e,t,n){function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=0<e.jitter&&e.jitter<=1?e.jitter:0,this.attempts=0}(t.exports=r).prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}},{}],8:[function(e,t,n){var r=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},{}],9:[function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}(t.exports=r).prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){var n=this;function r(){n.off(e,r),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],10:[function(e,t,n){function o(i){return o.enabled(i)?function(e){var t;e=(t=e)instanceof Error?t.stack||t.message:t;var n=new Date,r=n-(o[i]||n);o[i]=n,e=i+" "+e+" +"+o.humanize(r),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}(t.exports=o).names=[],o.skips=[],o.enable=function(e){try{localStorage.debug=e}catch(i){}for(var t=(e||"").split(/[\s,]+/),n=t.length,r=0;r<n;r++)"-"===(e=t[r].replace("*",".*?"))[0]?o.skips.push(new RegExp("^"+e.substr(1)+"$")):o.names.push(new RegExp("^"+e+"$"))},o.disable=function(){o.enable("")},o.humanize=function(e){return 36e5<=e?(e/36e5).toFixed(1)+"h":6e4<=e?(e/6e4).toFixed(1)+"m":1e3<=e?(e/1e3|0)+"s":e+"ms"},o.enabled=function(e){for(var t=0,n=o.skips.length;t<n;t++)if(o.skips[t].test(e))return!1;for(t=0,n=o.names.length;t<n;t++)if(o.names[t].test(e))return!0;return!1};try{window.localStorage&&o.enable(localStorage.debug)}catch(r){}},{}],11:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":12}],12:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":13,"engine.io-parser":25}],13:[function(t,u,e){(function(r){var n=t("./transports"),e=t("component-emitter"),f=t("debug")("engine.io-client:socket"),i=t("indexof"),o=t("engine.io-parser"),s=t("parseuri"),a=t("parsejson"),c=t("parseqs");function p(e,t){if(!(this instanceof p))return new p(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=s(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:r.location&&"https:"==location.protocol,t.host){var n=t.host.split(":");t.hostname=n.shift(),n.length?t.port=n.pop():t.port||(t.port=this.secure?"443":"80")}this.agent=t.agent||!1,this.hostname=t.hostname||(r.location?location.hostname:"localhost"),this.port=t.port||(r.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=t.rejectUnauthorized||null,this.open()}(u.exports=p).priorWebsocketSuccess=!1,e(p.prototype),p.protocol=o.protocol,(p.Socket=p).Transport=t("./transport"),p.transports=t("./transports"),p.parser=t("engine.io-parser"),p.prototype.createTransport=function(e){f('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);return t.EIO=o.protocol,t.transport=e,this.id&&(t.sid=this.id),new n[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized})},p.prototype.open=function(){var e;if(this.rememberUpgrade&&p.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0==this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},p.prototype.setTransport=function(e){f("setting transport %s",e.name);var t=this;this.transport&&(f("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),(this.transport=e).on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},p.prototype.probe=function(n){f('probing transport "%s"',n);var r=this.createTransport(n,{probe:1}),i=!1,o=this;function e(){if(o.onlyBinaryUpgrades){var e=!this.supportsBinary&&o.transport.supportsBinary;i=i||e}i||(f('probe transport "%s" opened',n),r.send([{type:"ping",data:"probe"}]),r.once("packet",function(e){if(!i)if("pong"==e.type&&"probe"==e.data){if(f('probe transport "%s" pong',n),o.upgrading=!0,o.emit("upgrading",r),!r)return;p.priorWebsocketSuccess="websocket"==r.name,f('pausing current transport "%s"',o.transport.name),o.transport.pause(function(){i||"closed"!=o.readyState&&(f("changing transport and sending upgrade packet"),l(),o.setTransport(r),r.send([{type:"upgrade"}]),o.emit("upgrade",r),r=null,o.upgrading=!1,o.flush())})}else{f('probe transport "%s" failed',n);var t=new Error("probe error");t.transport=r.name,o.emit("upgradeError",t)}}))}function s(){i||(i=!0,l(),r.close(),r=null)}function t(e){var t=new Error("probe error: "+e);t.transport=r.name,s(),f('probe transport "%s" failed because of error: %s',n,e),o.emit("upgradeError",t)}function a(){t("transport closed")}function c(){t("socket closed")}function u(e){r&&e.name!=r.name&&(f('"%s" works - aborting "%s"',e.name,r.name),s())}function l(){r.removeListener("open",e),r.removeListener("error",t),r.removeListener("close",a),o.removeListener("close",c),o.removeListener("upgrading",u)}p.priorWebsocketSuccess=!1,r.once("open",e),r.once("error",t),r.once("close",a),this.once("close",c),this.once("upgrading",u),r.open()},p.prototype.onOpen=function(){if(f("socket open"),this.readyState="open",p.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){f("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},p.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(f('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(a(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else f('packet received with socket readyState "%s"',this.readyState)},p.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},p.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},p.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){f("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},p.prototype.ping=function(){this.sendPacket("ping")},p.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)==this.writeBuffer.length?this.emit("drain"):this.flush()},p.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(f("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},p.prototype.write=p.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},p.prototype.sendPacket=function(e,t,n){if("closing"!=this.readyState&&"closed"!=this.readyState){var r={type:e,data:t};this.emit("packetCreate",r),this.writeBuffer.push(r),this.callbackBuffer.push(n),this.flush()}},p.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var e=this;function t(){e.onClose("forced close"),f("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}return this},p.prototype.onError=function(e){f("socket error %j",e),p.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},p.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){f('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){n.writeBuffer=[],n.callbackBuffer=[],n.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},p.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~i(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":14,"./transports":15,"component-emitter":9,debug:22,"engine.io-parser":25,indexof:42,parsejson:34,parseqs:35,parseuri:36}],14:[function(e,t,n){var r=e("engine.io-parser");function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized}e("component-emitter")((t.exports=i).prototype),i.timestamps=0,i.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},i.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":9,"engine.io-parser":25}],15:[function(t,e,n){(function(s){var a=t("xmlhttprequest"),c=t("./polling-xhr"),u=t("./polling-jsonp"),e=t("./websocket");n.polling=function(e){var t=!1,n=!1,r=!1!==e.jsonp;if(s.location){var i="https:"==location.protocol,o=location.port;o||(o=i?443:80),t=e.hostname!=location.hostname||o!=e.port,n=e.secure!=i}if(e.xdomain=t,e.xscheme=n,"open"in new a(e)&&!e.forceJSONP)return new c(e);if(!r)throw new Error("JSONP disabled");return new u(e)},n.websocket=e}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(s,a,e){(function(n){var r=s("./polling"),e=s("component-inherit");a.exports=t;var i,l=/\n/g,f=/\\n/g;function o(){}function t(e){r.call(this,e),this.query=this.query||{},i||(n.___eio||(n.___eio=[]),i=n.___eio),this.index=i.length;var t=this;i.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=o)},!1)}e(t,r),t.prototype.supportsBinary=!1,t.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},t.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},t.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r,i=document.createElement("form"),o=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=s,i.method="POST",i.setAttribute("accept-charset","utf-8"),o.name="d",i.appendChild(o),document.body.appendChild(i),this.form=i,this.area=o}function a(){c(),t()}function c(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(t){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),c(),e=e.replace(f,"\\\n"),this.area.value=e.replace(l,"\\n");try{this.form.submit()}catch(u){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==n.iframe.readyState&&a()}:this.iframe.onload=a}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-inherit":21}],17:[function(l,f,e){(function(r){var i=l("xmlhttprequest"),o=l("./polling"),e=l("component-emitter"),t=l("component-inherit"),s=l("debug")("engine.io-client:polling-xhr");function n(){}function a(e){if(o.call(this,e),r.location){var t="https:"==location.protocol,n=location.port;n||(n=t?443:80),this.xd=e.hostname!=r.location.hostname||n!=e.port,this.xs=e.secure!=t}}function c(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=undefined!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.create()}function u(){for(var e in c.requests)c.requests.hasOwnProperty(e)&&c.requests[e].abort()}f.exports=a,f.exports.Request=c,t(a,o),a.prototype.supportsBinary=!0,a.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,new c(e)},a.prototype.doWrite=function(e,t){var n="string"!=typeof e&&e!==undefined,r=this.request({method:"POST",data:e,isBinary:n}),i=this;r.on("success",t),r.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=r},a.prototype.doPoll=function(){s("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},e(c.prototype),c.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new i(e),n=this;try{if(s("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async),this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(o){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?n.onLoad():setTimeout(function(){n.onError(t.status)},0))},s("xhr data %s",this.data),t.send(this.data)}catch(o){return void setTimeout(function(){n.onError(o)},0)}r.document&&(this.index=c.requestsCount++,c.requests[this.index]=this)},c.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},c.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},c.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},c.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,e)try{this.xhr.abort()}catch(t){}r.document&&delete c.requests[this.index],this.xhr=null}},c.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(n){}e="application/octet-stream"===t?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},c.prototype.hasXDR=function(){return"undefined"!=typeof r.XDomainRequest&&!this.xs&&this.enablesXDR},c.prototype.abort=function(){this.cleanup()},r.document&&(c.requestsCount=0,c.requests={},r.attachEvent?r.attachEvent("onunload",u):r.addEventListener&&r.addEventListener("beforeunload",u,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-emitter":9,"component-inherit":21,debug:22,xmlhttprequest:20}],18:[function(e,t,n){var r=e("../transport"),i=e("parseqs"),o=e("engine.io-parser"),s=e("component-inherit"),a=e("debug")("engine.io-client:polling");t.exports=u;var c=null!=new(e("xmlhttprequest"))({xdomain:!1}).responseType;function u(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),r.call(this,e)}s(u,r),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(e){var t=this;function n(){a("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(a("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){a("pre-pause polling complete"),--r||n()})),this.writable||(a("we are currently writing - waiting to pause"),r++,this.once("drain",function(){a("pre-pause writing complete"),--r||n()}))}else n()},u.prototype.poll=function(){a("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(e){var r=this;a("polling got data %s",e),o.decodePayload(e,this.socket.binaryType,function(e,t,n){if("opening"==r.readyState&&r.onOpen(),"close"==e.type)return r.onClose(),!1;r.onPacket(e)}),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():a('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var e=this;function t(){a("writing close packet"),e.write([{type:"close"}])}"open"==this.readyState?(a("transport open - closing"),t()):(a("transport not open - deferring close"),this.once("open",t))},u.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};t=this,o.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+r.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:35,xmlhttprequest:20}],19:[function(e,t,n){var r=e("../transport"),i=e("engine.io-parser"),o=e("parseqs"),s=e("component-inherit"),a=e("debug")("engine.io-client:websocket"),c=e("ws");function u(e){e&&e.forceBase64&&(this.supportsBinary=!1),r.call(this,e)}s(t.exports=u,r),u.prototype.name="websocket",u.prototype.supportsBinary=!0,u.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t={agent:this.agent};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.ws=new c(e,void 0,t),this.ws.binaryType===undefined&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},u.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(u.prototype.onData=function(e){var t=this;setTimeout(function(){r.prototype.onData.call(t,e)},0)}),u.prototype.write=function(e){var t=this;this.writable=!1;for(var n=0,r=e.length;n<r;n++)i.encodePacket(e[n],this.supportsBinary,function(e){try{t.ws.send(e)}catch(n){a("websocket closed before onclose event")}});setTimeout(function(){t.writable=!0,t.emit("drain")},0)},u.prototype.onClose=function(){r.prototype.onClose.call(this)},u.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),(e=o.encode(e)).length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e},u.prototype.check=function(){return!(!c||"__initialize"in c&&this.name===u.prototype.name)}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:35,ws:37}],20:[function(e,t,n){var o=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||o))return new XMLHttpRequest}catch(i){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(i){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(i){}}},{"has-cors":40}],21:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],22:[function(e,t,o){function n(){var e;try{e=localStorage.debug}catch(t){}return e}(o=t.exports=e("./debug")).log=function(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)},o.formatArgs=function(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+o.humanize(this.diff),!t)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var r=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,n),e},o.save=function(e){try{null==e?localStorage.removeItem("debug"):localStorage.debug=e}catch(t){}},o.load=n,o.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)},o.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],o.formatters.j=function(e){return JSON.stringify(e)},o.enable(n())},{"./debug":23}],23:[function(e,t,a){(a=t.exports=function(e){function t(){}function n(){var i=n,e=+new Date,t=e-(c||e);i.diff=t,i.prev=c,i.curr=e,c=e,null==i.useColors&&(i.useColors=a.useColors()),null==i.color&&i.useColors&&(i.color=a.colors[u++%a.colors.length]);var o=Array.prototype.slice.call(arguments);o[0]=a.coerce(o[0]),"string"!=typeof o[0]&&(o=["%o"].concat(o));var s=0;o[0]=o[0].replace(/%([a-z%])/g,function(e,t){if("%"===e)return e;s++;var n=a.formatters[t];if("function"==typeof n){var r=o[s];e=n.call(i,r),o.splice(s,1),s--}return e}),"function"==typeof a.formatArgs&&(o=a.formatArgs.apply(i,o)),(n.log||a.log||console.log.bind(console)).apply(i,o)}n.enabled=!(t.enabled=!1);var r=a.enabled(e)?n:t;return r.namespace=e,r}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},a.disable=function(){a.enable("")},a.enable=function(e){a.save(e);for(var t=(e||"").split(/[\s,]+/),n=t.length,r=0;r<n;r++)t[r]&&("-"===(e=t[r].replace(/\*/g,".*?"))[0]?a.skips.push(new RegExp("^"+e.substr(1)+"$")):a.names.push(new RegExp("^"+e+"$")))},a.enabled=function(e){var t,n;for(t=0,n=a.skips.length;t<n;t++)if(a.skips[t].test(e))return!1;for(t=0,n=a.names.length;t<n;t++)if(a.names[t].test(e))return!0;return!1},a.humanize=e("ms"),a.names=[],a.skips=[],a.formatters={};var c,u=0},{ms:24}],24:[function(e,t,n){var i=36e5,o=864e5;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(r,e){return e=e||{},"string"==typeof r?function(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(r);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"y":return 315576e5*n;case"days":case"day":case"d":return n*o;case"hours":case"hour":case"h":return n*i;case"minutes":case"minute":case"m":return 6e4*n;case"seconds":case"second":case"s":return 1e3*n;case"ms":return n}}}():e["long"]?s(n=r,o,"day")||s(n,i,"hour")||s(n,6e4,"minute")||s(n,1e3,"second")||n+" ms":o<=(t=r)?Math.round(t/o)+"d":i<=t?Math.round(t/i)+"h":6e4<=t?Math.round(t/6e4)+"m":1e3<=t?Math.round(t/1e3)+"s":t+"ms";var t,n}},{}],25:[function(r,e,g){(function(c){var e=r("./keys"),i=r("has-binary"),d=r("arraybuffer.slice"),o=r("base64-arraybuffer"),a=r("after"),s=r("utf8"),t=navigator.userAgent.match(/Android/i),n=/PhantomJS/i.test(navigator.userAgent),u=t||n;g.protocol=3;var l=g.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},f=e(l),h={type:"error",data:"parser error"},m=r("blob");function p(e,t,n){for(var i=new Array(e.length),r=a(e.length,n),o=function(n,e,r){t(e,function(e,t){i[n]=t,r(e,i)})},s=0;s<e.length;s++)o(s,e[s],r)}g.encodePacket=function(e,a,t,n){"function"==typeof a&&(n=a,a=!1),"function"==typeof t&&(n=t,t=null);var r,i=e.data===undefined?undefined:e.data.buffer||e.data;if(c.ArrayBuffer&&i instanceof ArrayBuffer)return function(e,t,n){if(!a)return g.encodeBase64Packet(e,n);var r=e.data,i=new Uint8Array(r),o=new Uint8Array(1+r.byteLength);o[0]=l[e.type];for(var s=0;s<i.length;s++)o[s+1]=i[s];return n(o.buffer)}(e,0,n);if(m&&i instanceof c.Blob)return function(e,t,n){if(!t)return g.encodeBase64Packet(e,n);if(u)return function(e,t,n){if(!t)return g.encodeBase64Packet(e,n);var r=new FileReader;return r.onload=function(){e.data=r.result,g.encodePacket(e,t,!0,n)},r.readAsArrayBuffer(e.data)}(e,t,n);var r=new Uint8Array(1);return r[0]=l[e.type],n(new m([r.buffer,e.data]))}(e,a,n);if(i&&i.base64)return r=e,n("b"+g.packets[r.type]+r.data.data);var o=l[e.type];return undefined!==e.data&&(o+=t?s.encode(String(e.data)):String(e.data)),n(""+o)},g.encodeBase64Packet=function(e,t){var n,r="b"+g.packets[e.type];if(m&&e.data instanceof m){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];t(r+e)},i.readAsDataURL(e.data)}try{n=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(p){for(var o=new Uint8Array(e.data),s=new Array(o.length),a=0;a<o.length;a++)s[a]=o[a];n=String.fromCharCode.apply(null,s)}return r+=c.btoa(n),t(r)},g.decodePacket=function(e,t,n){if("string"==typeof e||e===undefined){if("b"==e.charAt(0))return g.decodeBase64Packet(e.substr(1),t);if(n)try{e=s.decode(e)}catch(o){return h}var r=e.charAt(0);return Number(r)==r&&f[r]?1<e.length?{type:f[r],data:e.substring(1)}:{type:f[r]}:h}r=new Uint8Array(e)[0];var i=d(e,1);return m&&"blob"===t&&(i=new m([i])),{type:f[r],data:i}},g.decodeBase64Packet=function(e,t){var n=f[e.charAt(0)];if(!c.ArrayBuffer)return{type:n,data:{base64:!0,data:e.substr(1)}};var r=o.decode(e.substr(1));return"blob"===t&&m&&(r=new m([r])),{type:n,data:r}},g.encodePayload=function(e,t,n){"function"==typeof t&&(n=t,t=null);var r=i(e);return t&&r?m&&!u?g.encodePayloadAsBlob(e,n):g.encodePayloadAsArrayBuffer(e,n):e.length?void p(e,function(e,n){g.encodePacket(e,!!r&&t,!0,function(e){var t;n(null,(t=e).length+":"+t)})},function(e,t){return n(t.join(""))}):n("0:")},g.decodePayload=function(e,t,n){if("string"!=typeof e)return g.decodePayloadAsBinary(e,t,n);var r;if("function"==typeof t&&(n=t,t=null),""==e)return n(h,0,1);for(var i,o,s="",a=0,c=e.length;a<c;a++){var u=e.charAt(a);if(":"!=u)s+=u;else{if(""==s||s!=(i=Number(s)))return n(h,0,1);if(s!=(o=e.substr(a+1,i)).length)return n(h,0,1);if(o.length){if(r=g.decodePacket(o,t,!0),h.type==r.type&&h.data==r.data)return n(h,0,1);if(!1===n(r,a+i,c))return}a+=i,s=""}}return""!=s?n(h,0,1):void 0},g.encodePayloadAsArrayBuffer=function(e,r){if(!e.length)return r(new ArrayBuffer(0));p(e,function(e,t){g.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,t){var n=t.reduce(function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2},0),s=new Uint8Array(n),a=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);n=r.buffer}s[a++]=t?0:1;var o=n.byteLength.toString();for(i=0;i<o.length;i++)s[a++]=parseInt(o[i]);for(s[a++]=255,r=new Uint8Array(n),i=0;i<r.length;i++)s[a++]=r[i]}),r(s.buffer)})},g.encodePayloadAsBlob=function(e,n){p(e,function(e,a){g.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);e=n.buffer,t[0]=0}var i=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),o=new Uint8Array(i.length+1);for(r=0;r<i.length;r++)o[r]=parseInt(i[r]);if(o[i.length]=255,m){var s=new m([t.buffer,o.buffer,e]);a(null,s)}})},function(e,t){return n(new m(t))})},g.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var t=e,i=[],o=!1;0<t.byteLength;){for(var s=new Uint8Array(t),a=0===s[0],c="",u=1;255!=s[u];u++){if(310<c.length){o=!0;break}c+=s[u]}if(o)return r(h,0,1);t=d(t,2+c.length),c=parseInt(c);var l=d(t,0,c);if(a)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(m){var f=new Uint8Array(l);for(l="",u=0;u<f.length;u++)l+=String.fromCharCode(f[u])}i.push(l),t=d(t,c)}var p=i.length;i.forEach(function(e,t){r(g.decodePacket(e,n,!0),t,p)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":26,after:27,"arraybuffer.slice":28,"base64-arraybuffer":29,blob:30,"has-binary":31,utf8:33}],26:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},{}],27:[function(e,t,n){function s(){}t.exports=function(e,n,r){var i=!1;return r=r||s,0===(o.count=e)?n():o;function o(e,t){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,n(e),n=r):0!==o.count||i||n(null,t)}}},{}],28:[function(e,t,n){t.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),r<n&&(n=r),r<=t||n<=t||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)o[a]=i[s];return o.buffer}},{}],29:[function(e,t,n){!function(f){"use strict";n.encode=function(e){var t,n=new Uint8Array(e),r=n.length,i="";for(t=0;t<r;t+=3)i+=f[n[t]>>2],i+=f[(3&n[t])<<4|n[t+1]>>4],i+=f[(15&n[t+1])<<2|n[t+2]>>6],i+=f[63&n[t+2]];return r%3==2?i=i.substring(0,i.length-1)+"=":r%3==1&&(i=i.substring(0,i.length-2)+"=="),i},n.decode=function(e){var t,n,r,i,o,s=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var u=new ArrayBuffer(s),l=new Uint8Array(u);for(t=0;t<a;t+=4)n=f.indexOf(e[t]),r=f.indexOf(e[t+1]),i=f.indexOf(e[t+2]),o=f.indexOf(e[t+3]),l[c++]=n<<2|r>>4,l[c++]=(15&r)<<4|i>>2,l[c++]=(3&i)<<6|63&o;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],30:[function(e,r,t){(function(e){var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,t=function(){try{return 2==new Blob(["hi"]).size}catch(e){return!1}}(),n=i&&i.prototype.append&&i.prototype.getBlob;r.exports=t?e.Blob:n?function(e,t){t=t||{};for(var n=new i,r=0;r<e.length;r++)n.append(e[r]);return t.type?n.getBlob(t.type):n.getBlob()}:undefined}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(e,t,n){(function(i){var o=e("isarray");t.exports=function(t){return function e(t){if(!t)return!1;if(i.Buffer&&i.Buffer.isBuffer(t)||i.ArrayBuffer&&t instanceof ArrayBuffer||i.Blob&&t instanceof Blob||i.File&&t instanceof File)return!0;if(o(t)){for(var n=0;n<t.length;n++)if(e(t[n]))return!0}else if(t&&"object"==typeof t)for(var r in t.toJSON&&(t=t.toJSON()),t)if(t.hasOwnProperty(r)&&e(t[r]))return!0;return!1}(t)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:32}],32:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],33:[function(e,y,v){(function(g){!function(e){var t="object"==typeof v&&v,n="object"==typeof y&&y&&y.exports==t&&y,r="object"==typeof g&&g;r.global!==r&&r.window!==r||(e=r);var i,o,s,a=String.fromCharCode;function c(e){for(var t,n,r=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function u(e,t){return a(e>>t&63|128)}function l(e){if(0==(4294967168&e))return a(e);var t="";return 0==(4294965248&e)?t=a(e>>6&31|192):0==(4294901760&e)?(t=a(e>>12&15|224),t+=u(e,6)):0==(4292870144&e)&&(t=a(e>>18&7|240),t+=u(e,12),t+=u(e,6)),t+a(63&e|128)}function f(){if(o<=s)throw Error("Invalid byte index");var e=255&i[s];if(s++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function p(){var e,t;if(o<s)throw Error("Invalid byte index");if(s==o)return!1;if(e=255&i[s],s++,0==(128&e))return e;if(192==(224&e)){if(128<=(t=(31&e)<<6|f()))return t;throw Error("Invalid continuation byte")}if(224==(240&e)){if(2048<=(t=(15&e)<<12|f()<<6|f()))return t;throw Error("Invalid continuation byte")}if(240==(248&e)&&65536<=(t=(15&e)<<18|f()<<12|f()<<6|f())&&t<=1114111)return t;throw Error("Invalid UTF-8 detected")}var d={version:"2.0.0",encode:function(e){for(var t=c(e),n=t.length,r=-1,i="";++r<n;)i+=l(t[r]);return i},decode:function(e){i=c(e),o=i.length,s=0;for(var t,n=[];!1!==(t=p());)n.push(t);return function(e){for(var t,n=e.length,r=-1,i="";++r<n;)65535<(t=e[r])&&(i+=a((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=a(t);return i}(n)}};if(t&&!t.nodeType)if(n)n.exports=d;else{var h={}.hasOwnProperty;for(var m in d)h.call(d,m)&&(t[m]=d[m])}else e.utf8=d}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(e,c,t){(function(t){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;c.exports=function(e){return"string"==typeof e&&e?(e=e.replace(s,"").replace(a,""),t.JSON&&JSON.parse?JSON.parse(e):n.test(e.replace(r,"@").replace(i,"]").replace(o,""))?new Function("return "+e)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],35:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},{}],36:[function(e,t,n){var a=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var i=a.exec(e||""),o={},s=14;s--;)o[c[s]]=i[s]||"";return-1!=n&&-1!=r&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o}},{}],37:[function(e,t,n){var r=function(){return this}(),i=r.WebSocket||r.MozWebSocket;function o(e,t,n){return t?new i(e,t):new i(e)}t.exports=i?o:null,i&&(o.prototype=i.prototype)},{}],38:[function(e,t,n){(function(i){var o=e("isarray");t.exports=function(t){return function e(t){if(!t)return!1;if(i.Buffer&&i.Buffer.isBuffer(t)||i.ArrayBuffer&&t instanceof ArrayBuffer||i.Blob&&t instanceof Blob||i.File&&t instanceof File)return!0;if(o(t)){for(var n=0;n<t.length;n++)if(e(t[n]))return!0}else if(t&&"object"==typeof t)for(var r in t.toJSON&&(t=t.toJSON()),t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return!0;return!1}(t)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:39}],39:[function(e,t,n){t.exports=e(32)},{}],40:[function(e,t,n){var r=e("global");try{t.exports="XMLHttpRequest"in r&&"withCredentials"in new r.XMLHttpRequest}catch(i){t.exports=!1}},{global:41}],41:[function(e,t,n){t.exports=function(){return this}()},{}],42:[function(e,t,n){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],43:[function(e,t,n){var r=Object.prototype.hasOwnProperty;n.keys=Object.keys||function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(n);return t},n.values=function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(e[n]);return t},n.merge=function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);return e},n.length=function(e){return n.keys(e).length},n.isEmpty=function(e){return 0==n.length(e)}},{}],44:[function(e,t,n){var i=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=i.exec(e||""),n={},r=14;r--;)n[o[r]]=t[r]||"";return n}},{}],45:[function(e,t,n){(function(l){var f=e("isarray"),p=e("./is-buffer");n.deconstructPacket=function(t){var s=[],n=t.data,r=t;return r.data=function e(t){if(!t)return t;if(p(t)){var n={_placeholder:!0,num:s.length};return s.push(t),n}if(f(t)){for(var r=new Array(t.length),i=0;i<t.length;i++)r[i]=e(t[i]);return r}if("object"==typeof t&&!(t instanceof Date)){for(var o in r={},t)r[o]=e(t[o]);return r}return t}(n),r.attachments=s.length,{packet:r,buffers:s}},n.reconstructPacket=function(t,i){return t.data=function e(t){if(t&&t._placeholder)return i[t.num];if(f(t)){for(var n=0;n<t.length;n++)t[n]=e(t[n]);return t}if(t&&"object"==typeof t){for(var r in t)t[r]=e(t[r]);return t}return t}(t.data),t.attachments=undefined,t},n.removeBlobs=function(t,a){var c=0,u=t;!function e(t,n,r){if(!t)return t;if(l.Blob&&t instanceof Blob||l.File&&t instanceof File){c++;var i=new FileReader;i.onload=function(){r?r[n]=this.result:u=this.result,--c||a(u)},i.readAsArrayBuffer(t)}else if(f(t))for(var o=0;o<t.length;o++)e(t[o],o,t);else if(t&&"object"==typeof t&&!p(t))for(var s in t)e(t[s],s,t)}(u),c||a(u)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":47,isarray:48}],46:[function(e,t,s){var a=e("debug")("socket.io-parser"),c=e("json3"),n=(e("isarray"),e("component-emitter")),o=e("./binary"),r=e("./is-buffer");function i(){}function u(e){var t="",n=!1;return t+=e.type,s.BINARY_EVENT!=e.type&&s.BINARY_ACK!=e.type||(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(n=!0,t+=e.nsp),null!=e.id&&(n&&(t+=",",n=!1),t+=e.id),null!=e.data&&(n&&(t+=","),t+=c.stringify(e.data)),a("encoded %j as %s",e,t),t}function l(){this.reconstructor=null}function f(e){this.reconPack=e,this.buffers=[]}function p(e){return{type:s.ERROR,data:"parser error"}}s.protocol=4,s.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],s.CONNECT=0,s.DISCONNECT=1,s.EVENT=2,s.ACK=3,s.ERROR=4,s.BINARY_EVENT=5,s.BINARY_ACK=6,s.Encoder=i,s.Decoder=l,i.prototype.encode=function(e,t){var n,i;a("encoding packet %j",e),s.BINARY_EVENT==e.type||s.BINARY_ACK==e.type?(n=e,i=t,o.removeBlobs(n,function(e){var t=o.deconstructPacket(e),n=u(t.packet),r=t.buffers;r.unshift(n),i(r)})):t([u(e)])},n(l.prototype),l.prototype.add=function(e){var t;if("string"==typeof e)t=function(e){var t={},n=0;if(t.type=Number(e.charAt(0)),null==s.types[t.type])return p();if(s.BINARY_EVENT==t.type||s.BINARY_ACK==t.type){for(var r="";"-"!=e.charAt(++n)&&(r+=e.charAt(n),n!=e.length););if(r!=Number(r)||"-"!=e.charAt(n))throw new Error("Illegal attachments");t.attachments=Number(r)}if("/"==e.charAt(n+1))for(t.nsp="";++n;){if(","==(o=e.charAt(n)))break;if(t.nsp+=o,n==e.length)break}else t.nsp="/";var i=e.charAt(n+1);if(""!==i&&Number(i)==i){for(t.id="";++n;){var o;if(null==(o=e.charAt(n))||Number(o)!=o){--n;break}if(t.id+=e.charAt(n),n==e.length)break}t.id=Number(t.id)}if(e.charAt(++n))try{t.data=c.parse(e.substr(n))}catch(u){return p()}return a("decoded %s as %j",e,t),t}(e),s.BINARY_EVENT==t.type||s.BINARY_ACK==t.type?(this.reconstructor=new f(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!r(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},l.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},f.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},f.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":45,"./is-buffer":47,"component-emitter":9,debug:10,isarray:48,json3:49}],47:[function(e,n,t){(function(t){n.exports=function(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],48:[function(e,t,n){t.exports=e(32)},{}],49:[function(e,t,r){!function(e){var k,C,T,E={}.toString,t="object"==typeof JSON&&JSON,c="object"==typeof r&&r&&!r.nodeType&&r;c&&t?(c.stringify=t.stringify,c.parse=t.parse):c=e.JSON=t||{};var u=new Date(-0xc782b5b800cec);try{u=-109252==u.getUTCFullYear()&&0===u.getUTCMonth()&&1===u.getUTCDate()&&10==u.getUTCHours()&&37==u.getUTCMinutes()&&6==u.getUTCSeconds()&&708==u.getUTCMilliseconds()}catch(L){}function l(e){if(l[e]!==T)return l[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=l("json-stringify")&&l("json-parse");else{var n,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var i=c.stringify,o="function"==typeof i&&u;if(o){(n=function(){return 1}).toJSON=n;try{o="0"===i(0)&&"0"===i(new Number)&&'""'==i(new String)&&i(E)===T&&i(T)===T&&i()===T&&"1"===i(n)&&"[1]"==i([n])&&"[null]"==i([T])&&"null"==i(null)&&"[null,null,null]"==i([T,E,null])&&i({a:[n,!0,!1,null,"\0\b\n\f\r\t"]})==r&&"1"===i(null,n)&&"[\n 1,\n 2\n]"==i([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==i(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i(new Date(-1))}catch(L){o=!1}}t=o}if("json-parse"==e){var s=c.parse;if("function"==typeof s)try{if(0===s("0")&&!s(!1)){var a=5==(n=s(r)).a.length&&1===n.a[0];if(a){try{a=!s('"\t"')}catch(L){}if(a)try{a=1!==s("01")}catch(L){}if(a)try{a=1!==s("1.")}catch(L){}}}}catch(L){a=!1}t=a}}return l[e]=!!t}if(!l("json")){var f="[object Function]",S="[object Number]",j="[object String]",N="[object Array]",a=l("bug-string-char-index");if(!u)var A=Math.floor,n=[0,31,59,90,120,151,181,212,243,273,304,334],F=function(e,t){return n[t]+365*(e-1970)+A((e-1969+(t=+(1<t)))/4)-A((e-1901+t)/100)+A((e-1601+t)/400)};(k={}.hasOwnProperty)||(k=function(e){var n,t={};return(t.__proto__=null,t.__proto__={toString:1},t).toString!=E?k=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(n=t.constructor,k=function(e){var t=(this.constructor||n).prototype;return e in this&&!(e in t&&this[e]===t[e])}),t=null,k.call(this,e)});var p={"boolean":1,number:1,string:1,undefined:1};if(C=function(e,t){var n,c,r,i=0;for(r in(n=function(){this.valueOf=0}).prototype.valueOf=0,c=new n)k.call(c,r)&&i++;return n=c=null,i?C=2==i?function(e,t){var n,r={},i=E.call(e)==f;for(n in e)i&&"prototype"==n||k.call(r,n)||!(r[n]=1)||!k.call(e,n)||t(n)}:function(e,t){var n,r,i=E.call(e)==f;for(n in e)i&&"prototype"==n||!k.call(e,n)||(r="constructor"===n)||t(n);(r||k.call(e,n="constructor"))&&t(n)}:(c=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],C=function(e,t){var n,r,i,o,s=E.call(e)==f,a=s||"function"==typeof e.constructor||("object"==(o=typeof(i=e)["hasOwnProperty"])?!i.hasOwnProperty:p[o])?k:e.hasOwnProperty;for(n in e)s&&"prototype"==n||!a.call(e,n)||t(n);for(r=c.length;n=c[--r];a.call(e,n)&&t(n));}),C(e,t)},!l("json-stringify")){var d={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},P=function(e,t){return("000000"+(t||0)).slice(-e)},O=function(e){var t,n='"',r=0,i=e.length,o=10<i&&a;for(o&&(t=e.split(""));r<i;r++){var s=e.charCodeAt(r);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=d[s];break;default:if(s<32){n+="\\u00"+P(2,s.toString(16));break}n+=o?t[r]:a?e.charAt(r):e[r]}}return n+'"'},R=function(e,t,n,r,i,o,s){var a,c,u,l,f,p,d,h,m,g,y,v,_,b,w,x;try{a=t[e]}catch(L){}if("object"==typeof a&&a)if("[object Date]"!=(c=E.call(a))||k.call(a,"toJSON"))"function"==typeof a.toJSON&&(c!=S&&c!=j&&c!=N||k.call(a,"toJSON"))&&(a=a.toJSON(e));else if(-1/0<a&&a<1/0){if(F){for(f=A(a/864e5),u=A(f/365.2425)+1970-1;F(u+1,0)<=f;u++);for(l=A((f-F(u,0))/30.42);F(u,l+1)<=f;l++);f=1+f-F(u,l),d=A((p=(a%864e5+864e5)%864e5)/36e5)%24,h=A(p/6e4)%60,m=A(p/1e3)%60,g=p%1e3}else u=a.getUTCFullYear(),l=a.getUTCMonth(),f=a.getUTCDate(),d=a.getUTCHours(),h=a.getUTCMinutes(),m=a.getUTCSeconds(),g=a.getUTCMilliseconds();a=(u<=0||1e4<=u?(u<0?"-":"+")+P(6,u<0?-u:u):P(4,u))+"-"+P(2,l+1)+"-"+P(2,f)+"T"+P(2,d)+":"+P(2,h)+":"+P(2,m)+"."+P(3,g)+"Z"}else a=null;if(n&&(a=n.call(t,e,a)),null===a)return"null";if("[object Boolean]"==(c=E.call(a)))return""+a;if(c==S)return-1/0<a&&a<1/0?""+a:"null";if(c==j)return O(""+a);if("object"==typeof a){for(b=s.length;b--;)if(s[b]===a)throw TypeError();if(s.push(a),y=[],w=o,o+=i,c==N){for(_=0,b=a.length;_<b;_++)v=R(_,a,n,r,i,o,s),y.push(v===T?"null":v);x=y.length?i?"[\n"+o+y.join(",\n"+o)+"\n"+w+"]":"["+y.join(",")+"]":"[]"}else C(r||a,function(e){var t=R(e,a,n,r,i,o,s);t!==T&&y.push(O(e)+":"+(i?" ":"")+t)}),x=y.length?i?"{\n"+o+y.join(",\n"+o)+"\n"+w+"}":"{"+y.join(",")+"}":"{}";return s.pop(),x}};c.stringify=function(e,t,n){var r,i,o,s;if("function"==typeof t||"object"==typeof t&&t)if((s=E.call(t))==f)i=t;else if(s==N){o={};for(var a,c=0,u=t.length;c<u;a=t[c++],((s=E.call(a))==j||s==S)&&(o[a]=1));}if(n)if((s=E.call(n))==S){if(0<(n-=n%1))for(r="",10<n&&(n=10);r.length<n;r+=" ");}else s==j&&(r=n.length<=10?n:n.slice(0,10));return R("",((a={})[""]=e,a),i,o,r,"",[])}}if(!l("json-parse")){var h,m,g=String.fromCharCode,y={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},v=function(){throw h=m=null,SyntaxError()},i=function(){for(var e,t,n,r,i,o=m,s=o.length;h<s;)switch(i=o.charCodeAt(h)){case 9:case 10:case 13:case 32:h++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=a?o.charAt(h):o[h],h++,e;case 34:for(e="@",h++;h<s;)if((i=o.charCodeAt(h))<32)v();else if(92==i)switch(i=o.charCodeAt(++h)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=y[i],h++;break;case 117:for(t=++h,n=h+4;h<n;h++)48<=(i=o.charCodeAt(h))&&i<=57||97<=i&&i<=102||65<=i&&i<=70||v();e+=g("0x"+o.slice(t,h));break;default:v()}else{if(34==i)break;for(i=o.charCodeAt(h),t=h;32<=i&&92!=i&&34!=i;)i=o.charCodeAt(++h);e+=o.slice(t,h)}if(34==o.charCodeAt(h))return h++,e;v();default:if(t=h,45==i&&(r=!0,i=o.charCodeAt(++h)),48<=i&&i<=57){for(48==i&&48<=(i=o.charCodeAt(h+1))&&i<=57&&v(),r=!1;h<s&&48<=(i=o.charCodeAt(h))&&i<=57;h++);if(46==o.charCodeAt(h)){for(n=++h;n<s&&48<=(i=o.charCodeAt(n))&&i<=57;n++);n==h&&v(),h=n}if(101==(i=o.charCodeAt(h))||69==i){for(43!=(i=o.charCodeAt(++h))&&45!=i||h++,n=h;n<s&&48<=(i=o.charCodeAt(n))&&i<=57;n++);n==h&&v(),h=n}return+o.slice(t,h)}if(r&&v(),"true"==o.slice(h,h+4))return h+=4,!0;if("false"==o.slice(h,h+5))return h+=5,!1;if("null"==o.slice(h,h+4))return h+=4,null;v()}return"$"},o=function(e){var t,n;if("$"==e&&v(),"string"==typeof e){if("@"==(a?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=i());n||(n=!0))n&&(","==e?"]"==(e=i())&&v():v()),","==e&&v(),t.push(o(e));return t}if("{"==e){for(t={};"}"!=(e=i());n||(n=!0))n&&(","==e?"}"==(e=i())&&v():v()),","!=e&&"string"==typeof e&&"@"==(a?e.charAt(0):e[0])&&":"==i()||v(),t[e.slice(1)]=o(i());return t}v()}return e},s=function(e,t,n){var r=_(e,t,n);r===T?delete e[t]:e[t]=r},_=function(e,t,n){var r,i=e[t];if("object"==typeof i&&i)if(E.call(i)==N)for(r=i.length;r--;)s(i,r,n);else C(i,function(e){s(i,e,n)});return n.call(e,t,i)};c.parse=function(e,t){var n,r;return h=0,m=""+e,n=o(i()),"$"!=i()&&v(),h=m=null,t&&E.call(t)==f?_(((r={})[""]=n,r),"",t):n}}}}(this)},{}],50:[function(e,t,n){t.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},{}]},{},[1])(1)}),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.imNotice=t()}("undefined"!=typeof window?window:this,function(){var e={debug:!1,ipad:navigator.userAgent.match(/(iPad)/),resetLock:!1,ieVersion:10,appName:window.KFZ.isMobileSite?"MOBILE_KFZ_WEB_NOTICE":"WEB_KFZ_WEB_NOTICE",settings:{},permission:{},userId:"",socket:null,channel:"IM_NOTICE_",clientId:"",socketId:"",unreadNum:0,socketConf:{reconnection:!0,timeout:2e4,reconnectionAttempts:100,reconnectionDelay:15e3,reconnectionDelayMax:3e4,"force new connection":!1},template:['<div id="ImNoticeWin" class="imNotice-win">','<div class="item back-top"><span class="iconfont icon-fanhuidingbu"></span><div class="text">返回顶部</div></div>','<div class="item feed-back"><span class="iconfont icon-fankui1"></span><div class="text">用户反馈</div></div>','<div class="item cart-list"><span class="iconfont icon-yijiagouwuche"></span><span class="cart-list-num"></span><div class="text">购物车</div></div>','<div class="item im-notice"><span class="iconfont icon-xinxi1"></span><div class="text">消&nbsp;&nbsp;息</div></div>','<div class="item im-broadcast"><span class="iconfont icon-guangbo"></span><div class="text">广&nbsp;&nbsp;播</div></div>','<div class="im-notice-player"><audio preload="metadata" src=""></audio></div>',"</div>"],loopVisitorTimer:null,init:function(e){this.ieVersion=this.checkBrowserVersion(),this.contactManagerConf(),this.imNoticePageInit(),this.bindResetEvent(),this.renderImNoticeWin(),this.getSocketServerAddress(),this.loopVisitor()},contactManagerConf:function(){var t=this;window.KFZ.tools.contactManager.on("cartNumNotice",function(e){t.cartNumShow(e)},{from:"消息 cartNumNotice ",description:"购物车数量变化 -> 更新购物车数量 contactManagerConf"}),window.KFZ.tools.contactManager.on("imNoticePageInit",function(){t.imNoticePageInit()},{from:"消息 imNotice ",description:"页面消息初始化 -> 更新在线状态 绑定点击事件 contactManagerConf"}),window.KFZ.tools.contactManager.on("imNoticeConnect",function(){t.getSocketServerAddress()},{from:"消息 imNotice ",description:"页面消息连接 -> socket连接 contactManagerConf"})},imNoticePageInit:function(){this.rendOnlineState(),this.bindPageEvents()},rendOnlineState:function(){var t=[],e=window.KFZ.site.message+"Interface/User/getUserRealOnlineState",n=$(".imNotice-message");if(n.each(function(){var e=$(this).attr("userid");0<e&&t.push(e)}),0==t.length)return!1;3<t.length&&(e=window.KFZ.site.message+"Interface/User/getUserOnlineState"),$.ajax({url:e,type:"get",dataType:"jsonp",jsonp:"callback",data:{userIds:t.join(",")},success:function(t){1==t.isSuccess&&t.responseData&&n.each(function(){var e=$(this),n=e.attr("userid"),r=!1;$.each(t.responseData,function(e,t){if(t==n)return!(r=!0)}),r?e.removeClass("off-line").addClass("on-line"):e.removeClass("on-line").addClass("off-line")})}})},bindPageEvents:function(){var s=this;$(".imNotice-message").on("click",function(){var e=$(this),t=e.attr("type");if("talk"===t){var n=e.attr("userid"),r=e.attr("sendreferer"),i=e.attr("infourl"),o="";0<n&&(r&&i&&(o="&sendReferer="+r+"&url="+i),s.openMsgWin(window.KFZ.site.message+"?talkId="+n+o))}else"customerService"===t?s.openMsgWin(window.KFZ.site.message+"#customerService"):s.openMsgWin()})},getSocketServerAddress:function(){var t=this;if(null!==this.socket&&!0===this.socket.connected)return this.printLog({title:"socket检测",from:"getSocketServerAddress",description:" socket 连接已否存在"}),!1;$.ajax({url:window.KFZ.site.message+"Interface/User/initNotice/",type:"get",data:{appName:this.appName},dataType:"jsonp",jsonp:"callback",success:function(e){!0===e.status&&t.configure(e)}})},configure:function(e){if(this.settings=e.result.settings||{},this.permission=e.result.permission||{},this.userId=e.result.userId||"",this.showImNotice(),this.handleNotice({result:{cmd:"unreadMessage",message:e.result}}),this.ieVersion<8)this.noticePoll();else{var t=e.result.serverAddress;this.connectNoticeService(t)}},renderImNoticeWin:function(){$("#ImNoticeWin").remove();var e=this;$("body").append(this.template.join(""));var t=$("#ImNoticeWin");t.find(".back-top").on("click",function(){0===$(document).scrollTop()||$("html,body").animate({scrollTop:0},400)}),t.find(".feed-back").on("click",function(){window.open(window.KFZ.site.help+"feedback/?returnUrl="+window.location.href)}),t.find(".im-notice").on("click",function(){e.openMsgWin()}),t.find(".im-broadcast").on("click",function(){window.open(window.KFZ.site.message+"Index/myMessage/#inbox"),$(this).hide()}),t.find(".cart-list").on("click",function(){window.open(window.KFZ.site.cart+"list")}),$(window).scroll(function(){$(document).scrollTop()>$(window).height()?t.find(".back-top").fadeIn():t.find(".back-top").fadeOut()})},showImNotice:function(){$("#ImNoticeWin").find("audio").attr("src",window.KFZ.site.message+"images/voice/"+this.settings.voice+".mp3"),$("#ImNoticeWin").find(".im-notice").show()},showCartList:function(){$("#ImNoticeWin").find(".cart-list").show()},cartNumShow:function(e){var t="购物车";return 0<e?(t="去购物车结算",99<e?$("#ImNoticeWin").find(".cart-list-num").addClass("more").html("•••").fadeIn():$("#ImNoticeWin").find(".cart-list-num").removeClass("more").html(e).fadeIn()):$("#ImNoticeWin").find(".cart-list-num").removeClass("more").html("").hide(),$("#ImNoticeWin").find(".cart-list").find(".text").html(t),this},noticePoll:function(){var t=this;setInterval(function(){$.ajax({url:window.KFZ.site.message+"/Interface/User/getUnreadNum",type:"get",data:{appName:this.appName},dataType:"jsonp",jsonp:"callback",success:function(e){t.unreadNum=e,t.numShow()}})},3e4)},connectNoticeService:function(e){var t=this;this.socket=window.io(e,this.socketConf),this.socket.on("connecting",function(){t.printLog({title:"connecting",from:"connectNoticeService",description:"正在连接"})}),this.socket.on("connect",function(){t.printLog({title:"connect",from:"connectNoticeService",description:"连接成功"})}),this.socket.on("connect_failed",function(){t.printLog({title:"connect_failed",from:"connectNoticeService",description:"连接失败"})}),this.socket.on("disconnect",function(){t.resetLock=!1,t.printLog({title:"disconnect",from:"connectNoticeService",description:"断开连接"})}),this.socket.on("reconnect_attempt",function(){t.printLog({title:"reconnect_attempt",from:"connectNoticeService",description:"准备重连"})}),this.socket.on("reconnecting",function(){t.printLog({title:"reconnecting",from:"connectNoticeService",description:"正在重连"})}),this.socket.on("reconnect",function(){t.printLog({title:"reconnect",from:"connectNoticeService",description:"成功重连"})}),this.socket.on("reconnect_failed",function(){t.printLog({title:"reconnect_failed",from:"connectNoticeService",description:"重连失败"})}),this.socket.on("reconnect_error",function(){t.printLog({title:"reconnect_error",from:"connectNoticeService",description:"重连错误"})}),this.socket.on("error",function(e){t.printLog({title:"error",from:"connectNoticeService",description:"未知错误 "+JSON.stringify(e)})}),this.socket.on("connected",function(e){t.clientId=e.clientId,t.socketId=e.socketId,t.socket.on(t.channel+e.userId,function(e){t.handleNotice(e)}),t.socket.on("BROADCAST",function(){t.handleNotice({result:{cmd:"BROADCAST",message:""}})}),t.printLog({title:"connected",from:"connectNoticeService",description:"连接完成 监听服务端消息",data:e})})},handleNotice:function(e){var t=e.result;switch(t.cmd){case"unreadMessage":t.message.unreadNum,this.unreadNum,this.unreadNum=t.message.unreadNum,this.numShow().msgNotice(),"1"==this.settings.openVoice&&t.message.socketId==this.socketId&&this.playVoice(),this.printLog({title:"unreadMessage",from:"handleNotice",description:"未读消息通知",data:t});break;case"kick":"logout"==t.message.cmd&&(this.socket&&this.socket.close(),$("#ImNoticeWin").find(".im-notice").hide(),$("#ImNoticeWin").find(".im-broadcast").hide()),this.printLog({title:"kick",from:"handleNotice",description:"踢出通知",data:t});break;case"BROADCAST":this.broadcastShow(),"1"==this.settings.openVoice&&t.message.socketId==this.socketId&&this.playVoice(),this.printLog({title:"BROADCAST",from:"handleNotice",description:"系统通知",data:t})}},numShow:function(){var e="消&nbsp;&nbsp;息";return 0<this.unreadNum?($("#ImNoticeWin").find(".im-notice").addClass("num-show"),e=99<this.unreadNum?"99+新消息":this.unreadNum+"&nbsp;新消息",$("#ImNoticeWin").find(".im-notice").find(".text").html(e)):$("#ImNoticeWin").find(".im-notice").removeClass("num-show").find(".text").html(e),this},broadcastShow:function(){$("#ImNoticeWin").find(".im-broadcast").fadeIn()},msgNotice:function(){window.KFZ.tools.contactManager.run("msgNotice",{param:this.unreadNum,from:"消息 imNotice ",description:"未读消息数量发生变化"})},playVoice:function(){if(this.ieVersion<9){var e=window.KFZ.site.message+"images/voice/"+this.settings.voice+".swf",t='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="';t+='https://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" width="0" height="0" id="Untitled-1" align="middle">\n',t+='<param name="allowScriptAccess" value="sameDomain" />\n',t+='<param name="movie" value="'+e+'" />\n',t+='<param name="quality" value="high" />\n',t+='<param name="bgcolor" value="#ffffff" />\n',t+='<embed src="'+e+'" quality="high" loop="false" bgcolor="#ffffff" width="0" height="0" name="mymovie" align="middle" ',t+='allowScriptAccess="sameDomain" type="application/x-shockwave-flash" pluginspage="https://www.macromedia.com/go/getflashplayer" />\n',t+="</object>",$("#ImNoticeWin").find(".im-notice-player").html(t)}else $("#ImNoticeWin").find("audio")[0].play()},bindResetEvent:function(){var e,t,n=this;"undefined"!=typeof document.hidden?(e="hidden",t="visibilitychange"):"undefined"!=typeof document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),"undefined"==typeof document.addEventListener&&"undefined"==typeof document[e]||document.addEventListener(t,function(){document[e]||n.socketReconnect()},!1),$(window).focus(this.socketReconnect),$(window).mouseover(this.socketReconnect)},socketReconnect:function(){this.socket&&0==this.socket.connected&&!this.resetLock&&(this.resetLock=!0,this.socketConf["force new connection"]=!0,this.getSocketServerAddress())},checkBrowserVersion:function(){if(0<=window.navigator.userAgent.indexOf("MSIE")&&window.navigator.userAgent.indexOf("Opera")<0){var e=window.navigator.appName,t=window.navigator.appVersion.split(";")[1].replace(/[ ]/g,"");return"Microsoft Internet Explorer"==e&&"MSIE6.0"==t?6:"Microsoft Internet Explorer"==e&&"MSIE7.0"==t?7:"Microsoft Internet Explorer"==e&&"MSIE8.0"==t?8:"Microsoft Internet Explorer"==e&&"MSIE9.0"==t?9:10}return 10},openMsgWin:function(e){var t=e||window.KFZ.site.message;return window.open(t,"_blank","toolbar=no, location=no, top=0, left=0, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=1060, height=722",!0),!1},loopVisitor:function(){function e(){$.ajax({url:window.KFZ.site.message+"Interface/User/loopVisitor/",type:"get",dataType:"jsonp",jsonp:"callback",data:{device:"WEB",appName:"KFZ_WEB"},success:function(e){}})}clearInterval(this.loopVisitorTimer),e(),this.loopVisitorTimer=setInterval(function(){e()},18e4)},printLog:function(e){this.debug&&window.console&&(window.console.group(e.title),window.console.log("描述："+(e.description||"无描述信息")),window.console.log("接收到的数据：",e.data||"未接收到数据或未打印数据"),window.console.log("时间："+(new Date).toLocaleString()),window.console.log("来源："+e.from||"未知来源"),window.console.groupEnd())}};return e.init(),window.imNotice=e}),function(){var i=window.location.protocol+"//"+window.location.host+"/";!/https:\/\//.test(i)&&setTimeout(function(){/kongfz\.cn/i.test(i)?function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?e9887cc33a1d80028a23ab3a80d16a5a";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}():/kongfz\.com/i.test(i)?(function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?bca7840de7b518b3c5e6c6d73ca2662c";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),/shequ\.kongfz\.com/i.test(i)&&function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?f8663b704cbf53aa8db7ee7ebfa7cf70";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?33be6c04e0febc7531a1315c9594b136";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()):/gujiushu\.com/i.test(i)&&function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?f8663b704cbf53aa8db7ee7ebfa7cf70";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();var e=encodeURIComponent(location.href),t=encodeURIComponent(document.referrer),n=window.screen.width,r=window.screen.height;(new Image).src="http://tj.kongfz.com/web/collect/1.gif?resolution="+n+"x"+r+"&self_page="+e+"&ref_page="+t},1e3)}(),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Promise=e()}}(function(){return function o(s,a,c){function u(t,e){if(!a[t]){if(!s[t]){var n="function"==typeof _dereq_&&_dereq_;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=a[t]={exports:{}};s[t][0].call(i.exports,function(e){return u(s[t][1][e]||e)},i,i.exports,o,s,a,c)}return a[t].exports}for(var l="function"==typeof _dereq_&&_dereq_,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,n){"use strict";t.exports=function(e){var r=e._SomePromiseArray;function t(e){var t=new r(e),n=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),n}e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(e,t,n){"use strict";var r;try{throw new Error}catch(f){r=f}var i=e("./schedule"),o=e("./queue"),s=e("./util");function a(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new o(16),this._normalQueue=new o(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=i}function c(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function u(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function l(e){this._normalQueue._pushOne(e),this._queueTick()}a.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},a.prototype.hasCustomScheduler=function(){return this._customScheduler},a.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},a.prototype.disableTrampolineIfNecessary=function(){s.hasDevTools&&(this._trampolineEnabled=!1)},a.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},a.prototype.fatalError=function(e,t){t?(process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),process.exit(2)):this.throwLater(e)},a.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(f){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},s.hasDevTools?(a.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?c.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},a.prototype.invoke=function(e,t,n){this._trampolineEnabled?u.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},a.prototype.settlePromises=function(e){this._trampolineEnabled?l.call(this,e):this._schedule(function(){e._settlePromises()})}):(a.prototype.invokeLater=c,a.prototype.invoke=u,a.prototype.settlePromises=l),a.prototype._drainQueue=function(e){for(;0<e.length();){var t=e.shift();if("function"==typeof t){var n=e.shift(),r=e.shift();t.call(n,r)}else t._settlePromises()}},a.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},a.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},a.prototype._reset=function(){this._isTickUsed=!1},t.exports=a,t.exports.firstLineError=r},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(o,s,a,c){var u=!1,n=function(e,t){this._reject(t)},l=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(n,n,null,this,e)},f=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},p=function(e,t){t.promiseRejectionQueued||this._reject(e)};o.prototype.bind=function(e){u||(u=!0,o.prototype._propagateFrom=c.propagateFromFunction(),o.prototype._boundValue=c.boundValueFunction());var t=a(e),n=new o(s);n._propagateFrom(this,1);var r=this._target();if(n._setBoundTo(t),t instanceof o){var i={promiseRejectionQueued:!1,promise:n,target:r,bindingPromise:t};r._then(s,l,undefined,n,i),t._then(f,p,undefined,n,i),n._setOnCancel(t)}else n._resolveCallback(r);return n},o.prototype._setBoundTo=function(e){e!==undefined?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},o.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},o.bind=function(e,t){return o.resolve(t).bind(e)}}},{}],4:[function(e,t,n){"use strict";var r;"undefined"!=typeof Promise&&(r=Promise);var i=e("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(e){}return i},t.exports=i},{"./promise":22}],5:[function(e,t,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}t.exports=function(i){var o=e("./util"),r=o.canEvaluate;function n(e){return function(e,t){var n;if(null!=e&&(n=e[t]),"function"!=typeof n){var r="Object "+o.classString(e)+" has no method '"+o.toString(t)+"'";throw new i.TypeError(r)}return n}(e,this.pop()).apply(e,this)}function s(e){return e[this]}function a(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}o.isIdentifier,i.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(n,undefined,undefined,t,undefined)},i.prototype.get=function(e){var t;if("number"==typeof e)t=a;else if(r){var n=(void 0)(e);t=null!==n?n:s}else t=s;return this._then(t,undefined,undefined,e,undefined)}}},{"./util":36}],6:[function(c,e,t){"use strict";e.exports=function(e,t,n,r){var i=c("./util"),o=i.tryCatch,s=i.errorObj,a=e._async;e.prototype["break"]=e.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===undefined||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),a.invoke(this._cancelPromises,this,undefined))},e.prototype._cancelPromises=function(){0<this._length()&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=undefined},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(e,t){if(i.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(e!==undefined)if("function"==typeof e){if(!t){var r=o(e).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),a.throwLater(r.e))}}else e._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),a.invoke(this._doInvokeOnCancel,this,e)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(f){var p=e("./util"),d=e("./es5").keys,h=p.tryCatch,m=p.errorObj;return function(c,u,l){return function(e){var t=l._boundValue();e:for(var n=0;n<c.length;++n){var r=c[n];if(r===Error||null!=r&&r.prototype instanceof Error){if(e instanceof r)return h(u).call(t,e)}else if("function"==typeof r){var i=h(r).call(t,e);if(i===m)return i;if(i)return h(u).call(t,e)}else if(p.isObject(e)){for(var o=d(r),s=0;s<o.length;++s){var a=o[s];if(r[a]!=e[a])continue e}return h(u).call(t,e)}}return f}}}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(o){var s=!1,n=[];function a(){this._trace=new a.CapturedTrace(c())}function c(){var e=n.length-1;return 0<=e?n[e]:undefined}return o.prototype._promiseCreated=function(){},o.prototype._pushContext=function(){},o.prototype._popContext=function(){return null},o._peekContext=o.prototype._peekContext=function(){},a.prototype._pushContext=function(){this._trace!==undefined&&(this._trace._promiseCreated=null,n.push(this._trace))},a.prototype._popContext=function(){if(this._trace!==undefined){var e=n.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},a.CapturedTrace=null,a.create=function(){if(s)return new a},a.deactivateLongStackTraces=function(){},a.activateLongStackTraces=function(){var e=o.prototype._pushContext,t=o.prototype._popContext,n=o._peekContext,r=o.prototype._peekContext,i=o.prototype._promiseCreated;a.deactivateLongStackTraces=function(){o.prototype._pushContext=e,o.prototype._popContext=t,o._peekContext=n,o.prototype._peekContext=r,o.prototype._promiseCreated=i,s=!1},s=!0,o.prototype._pushContext=a.prototype._pushContext,o.prototype._popContext=a.prototype._popContext,o._peekContext=o.prototype._peekContext=c,o.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},a}},{}],9:[function(J,e,t){"use strict";e.exports=function(s,r){var i,o,a,n=s._getDomain,c=s._async,u=J("./errors").Warning,l=J("./util"),f=l.canAttachTrace,p=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,h=/\((?:timers\.js):\d+:\d+\)/,m=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,d=null,g=null,y=!1,e=!(0==l.env("BLUEBIRD_DEBUG")),t=!(0==l.env("BLUEBIRD_WARNINGS")||!e&&!l.env("BLUEBIRD_WARNINGS")),v=!(0==l.env("BLUEBIRD_LONG_STACK_TRACES")||!e&&!l.env("BLUEBIRD_LONG_STACK_TRACES")),_=0!=l.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(t||!!l.env("BLUEBIRD_W_FORGOTTEN_RETURN"));s.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},s.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}},s.prototype._notifyUnhandledRejectionIsHandled=function(){H("rejectionHandled",i,undefined,this)},s.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},s.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},s.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),H("unhandledRejection",o,e,this)}},s.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},s.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},s.prototype._isUnhandledRejectionNotified=function(){return 0<(262144&this._bitField)},s.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},s.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},s.prototype._isRejectionUnhandled=function(){return 0<(1048576&this._bitField)},s.prototype._warn=function(e,t,n){return D(e,t,n||this)},s.onPossiblyUnhandledRejection=function(e){var t=n();o="function"==typeof e?null===t?e:l.domainBind(t,e):undefined},s.onUnhandledRejectionHandled=function(e){var t=n();i="function"==typeof e?null===t?e:l.domainBind(t,e):undefined};var b=function(){};s.longStackTraces=function(){if(c.haveItemsQueued()&&!Z.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Z.longStackTraces&&U()){var e=s.prototype._captureStackTrace,t=s.prototype._attachExtraTrace;Z.longStackTraces=!0,b=function(){if(c.haveItemsQueued()&&!Z.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");s.prototype._captureStackTrace=e,s.prototype._attachExtraTrace=t,r.deactivateLongStackTraces(),c.enableTrampoline(),Z.longStackTraces=!1},s.prototype._captureStackTrace=L,s.prototype._attachExtraTrace=I,r.activateLongStackTraces(),c.disableTrampolineIfNecessary()}},s.hasLongStackTraces=function(){return Z.longStackTraces&&U()};var w=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return l.global.dispatchEvent(e),function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!l.global.dispatchEvent(n)}}return"function"==typeof Event?(e=new Event("CustomEvent"),l.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,!l.global.dispatchEvent(n)}):((e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),l.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!l.global.dispatchEvent(n)})}catch(t){}return function(){return!1}}(),x=l.isNode?function(){return process.emit.apply(process,arguments)}:l.global?function(e){var t="on"+e.toLowerCase(),n=l.global[t];return!!n&&(n.apply(l.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function k(e,t){return{promise:t}}var C={promiseCreated:k,promiseFulfilled:k,promiseRejected:k,promiseResolved:k,promiseCancelled:k,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:k},T=function(e){var t=!1;try{t=x.apply(null,arguments)}catch(i){c.throwLater(i),t=!0}var n=!1;try{n=w(e,C[e].apply(null,arguments))}catch(i){c.throwLater(i),n=!0}return n||t};function E(){return!1}function S(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+l.toString(e));r._attachCancellationCallback(e)})}catch(o){return o}}function j(e){if(!this._isCancellable())return this;var t=this._onCancel();t!==undefined?l.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function N(){return this._onCancelField}function A(e){this._onCancelField=e}function F(){this._cancellationParent=undefined,this._onCancelField=undefined}function P(e,t){if(0!=(1&t)){var n=(this._cancellationParent=e)._branchesRemainingToCancel;n===undefined&&(n=0),e._branchesRemainingToCancel=n+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}s.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?s.longStackTraces():!e.longStackTraces&&s.hasLongStackTraces()&&b()),"warnings"in e){var t=e.warnings;Z.warnings=!!t,_=Z.warnings,l.isObject(t)&&"wForgottenReturn"in t&&(_=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!Z.cancellation){if(c.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");s.prototype._clearCancellationData=F,s.prototype._propagateFrom=P,s.prototype._onCancel=N,s.prototype._setOnCancel=A,s.prototype._attachCancellationCallback=j,s.prototype._execute=S,O=P,Z.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!Z.monitoring?(Z.monitoring=!0,s.prototype._fireEvent=T):!e.monitoring&&Z.monitoring&&(Z.monitoring=!1,s.prototype._fireEvent=E)),s},s.prototype._fireEvent=E,s.prototype._execute=function(e,t,n){try{e(t,n)}catch(i){return i}},s.prototype._onCancel=function(){},s.prototype._setOnCancel=function(e){},s.prototype._attachCancellationCallback=function(e){},s.prototype._captureStackTrace=function(){},s.prototype._attachExtraTrace=function(){},s.prototype._clearCancellationData=function(){},s.prototype._propagateFrom=function(e,t){};var O=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function R(){var e=this._boundTo;return e!==undefined&&e instanceof s?e.isFulfilled()?e.value():undefined:e}function L(){this._trace=new K(this._peekContext())}function I(e,t){if(f(e)){var n=this._trace;if(n!==undefined&&t&&(n=n._parent),n!==undefined)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=q(e);l.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),l.notEnumerableProp(e,"__stackCleaned__",!0)}}}function D(e,t,n){if(Z.warnings){var r,i=new u(e);if(t)n._attachExtraTrace(i);else if(Z.longStackTraces&&(r=s._peekContext()))r.attachExtraTrace(i);else{var o=q(i);i.stack=o.message+"\n"+o.stack.join("\n")}T("warning",i)||M(i,"",!0)}}function B(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||d.test(r),o=i&&$(r);i&&!o&&(y&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function q(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&0<t.length?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||d.test(r))break}return 0<n&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:B(t)}}function M(e,t,n){if("undefined"!=typeof console){var r;if(l.isObject(e)){var i=e.stack;r=t+g(i,e)}else r=t+String(e);"function"==typeof a?a(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function H(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(a){c.throwLater(a)}"unhandledRejection"===e?T(e,n,r)||i||M(n,"Unhandled rejection "):T(e,r)}function W(e){var t,n;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{if(t=e&&"function"==typeof e.toString?e.toString():l.toString(e),/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(r){}0===t.length&&(t="(empty array)")}return"(<"+((n=t).length<41?n:n.substr(0,38)+"...")+">, no stack trace)"}function U(){return"function"==typeof X}var $=function(){return!1},z=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function V(e){var t=e.match(z);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function K(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(e===undefined?0:e._length);X(this,K),32<t&&this.uncycle()}l.inherits(K,Error),(r.CapturedTrace=K).prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,i=this;i!==undefined;++r)t.push(i),i=i._parent;for(r=(e=this._length=r)-1;0<=r;--r){var o=t[r].stack;n[o]===undefined&&(n[o]=r)}for(r=0;r<e;++r){var s=n[t[r].stack];if(s!==undefined&&s!==r){0<s&&(t[s-1]._parent=undefined,t[s-1]._length=1),t[r]._parent=undefined,t[r]._length=1;var a=0<r?t[r-1]:this;s<e-1?(a._parent=t[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=undefined,a._length=1);for(var c=a._length+1,u=r-2;0<=u;--u)t[u]._length=c,c++;return}}}},K.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=q(e),n=t.message,r=[t.stack],i=this;i!==undefined;)r.push(B(i.stack.split("\n"))),i=i._parent;!function(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,o=t[i],s=-1,a=r.length-1;0<=a;--a)if(r[a]===o){s=a;break}for(a=s;0<=a;--a){var c=r[a];if(t[i]!==c)break;t.pop(),i--}t=r}}(r),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(r),l.notEnumerableProp(e,"stack",function(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}(n,r)),l.notEnumerableProp(e,"__stackCleaned__",!0)}};var X=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:t.name!==undefined&&t.message!==undefined?t.toString():W(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,d=e,g=t;var n=Error.captureStackTrace;return $=function(e){return p.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&0<=i.stack.split("\n")[0].indexOf("stackDetection@"))return d=/@/,g=t,y=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(a){r="stack"in a}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(g=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||t.name===undefined||t.message===undefined?W(t):t.toString()},null):(d=e,g=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(a){e.stack=a.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(a=function(e){console.warn(e)},l.isNode&&process.stderr.isTTY?a=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:l.isNode||"string"!=typeof(new Error).stack||(a=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var Z={warnings:t,longStackTraces:!1,cancellation:!1,monitoring:!1};return v&&s.longStackTraces(),{longStackTraces:function(){return Z.longStackTraces},warnings:function(){return Z.warnings},cancellation:function(){return Z.cancellation},monitoring:function(){return Z.monitoring},propagateFromFunction:function(){return O},boundValueFunction:function(){return R},checkForgottenReturns:function(e,t,n,r,i){if(e===undefined&&null!==t&&_){if(i!==undefined&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",s="";if(t._trace){for(var a=t._trace.stack.split("\n"),c=B(a),u=c.length-1;0<=u;--u){var l=c[u];if(!h.test(l)){var f=l.match(m);f&&(o="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(0<c.length){var p=c[0];for(u=0;u<a.length;++u)if(a[u]===p){0<u&&(s="\n"+a[u-1]);break}}}var d="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;r._warn(d,!0,t)}},setBounds:function(e,t){if(U()){for(var n,r,i=e.stack.split("\n"),o=t.stack.split("\n"),s=-1,a=-1,c=0;c<i.length;++c)if(u=V(i[c])){n=u.fileName,s=u.line;break}for(c=0;c<o.length;++c){var u;if(u=V(o[c])){r=u.fileName,a=u.line;break}}s<0||a<0||!n||!r||n!==r||a<=s||($=function(e){if(p.test(e))return!0;var t=V(e);return!!(t&&t.fileName===n&&s<=t.line&&t.line<=a)})}},warn:D,deprecated:function(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),D(n)},CapturedTrace:K,fireDomEvent:w,fireGlobalEvent:x}}},{"./errors":12,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(n){function r(){return this.value}function i(){throw this.reason}n.prototype["return"]=n.prototype.thenReturn=function(e){return e instanceof n&&e.suppressUnhandledRejections(),this._then(r,undefined,undefined,{value:e},undefined)},n.prototype["throw"]=n.prototype.thenThrow=function(e){return this._then(i,undefined,undefined,{reason:e},undefined)},n.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(undefined,i,undefined,{reason:e},undefined);var t=arguments[1];return this.caught(e,function(){throw t})},n.prototype.catchReturn=function(e){if(arguments.length<=1)return e instanceof n&&e.suppressUnhandledRejections(),this._then(undefined,r,undefined,{value:e},undefined);var t=arguments[1];return t instanceof n&&t.suppressUnhandledRejections(),this.caught(e,function(){return t})}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,n){var r=e.reduce,t=e.all;function i(){return t(this)}e.prototype.each=function(e){return r(this,e,n,0)._then(i,undefined,undefined,this,undefined)},e.prototype.mapSeries=function(e){return r(this,e,n,n)},e.each=function(e,t){return r(e,t,n,0)._then(i,undefined,undefined,e,undefined)},e.mapSeries=function(e,t){return r(e,t,n,n)}}},{}],12:[function(e,t,n){"use strict";var r,i,o=e("./es5"),s=o.freeze,a=e("./util"),c=a.inherits,u=a.notEnumerableProp;function l(t,n){function r(e){if(!(this instanceof r))return new r(e);u(this,"message","string"==typeof e?e:n),u(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(r,Error),r}var f=l("Warning","warning"),p=l("CancellationError","cancellation error"),d=l("TimeoutError","timeout error"),h=l("AggregateError","aggregate error");try{r=TypeError,i=RangeError}catch(b){r=l("TypeError","type error"),i=l("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<m.length;++g)"function"==typeof Array.prototype[m[g]]&&(h.prototype[m[g]]=Array.prototype[m[g]]);o.defineProperty(h.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),h.prototype.isOperational=!0;var y=0;function v(e){if(!(this instanceof v))return new v(e);u(this,"name","OperationalError"),u(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(u(this,"message",e.message),u(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}h.prototype.toString=function(){var e=Array(4*y+1).join(" "),t="\n"+e+"AggregateError of:\n";y++,e=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];t+=(r=i.join("\n"))+"\n"}return y--,t},c(v,Error);var _=Error.__BluebirdErrorTypes__;_||(_=s({CancellationError:p,TimeoutError:d,OperationalError:v,RejectionError:v,AggregateError:h}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:_,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:r,RangeError:i,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){"use strict";return this===undefined}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t};t.exports={isArray:function(e){try{return"[object Array]"===o.call(e)}catch(t){return!1}},keys:a,names:a,defineProperty:function(e,t,n){return e[t]=n.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(t){return s}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,r){var i=e.map;e.prototype.filter=function(e,t){return i(this,e,t,r)},e.filter=function(e,t,n){return i(e,t,n,r)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(a,s,c){var u=e("./util"),l=a.CancellationError,f=u.errorObj,p=e("./catch_filter")(c);function i(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function d(e){this.finallyHandler=e}function h(e,t){return null!=e.cancelPromise&&(1<arguments.length?e.cancelPromise._reject(t):e.cancelPromise._cancel(),!(e.cancelPromise=null))}function m(){return y.call(this,this.promise._target()._settledValue())}function g(e){if(!h(this,e))return f.e=e,f}function y(e){var t=this.promise,n=this.handler;if(!this.called){this.called=!0;var r=this.isFinallyHandler()?n.call(t._boundValue()):n.call(t._boundValue(),e);if(r===c)return r;if(r!==undefined){t._setReturnedNonUndefined();var i=s(r,t);if(i instanceof a){if(null!=this.cancelPromise){if(i._isCancelled()){var o=new l("late cancellation observer");return t._attachExtraTrace(o),f.e=o,f}i.isPending()&&i._attachCancellationCallback(new d(this))}return i._then(m,g,undefined,this,undefined)}}}return t.isRejected()?(h(this),f.e=e,f):(h(this),e)}return i.prototype.isFinallyHandler=function(){return 0===this.type},d.prototype._resultCancelled=function(){h(this.finallyHandler)},a.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,undefined,new i(this,t,e),undefined)},a.prototype.lastly=a.prototype["finally"]=function(e){return this._passThrough(e,0,y,y)},a.prototype.tap=function(e){return this._passThrough(e,1,y)},a.prototype.tapCatch=function(e){var t=arguments.length;if(1===t)return this._passThrough(e,1,undefined,y);var n,r=new Array(t-1),i=0;for(n=0;n<t-1;++n){var o=arguments[n];if(!u.isObject(o))return a.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+u.classString(o)));r[i++]=o}r.length=i;var s=arguments[n];return this._passThrough(p(r,s,this),1,undefined,y)},i}},{"./catch_filter":7,"./util":36}],16:[function(n,e,t){"use strict";e.exports=function(a,r,s,c,e,u){var l=n("./errors").TypeError,t=n("./util"),f=t.errorObj,p=t.tryCatch,d=[];function h(e,t,n,r){if(u.cancellation()){var i=new a(s),o=this._finallyPromise=new a(s);this._promise=i.lastly(function(){return o}),i._captureStackTrace(),i._setOnCancel(this)}else(this._promise=new a(s))._captureStackTrace();this._stack=r,this._generatorFunction=e,this._receiver=t,this._generator=undefined,this._yieldHandlers="function"==typeof n?[n].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}t.inherits(h,e),h.prototype._isResolved=function(){return null===this._promise},h.prototype._cleanup=function(){this._promise=this._generator=null,u.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},h.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if("undefined"!=typeof this._generator["return"])this._promise._pushContext(),e=p(this._generator["return"]).call(this._generator,undefined),this._promise._popContext();else{var t=new a.CancellationError("generator .return() sentinel");a.coroutine.returnSentinel=t,this._promise._attachExtraTrace(t),this._promise._pushContext(),e=p(this._generator["throw"]).call(this._generator,t),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},h.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=p(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},h.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=p(this._generator["throw"]).call(this._generator,e);this._promise._popContext(),this._continue(t)},h.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof a){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},h.prototype.promise=function(){return this._promise},h.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=undefined,this._promiseFulfilled(undefined)},h.prototype._continue=function(e){var t=this._promise;if(e===f)return this._cleanup(),this._cancellationPhase?t.cancel():t._rejectCallback(e.e,!1);var n=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?t.cancel():t._resolveCallback(n);var r=c(n,this._promise);if(r instanceof a||null!==(r=function(e,t,n){for(var r=0;r<t.length;++r){n._pushContext();var i=p(t[r])(e);if(n._popContext(),i===f){n._pushContext();var o=a.reject(f.e);return n._popContext(),o}var s=c(i,n);if(s instanceof a)return s}return null}(r,this._yieldHandlers,this._promise))){var i=(r=r._target())._bitField;0==(50397184&i)?(this._yieldedPromise=r)._proxy(this,null):0!=(33554432&i)?a._async.invoke(this._promiseFulfilled,this,r._value()):0!=(16777216&i)?a._async.invoke(this._promiseRejected,this,r._reason()):this._promiseCancelled()}else this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},a.coroutine=function(r,e){if("function"!=typeof r)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var i=Object(e).yieldHandler,o=h,s=(new Error).stack;return function(){var e=r.apply(this,arguments),t=new o(undefined,undefined,i,s),n=t.promise();return t._generator=e,t._promiseFulfilled(undefined),n}},a.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new l("expecting a function but got "+t.classString(e));d.push(e)},a.spawn=function(e){if(u.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var t=new h(e,this),n=t.promise();return t._run(a.spawn),n}}},{"./errors":12,"./util":36}],17:[function(a,e,t){"use strict";e.exports=function(e,i,t,n,r,o){var s=a("./util");s.canEvaluate,s.tryCatch,s.errorObj,e.join=function(){var e,t=arguments.length-1;0<t&&"function"==typeof arguments[t]&&(e=arguments[t]);var n=[].slice.call(arguments);e&&n.pop();var r=new i(n).promise();return e!==undefined?r.spread(e):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(d,e,o,h,s,m){var a=d._getDomain,c=t("./util"),g=c.tryCatch,y=c.errorObj,u=d._async;function l(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var i=a();this._callback=null===i?t:c.domainBind(i,t),this._preservedValues=r===s?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],u.invoke(this._asyncInit,this,undefined)}function i(e,t,n,r){if("function"!=typeof t)return o("expecting a function but got "+c.classString(t));var i=0;if(n!==undefined){if("object"!=typeof n||null===n)return d.reject(new TypeError("options argument must be an object but it is "+c.classString(n)));if("number"!=typeof n.concurrency)return d.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(n.concurrency)));i=n.concurrency}return new l(e,t,i="number"==typeof i&&isFinite(i)&&1<=i?i:0,r).promise()}c.inherits(l,e),l.prototype._asyncInit=function(){this._init$(undefined,-2)},l.prototype._init=function(){},l.prototype._promiseFulfilled=function(e,t){var n=this._values,r=this.length(),i=this._preservedValues,o=this._limit;if(t<0){if(n[t=-1*t-1]=e,1<=o&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(1<=o&&this._inFlight>=o)return n[t]=e,this._queue.push(t),!1;null!==i&&(i[t]=e);var s=this._promise,a=this._callback,c=s._boundValue();s._pushContext();var u=g(a).call(c,e,t,r),l=s._popContext();if(m.checkForgottenReturns(u,l,null!==i?"Promise.filter":"Promise.map",s),u===y)return this._reject(u.e),!0;var f=h(u,this._promise);if(f instanceof d){var p=(f=f._target())._bitField;if(0==(50397184&p))return 1<=o&&this._inFlight++,(n[t]=f)._proxy(this,-1*(t+1)),!1;if(0==(33554432&p))return 0!=(16777216&p)?this._reject(f._reason()):this._cancel(),!0;u=f._value()}n[t]=u}return r<=++this._totalResolved&&(null!==i?this._filter(n,i):this._resolve(n),!0)},l.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;0<e.length&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},l.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,o=0;o<n;++o)e[o]&&(r[i++]=t[o]);r.length=i,this._resolve(r)},l.prototype.preservedValues=function(){return this._preservedValues},d.prototype.map=function(e,t){return i(this,e,t,null)},d.map=function(e,t,n,r){return i(e,t,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(s,a,e,c,u){var l=t("./util"),f=l.tryCatch;s.method=function(r){if("function"!=typeof r)throw new s.TypeError("expecting a function but got "+l.classString(r));return function(){var e=new s(a);e._captureStackTrace(),e._pushContext();var t=f(r).apply(this,arguments),n=e._popContext();return u.checkForgottenReturns(t,n,"Promise.method",e),e._resolveFromSyncValue(t),e}},s.attempt=s["try"]=function(e){if("function"!=typeof e)return c("expecting a function but got "+l.classString(e));var t,n=new s(a);if(n._captureStackTrace(),n._pushContext(),1<arguments.length){u.deprecated("calling Promise.try with more than 1 argument");var r=arguments[1],i=arguments[2];t=l.isArray(r)?f(e).apply(i,r):f(e).call(i,r)}else t=f(e)();var o=n._popContext();return u.checkForgottenReturns(t,o,"Promise.try",n),n._resolveFromSyncValue(t),n},s.prototype._resolveFromSyncValue=function(e){e===l.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){"use strict";var s=e("./util"),a=s.maybeWrapAsError,c=e("./errors").OperationalError,u=e("./es5"),l=/^(?:name|message|stack|cause)$/;t.exports=function(i,o){return function(e,t){if(null!==i){if(e){var n=function(e){var t,n;if((n=e)instanceof Error&&u.getPrototypeOf(n)===Error.prototype){(t=new c(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var r=u.keys(e),i=0;i<r.length;++i){var o=r[i];l.test(o)||(t[o]=e[o])}return t}return s.markAsOriginatingFromRejection(e),e}(a(e));i._attachExtraTrace(n),i._reject(n)}else if(o){var r=[].slice.call(arguments,1);i._fulfill(r)}else i._fulfill(t);i=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){var r=t("./util"),i=e._async,o=r.tryCatch,s=r.errorObj;function a(e,t){if(!r.isArray(e))return c.call(this,e,t);var n=o(t).apply(this._boundValue(),[null].concat(e));n===s&&i.throwLater(n.e)}function c(e,t){var n=this._boundValue(),r=e===undefined?o(t).call(n,null):o(t).call(n,null,e);r===s&&i.throwLater(r.e)}function u(e,t){if(!e){var n=new Error(e+"");n.cause=e,e=n}var r=o(t).call(this._boundValue(),e);r===s&&i.throwLater(r.e)}e.prototype.asCallback=e.prototype.nodeify=function(e,t){if("function"==typeof e){var n=c;t!==undefined&&Object(t).spread&&(n=a),this._then(n,u,undefined,this,e)}return this}}},{"./util":36}],22:[function(A,F,e){"use strict";F.exports=function(){var c=function(){return new f("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},a=function(){return new E.PromiseInspection(this._target())},s=function(e){return E.reject(new f(e))};function u(){}var d,l={},h=A("./util");d=h.isNode?function(){var e=process.domain;return e===undefined&&(e=null),e}:function(){return null},h.notEnumerableProp(E,"_getDomain",d);var e=A("./es5"),t=A("./async"),m=new t;e.defineProperty(E,"_async",{value:m});var n=A("./errors"),f=E.TypeError=n.TypeError;E.RangeError=n.RangeError;var g=E.CancellationError=n.CancellationError;E.TimeoutError=n.TimeoutError,E.OperationalError=n.OperationalError,E.RejectionError=n.OperationalError,E.AggregateError=n.AggregateError;var y=function(){},p={},v={},_=A("./thenables")(E,y),b=A("./promise_array")(E,y,_,s,u),r=A("./context")(E),i=r.create,w=A("./debuggability")(E,r),x=(w.CapturedTrace,A("./finally")(E,_,v)),k=A("./catch_filter")(v),o=A("./nodeback"),C=h.errorObj,T=h.tryCatch;function E(e){e!==y&&function(e,t){if(null==e||e.constructor!==E)throw new f("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new f("expecting a function but got "+h.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=undefined,this._rejectionHandler0=undefined,this._promise0=undefined,this._receiver0=undefined,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function S(e){this.promise._resolveCallback(e)}function j(e){this.promise._rejectCallback(e,!1)}function N(e){var t=new E(y);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return E.prototype.toString=function(){return"[object Promise]"},E.prototype.caught=E.prototype["catch"]=function(e){var t=arguments.length;if(1<t){var n,r=new Array(t-1),i=0;for(n=0;n<t-1;++n){var o=arguments[n];if(!h.isObject(o))return s("Catch statement predicate: expecting an object but got "+h.classString(o));r[i++]=o}return r.length=i,e=arguments[n],this.then(undefined,k(r,e,this))}return this.then(undefined,e)},E.prototype.reflect=function(){return this._then(a,a,undefined,this,undefined)},E.prototype.then=function(e,t){if(w.warnings()&&0<arguments.length&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+h.classString(e);1<arguments.length&&(n+=", "+h.classString(t)),this._warn(n)}return this._then(e,t,undefined,undefined,undefined)},E.prototype.done=function(e,t){this._then(e,t,undefined,undefined,undefined)._setIsFinal()},E.prototype.spread=function(e){return"function"!=typeof e?s("expecting a function but got "+h.classString(e)):this.all()._then(e,undefined,undefined,p,undefined)},E.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:undefined,rejectionReason:undefined};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},E.prototype.all=function(){return 0<arguments.length&&this._warn(".all() was passed arguments but it does not take any"),new b(this).promise()},E.prototype.error=function(e){return this.caught(h.originatesFromRejection,e)},E.getNewLibraryCopy=F.exports,E.is=function(e){return e instanceof E},E.fromNode=E.fromCallback=function(e){var t=new E(y);t._captureStackTrace();var n=1<arguments.length&&!!Object(arguments[1]).multiArgs,r=T(e)(o(t,n));return r===C&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},E.all=function(e){return new b(e).promise()},E.resolve=E.fulfilled=E.cast=function(e){var t=_(e);return t instanceof E||((t=new E(y))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},E.reject=E.rejected=function(e){var t=new E(y);return t._captureStackTrace(),t._rejectCallback(e,!0),t},E.setScheduler=function(e){if("function"!=typeof e)throw new f("expecting a function but got "+h.classString(e));return m.setScheduler(e)},E.prototype._then=function(e,t,n,r,i){var o=i!==undefined,s=o?i:new E(y),a=this._target(),c=a._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),r===undefined&&0!=(2097152&this._bitField)&&(r=0!=(50397184&c)?this._boundValue():a===this?undefined:this._boundTo),this._fireEvent("promiseChained",this,s));var u=d();if(0!=(50397184&c)){var l,f,p=a._settlePromiseCtx;0!=(33554432&c)?(f=a._rejectionHandler0,l=e):0!=(16777216&c)?(f=a._fulfillmentHandler0,l=t,a._unsetRejectionIsUnhandled()):(p=a._settlePromiseLateCancellationObserver,f=new g("late cancellation observer"),a._attachExtraTrace(f),l=t),m.invoke(p,a,{handler:null===u?l:"function"==typeof l&&h.domainBind(u,l),promise:s,receiver:r,value:f})}else a._addCallbacks(e,t,s,r,u);return s},E.prototype._length=function(){return 65535&this._bitField},E.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},E.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},E.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},E.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},E.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},E.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},E.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},E.prototype._isFinal=function(){return 0<(4194304&this._bitField)},E.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},E.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},E.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},E.prototype._setAsyncGuaranteed=function(){m.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},E.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];return t===l?undefined:t===undefined&&this._isBound()?this._boundValue():t},E.prototype._promiseAt=function(e){return this[4*e-4+2]},E.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},E.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},E.prototype._boundValue=function(){},E.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);i===undefined&&(i=l),this._addCallbacks(t,n,r,i,null)},E.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);o===undefined&&(o=l),this._addCallbacks(n,r,i,o,null)},E.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(65531<=o&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:h.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:h.domainBind(i,t));else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"==typeof e&&(this[s+0]=null===i?e:h.domainBind(i,e)),"function"==typeof t&&(this[s+1]=null===i?t:h.domainBind(i,t))}return this._setLength(o+1),o},E.prototype._proxy=function(e,t){this._addCallbacks(undefined,undefined,t,e,null)},E.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(c(),!1);var n=_(e,this);if(!(n instanceof E))return this._fulfill(e);t&&this._propagateFrom(n,2);var r=n._target();if(r!==this){var i=r._bitField;if(0==(50397184&i)){var o=this._length();0<o&&r._migrateCallback0(this);for(var s=1;s<o;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&i))this._fulfill(r._value());else if(0!=(16777216&i))this._reject(r._reason());else{var a=new g("late cancellation observer");r._attachExtraTrace(a),this._reject(a)}}else this._reject(c())}},E.prototype._rejectCallback=function(e,t,n){var r=h.ensureErrorObject(e),i=r===e;if(!i&&!n&&w.warnings()){var o="a promise was rejected with a non-error: "+h.classString(e);this._warn(o,!0)}this._attachExtraTrace(r,!!t&&i),this._reject(e)},E.prototype._resolveFromExecutor=function(e){if(e!==y){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),r!==undefined&&t._rejectCallback(r,!0)}},E.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),t===p?n&&"number"==typeof n.length?o=T(e).apply(this._boundValue(),n):(o=C).e=new f("cannot .spread() a non-array: "+h.classString(n)):o=T(e).call(t,n);var s=r._popContext();0==(65536&(i=r._bitField))&&(o===v?r._reject(n):o===C?r._rejectCallback(o.e,!1):(w.checkForgottenReturns(o,s,"",r,this),r._resolveCallback(o)))}},E.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},E.prototype._followee=function(){return this._rejectionHandler0},E.prototype._setFollowee=function(e){this._rejectionHandler0=e},E.prototype._settlePromise=function(e,t,n,r){var i=e instanceof E,o=this._bitField,s=0!=(134217728&o);0!=(65536&o)?(i&&e._invokeInternalOnCancel(),n instanceof x&&n.isFinallyHandler()?(n.cancelPromise=e,T(t).call(n,r)===C&&e._reject(C.e)):t===a?e._fulfill(a.call(n)):n instanceof u?n._promiseCancelled(e):i||e instanceof b?e._cancel():n.cancel()):"function"==typeof t?i?(s&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,r,e)):t.call(n,r,e):n instanceof u?n._isResolved()||(0!=(33554432&o)?n._promiseFulfilled(r,e):n._promiseRejected(r,e)):i&&(s&&e._setAsyncGuaranteed(),0!=(33554432&o)?e._fulfill(r):e._reject(r))},E.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,i=e.value;"function"==typeof t?n instanceof E?this._settlePromiseFromHandler(t,r,i,n):t.call(r,i,n):n instanceof E&&n._reject(i)},E.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},E.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=undefined,this._receiver0=undefined,this._settlePromise(r,e,i,t)},E.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=undefined},E.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=c();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,0<(65535&t)&&(0!=(134217728&t)?this._settlePromises():m.settlePromises(this))}},E.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return m.fatalError(e,h.isNode);0<(65535&t)?m.settlePromises(this):this._ensurePossibleRejectionHandled()}},E.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},E.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},E.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(0<t){if(0!=(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},E.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},E.defer=E.pending=function(){return w.deprecated("Promise.defer","new Promise"),{promise:new E(y),resolve:S,reject:j}},h.notEnumerableProp(E,"_makeSelfResolutionError",c),A("./method")(E,y,_,s,w),A("./bind")(E,y,_,w),A("./cancel")(E,b,s,w),A("./direct_resolve")(E),A("./synchronous_inspection")(E),A("./join")(E,b,_,y,m,d),(E.Promise=E).version="3.5.1",A("./map.js")(E,b,s,_,y,w),A("./call_get.js")(E),A("./using.js")(E,s,_,i,y,w),A("./timers.js")(E,y,w),A("./generators.js")(E,s,y,_,u,w),A("./nodeify.js")(E),A("./promisify.js")(E,y),A("./props.js")(E,b,_,s),A("./race.js")(E,y,_,s),A("./reduce.js")(E,b,s,_,y,w),A("./settle.js")(E,b,w),A("./some.js")(E,b,s),A("./filter.js")(E,y),A("./each.js")(E,y),A("./any.js")(E),h.toFastProperties(E),h.toFastProperties(E.prototype),N({a:1}),N({b:2}),N({c:3}),N(1),N(function(){}),N(undefined),N(!1),N(new E(y)),w.setBounds(t.firstLineError,h.lastLineError),E}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(i,e,t){"use strict";e.exports=function(a,n,c,s,t){var u=i("./util");function r(e){var t=this._promise=new a(n);e instanceof a&&t._propagateFrom(e,3),t._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(undefined,-2)}return u.isArray,u.inherits(r,t),r.prototype.length=function(){return this._length},r.prototype.promise=function(){return this._promise},r.prototype._init=function e(t,n){var r=c(this._values,this._promise);if(r instanceof a){var i=(r=r._target())._bitField;if(this._values=r,0==(50397184&i))return this._promise._setAsyncGuaranteed(),r._then(e,this._reject,undefined,this,n);if(0==(33554432&i))return 0!=(16777216&i)?this._reject(r._reason()):this._cancel();r=r._value()}if(null!==(r=u.asArray(r)))0!==r.length?this._iterate(r):-5===n?this._resolveEmptyArray():this._resolve(function(e){switch(n){case-2:return[];case-3:return{};case-6:return new Map}}());else{var o=s("expecting an array or an iterable object but got "+u.classString(r)).reason();this._promise._rejectCallback(o,!1)}},r.prototype._iterate=function(e){var t=this.getActualLength(e.length);this._length=t,this._values=this.shouldCopyValues()?new Array(t):this._values;for(var n=this._promise,r=!1,i=null,o=0;o<t;++o){var s=c(e[o],n);i=s instanceof a?(s=s._target())._bitField:null,r?null!==i&&s.suppressUnhandledRejections():null!==i?0==(50397184&i)?(s._proxy(this,o),this._values[o]=s):r=0!=(33554432&i)?this._promiseFulfilled(s._value(),o):0!=(16777216&i)?this._promiseRejected(s._reason(),o):this._promiseCancelled(o):r=this._promiseFulfilled(s,o)}r||n._setAsyncGuaranteed()},r.prototype._isResolved=function(){return null===this._values},r.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},r.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},r.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},r.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},r.prototype._promiseCancelled=function(){return this._cancel(),!0},r.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},r.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof a)e.cancel();else for(var t=0;t<e.length;++t)e[t]instanceof a&&e[t].cancel()}},r.prototype.shouldCopyValues=function(){return!0},r.prototype.getActualLength=function(e){return e},r}},{"./util":36}],24:[function(n,e,t){"use strict";e.exports=function(l,f){var d={},h=n("./util"),p=n("./nodeback"),m=h.withAppended,g=h.maybeWrapAsError,e=h.canEvaluate,y=n("./errors").TypeError,v={__isPromisified__:!0},t=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),_=function(e){return h.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function s(e){return!t.test(e)}function b(e){try{return!0===e.__isPromisified__}catch(t){return!1}}var w=function(e){return e.replace(/([$])/,"\\$")},x=e?void 0:function(o,s,e,t,n,a){var c=function(){return this}(),u=o;function r(){var e=s;s===d&&(e=this);var t=new l(f);t._captureStackTrace();var n="string"==typeof u&&this!==c?this[u]:o,r=p(t,a);try{n.apply(e,m(arguments,r))}catch(i){t._rejectCallback(g(i),!0,!0)}return t._isFateSealed()||t._setAsyncGuaranteed(),t}return"string"==typeof u&&(o=t),h.notEnumerableProp(r,"__isPromisified__",!0),r};function u(e,t,n,r,i){for(var o=new RegExp(w(t)+"$"),s=function(e,t,n,r){for(var i,o,s,a,c=h.inheritedDataKeys(e),u=[],l=0;l<c.length;++l){var f=c[l],p=e[f],d=r===_||_(f,p,e);"function"!=typeof p||b(p)||(i=e,o=f,s=t,(a=h.getDataPropertyOrDefault(i,o+s,v))&&b(a))||!r(f,p,e,d)||u.push(f,p)}return function(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<e.length;s+=2)if(e[s]===o)throw new y("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(u,t,n),u}(e,t,o,n),a=0,c=s.length;a<c;a+=2){var u=s[a],l=s[a+1],f=u+t;if(r===x)e[f]=x(u,d,u,l,t,i);else{var p=r(l,function(){return x(u,d,u,l,t,i)});h.notEnumerableProp(p,"__isPromisified__",!0),e[f]=p}}return h.toFastProperties(e),e}l.promisify=function(e,t){if("function"!=typeof e)throw new y("expecting a function but got "+h.classString(e));if(b(e))return e;var n,r=(t=Object(t)).context===undefined?d:t.context,i=!!t.multiArgs,o=x(n=e,r,undefined,n,null,i);return h.copyDescriptors(e,o,s),o},l.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new y("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(t=Object(t)).multiArgs,r=t.suffix;"string"!=typeof r&&(r="Async");var i=t.filter;"function"!=typeof i&&(i=_);var o=t.promisifier;if("function"!=typeof o&&(o=x),!h.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=h.inheritedDataKeys(e),a=0;a<s.length;++a){var c=e[s[a]];"constructor"!==s[a]&&h.isClass(c)&&(u(c.prototype,r,i,o,n),u(c,r,i,o,n))}return u(e,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(f,e,t){"use strict";e.exports=function(r,e,i,o){var a,t=f("./util"),s=t.isObject,c=f("./es5");"function"==typeof Map&&(a=Map);var u=function(){var n=0,r=0;function i(e,t){this[n]=e,this[n+r]=t,n++}return function(e){r=e.size,n=0;var t=new Array(2*e.size);return e.forEach(i,t),t}}();function l(e){var t,n=!1;if(a!==undefined&&e instanceof a)t=u(e),n=!0;else{var r=c.keys(e),i=r.length;t=new Array(2*i);for(var o=0;o<i;++o){var s=r[o];t[o]=e[s],t[o+i]=s}}this.constructor$(t),this._isMap=n,this._init$(undefined,n?-6:-3)}function n(e){var t,n=i(e);return s(n)?(t=n instanceof r?n._then(r.props,undefined,undefined,undefined,undefined):new l(n).promise(),n instanceof r&&t._propagateFrom(n,2),t):o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}t.inherits(l,e),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(e){for(var t=new a,n=e.length/2|0,r=0;r<n;++r){var i=e[n+r],o=e[r];t.set(i,o)}return t}(this._values);else{n={};for(var r=this.length(),i=0,o=this.length();i<o;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(e){return e>>1},r.prototype.props=function(){return n(this)},r.props=function(e){return n(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function r(e){this._capacity=e,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(e){return this._capacity<e},r.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},r.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=undefined,this._front=e+1&this._capacity-1,this._length--,t},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,n,r,i){for(var o=0;o<i;++o)n[o+r]=e[o+0],e[o+0]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=r},{}],27:[function(e,t,n){"use strict";t.exports=function(u,l,f,p){var d=e("./util"),h=function(t){return t.then(function(e){return n(e,t)})};function n(e,t){var n=f(e);if(n instanceof u)return h(n);if(null===(e=d.asArray(e)))return p("expecting an array or an iterable object but got "+d.classString(e));var r=new u(l);t!==undefined&&r._propagateFrom(t,3);for(var i=r._fulfill,o=r._reject,s=0,a=e.length;s<a;++s){var c=e[s];(c!==undefined||s in e)&&u.cast(c)._then(i,o,undefined,r,null)}return r}u.race=function(e){return n(e,undefined)},u.prototype.race=function(){return n(this,undefined)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(s,e,i,n,o,a){var c=s._getDomain,u=t("./util"),l=u.tryCatch;function f(e,t,n,r){this.constructor$(e);var i=c();this._fn=null===i?t:u.domainBind(i,t),n!==undefined&&(n=s.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=r===o?Array(this._length):0===r?null:undefined,this._promise._captureStackTrace(),this._init$(undefined,-5)}function p(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function d(e,t,n,r){return"function"!=typeof t?i("expecting a function but got "+u.classString(t)):new f(e,t,n,r).promise()}function h(e){this.accum=e,this.array._gotAccum(e);var t=n(this.value,this.array._promise);return t instanceof s?(this.array._currentCancellable=t)._then(r,undefined,undefined,this,undefined):r.call(this,t)}function r(e){var t,n=this.array,r=n._promise,i=l(n._fn);r._pushContext(),(t=n._eachValues!==undefined?i.call(r._boundValue(),e,this.index,this.length):i.call(r._boundValue(),this.accum,e,this.index,this.length))instanceof s&&(n._currentCancellable=t);var o=r._popContext();return a.checkForgottenReturns(t,o,n._eachValues!==undefined?"Promise.each":"Promise.reduce",r),t}u.inherits(f,e),f.prototype._gotAccum=function(e){this._eachValues!==undefined&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},f.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},f.prototype._init=function(){},f.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==undefined?this._eachValues:this._initialValue)},f.prototype.shouldCopyValues=function(){return!1},f.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},f.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof s&&this._currentCancellable.cancel(),this._initialValue instanceof s&&this._initialValue.cancel())},f.prototype._iterate=function(e){var t,n,r=(this._values=e).length;if(this._initialValue!==undefined?(t=this._initialValue,n=0):(t=s.resolve(e[0]),n=1),!(this._currentCancellable=t).isRejected())for(;n<r;++n){var i={accum:null,value:e[n],index:n,length:r,array:this};t=t._then(h,undefined,undefined,i,undefined)}this._eachValues!==undefined&&(t=t._then(this._eachComplete,undefined,undefined,this,undefined)),t._then(p,p,undefined,t,this)},s.prototype.reduce=function(e,t){return d(this,e,t,null)},s.reduce=function(e,t,n,r){return d(e,t,n,r)}}},{"./util":36}],29:[function(e,t,n){"use strict";var r,i,o,s,a,c=e("./util"),u=c.getNativePromise();if(c.isNode&&"undefined"==typeof MutationObserver){var l=global.setImmediate,f=process.nextTick;r=c.isRecentNode?function(e){l.call(global,e)}:function(e){f.call(process,e)}}else if("function"==typeof u&&"function"==typeof u.resolve){var p=u.resolve();r=function(e){p.then(e)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:(i=document.createElement("div"),s=!(o={attributes:!0}),a=document.createElement("div"),new MutationObserver(function(){i.classList.toggle("foo"),s=!1}).observe(a,o),function(e){var t=new MutationObserver(function(){t.disconnect(),e()});t.observe(i,o),s||(s=!0,a.classList.toggle("foo"))});t.exports=r},{"./util":36}],30:[function(o,e,t){"use strict";e.exports=function(e,t,n){var r=e.PromiseInspection;function i(e){this.constructor$(e)}o("./util").inherits(i,t),i.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(e,t){var n=new r;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},i.prototype._promiseRejected=function(e,t){var n=new r;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},e.settle=function(e){return n.deprecated(".settle()",".reflect()"),new i(e).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(l,e,t){"use strict";e.exports=function(e,t,i){var n=l("./util"),r=l("./errors").RangeError,o=l("./errors").AggregateError,s=n.isArray,a={};function c(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function u(e,t){if((0|t)!==t||t<0)return i("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new c(e),r=n.promise();return n.setHowMany(t),n.init(),r}n.inherits(c,t),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(undefined,-5);var e=s(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(e){this._howMany=e},c.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(a),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new o,t=this.length();t<this._values.length;++t)this._values[t]!==a&&e.push(this._values[t]);return 0<e.length?this._reject(e):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(e){this._values.push(e)},c.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new r(t)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(e,t){return u(e,t)},e.prototype.some=function(e){return u(this,e)},e._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){e!==undefined?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():undefined):(this._bitField=0,this._settledValueField=undefined)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return s.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(a,c){var u=e("./util"),l=u.errorObj,i=u.isObject,o={}.hasOwnProperty;return function(e,t){if(i(e)){if(e instanceof a)return e;var n=function(e){try{return e.then}catch(t){return l.e=t,l}}(e);if(n===l){t&&t._pushContext();var r=a.reject(n.e);return t&&t._popContext(),r}if("function"==typeof n)return function(e){try{return o.call(e,"_promise0")}catch(t){return!1}}(e)?(r=new a(c),e._then(r._fulfill,r._reject,undefined,r,null),r):function(e,t,n){var r=new a(c),i=r;n&&n._pushContext(),r._captureStackTrace(),n&&n._popContext();var o=!0,s=u.tryCatch(t).call(e,function(e){r&&(r._resolveCallback(e),r=null)},function(e){r&&(r._rejectCallback(e,o,!0),r=null)});return o=!1,r&&s===l&&(r._rejectCallback(s.e,!0,!0),r=null),i}(e,n,t)}return e}}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(i,o,a){var c=e("./util"),u=i.TimeoutError;function l(e){this.handle=e}l.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(e){return t(+this).thenReturn(e)},t=i.delay=function(e,t){var n,r;return t!==undefined?(n=i.resolve(t)._then(s,null,null,e,undefined),a.cancellation()&&t instanceof i&&n._setOnCancel(t)):(n=new i(o),r=setTimeout(function(){n._fulfill()},+e),a.cancellation()&&n._setOnCancel(new l(r)),n._captureStackTrace()),n._setAsyncGuaranteed(),n};function n(e){return clearTimeout(this.handle),e}function r(e){throw clearTimeout(this.handle),e}i.prototype.delay=function(e){return t(e,this)},i.prototype.timeout=function(e,i){var o,s;e=+e;var t=new l(setTimeout(function(){var e,t,n,r;o.isPending()&&(e=o,n=s,r="string"!=typeof(t=i)?t instanceof Error?t:new u("operation timed out"):new u(t),c.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel())},e));return a.cancellation()?(s=this.then(),(o=s._then(n,r,undefined,t,undefined))._setOnCancel(t)):o=this._then(n,r,undefined,t,undefined),o}}},{"./util":36}],35:[function(i,e,t){"use strict";e.exports=function(p,d,h,t,m,g){var y=i("./util"),n=i("./errors").TypeError,e=i("./util").inherits,v=y.errorObj,_=y.tryCatch,b={};function w(e){setTimeout(function(){throw e},0)}function x(e,t,n){this._data=e,this._promise=t,this._context=n}function r(e,t,n){this.constructor$(e,t,n)}function k(e){return x.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function C(e){this.length=e,this.promise=null,this[e-1]=null}x.prototype.data=function(){return this._data},x.prototype.promise=function(){return this._promise},x.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():b},x.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;n!==undefined&&n._pushContext();var r=t!==b?this.doDispose(t,e):null;return n!==undefined&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},x.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},e(r,x),r.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},C.prototype._resultCancelled=function(){for(var e=this.length,t=0;t<e;++t){var n=this[t];n instanceof p&&n.cancel()}},p.using=function(){var e=arguments.length;if(e<2)return d("you must pass at least 2 arguments to Promise.using");var t,o=arguments[e-1];if("function"!=typeof o)return d("expecting a function but got "+y.classString(o));var s=!0;2===e&&Array.isArray(arguments[0])?(e=(t=arguments[0]).length,s=!1):(t=arguments,e--);for(var n=new C(e),r=0;r<e;++r){var i=t[r];if(x.isDisposer(i)){var a=i;(i=i.promise())._setDisposable(a)}else{var c=h(i);c instanceof p&&(i=c._then(k,null,null,{resources:n,index:r},undefined))}n[r]=i}var u=new Array(n.length);for(r=0;r<u.length;++r)u[r]=p.resolve(n[r]).reflect();var l=p.all(u).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return v.e=n.error(),v;if(!n.isFulfilled())return void l.cancel();e[t]=n.value()}f._pushContext(),o=_(o);var r=s?o.apply(undefined,e):o(e),i=f._popContext();return g.checkForgottenReturns(r,i,"Promise.using",f),r}),f=l.lastly(function(){var i,o,s,a,c,t=new p.PromiseInspection(l);return o=t,s=0,a=(i=n).length,c=new p(m),function e(){if(a<=s)return c._fulfill();var t,n,r=(t=i[s++],(n=h(t))!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&n._setDisposable(t._getDisposer()),n);if(r instanceof p&&r._isDisposable()){try{r=h(r._getDisposer().tryDispose(o),i.promise)}catch(b){return w(b)}if(r instanceof p)return r._then(e,w,null,null,null)}e()}(),c});return(n.promise=f)._setOnCancel(n),f},p.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},p.prototype._isDisposable=function(){return 0<(131072&this._bitField)},p.prototype._getDisposer=function(){return this._disposer},p.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=undefined},p.prototype.disposer=function(e){if("function"==typeof e)return new r(e,this,t());throw new n}}},{"./errors":12,"./util":36}],36:[function(e,t,n){"use strict";var o,u=e("./es5"),r="undefined"==typeof navigator,i={e:{}},s="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this!==undefined?this:null;function l(){try{var e=o;return o=null,e.apply(this,arguments)}catch(t){return i.e=t,i}}function a(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function c(e,t,n){if(a(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return u.defineProperty(e,t,r),e}var f=function(){var i=[Array.prototype,Object.prototype,Function.prototype],a=function(e){for(var t=0;t<i.length;++t)if(i[t]===e)return!0;return!1};if(u.isES5){var c=Object.getOwnPropertyNames;return function(e){for(var t=[],n=Object.create(null);null!=e&&!a(e);){var r;try{r=c(e)}catch(l){return t}for(var i=0;i<r.length;++i){var o=r[i];if(!n[o]){n[o]=!0;var s=Object.getOwnPropertyDescriptor(e,o);null!=s&&null==s.get&&null==s.set&&t.push(o)}}e=u.getPrototypeOf(e)}return t}}var o={}.hasOwnProperty;return function(e){if(a(e))return[];var t=[];e:for(var n in e)if(o.call(e,n))t.push(n);else{for(var r=0;r<i.length;++r)if(o.call(i[r],n))continue e;t.push(n)}return t}}(),p=/this\s*\.\s*\S+\s*=/;var d=/^[a-z$_][a-z$_0-9]*$/i;function h(e){try{return e+""}catch(t){return"[no string representation]"}}function m(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function g(e){return m(e)&&u.propertyIsWritable(e,"stack")}var y="stack"in new Error?function(e){return g(e)?e:new Error(h(e))}:function(e){if(g(e))return e;try{throw new Error(h(e))}catch(t){return t}};function v(e){return{}.toString.call(e)}var _=function(e){return u.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var b="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};_=function(e){return u.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?b(e):null}}var w="undefined"!=typeof process&&"[object process]"===v(process).toLowerCase(),x="undefined"!=typeof process&&"undefined"!=typeof process.env;var k,C={isClass:function(e){try{if("function"==typeof e){var t=u.names(e.prototype),n=u.isES5&&1<t.length,r=0<t.length&&!(1===t.length&&"constructor"===t[0]),i=p.test(e+"")&&0<u.names(e).length;if(n||r||i)return!0}return!1}catch(o){return!1}},isIdentifier:function(e){return d.test(e)},inheritedDataKeys:f,getDataPropertyOrDefault:function(e,t,n){if(!u.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:undefined;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0},thrower:function(e){throw e},isArray:u.isArray,asArray:_,notEnumerableProp:c,isPrimitive:a,isObject:function(e){return"function"==typeof e||"object"==typeof e&&null!==e},isError:m,canEvaluate:r,errorObj:i,tryCatch:function(e){return o=e,l},inherits:function(t,n){var r={}.hasOwnProperty;function e(){for(var e in this.constructor=t,(this.constructor$=n).prototype)r.call(n.prototype,e)&&"$"!==e.charAt(e.length-1)&&(this[e+"$"]=n.prototype[e])}return e.prototype=n.prototype,t.prototype=new e,t.prototype},withAppended:function(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=e[n];return i[n]=t,i},maybeWrapAsError:function(e){return a(e)?new Error(h(e)):e},toFastProperties:function(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e},filledRange:function(e,t,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=t+i+n;return r},toString:h,canAttachTrace:g,ensureErrorObject:y,originatesFromRejection:function(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)},markAsOriginatingFromRejection:function(e){try{c(e,"isOperational",!0)}catch(t){}},classString:v,copyDescriptors:function(e,t,n){for(var r=u.names(e),i=0;i<r.length;++i){var o=r[i];if(n(o))try{u.defineProperty(t,o,u.getDescriptor(e,o))}catch(s){}}},hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:w,hasEnvVariables:x,env:function(e){return x?process.env[e]:undefined},global:s,getNativePromise:function(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(t){}},domainBind:function(e,t){return e.bind(t)}};C.isRecentNode=C.isNode&&(0===(k=process.versions.node.split(".").map(Number))[0]&&10<k[1]||0<k[0]),C.isNode&&C.toFastProperties(process);try{throw new Error}catch(T){C.lastLineError=T}t.exports=C},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise),function(e){function r(e,t){var n;t=t||{},this._id=r._generateUUID(),this._promise=t.promise||Promise,this._frameId=t.frameId||"CrossStorageClient-"+this._id,this._origin=r._getOrigin(e),this._requests={},this._connected=!1,this._closed=!1,this._count=0,this._timeout=t.timeout||5e3,this._listener=null,this._installListener(),t.frameId&&(n=document.getElementById(t.frameId)),n&&this._poll(),n=n||this._createFrame(e),this._hub=n.contentWindow}r.frameStyle={display:"none",position:"absolute",top:"-999px",left:"-999px"},r._getOrigin=function(e){var t;return(t=document.createElement("a")).href=e,t.host||(t=window.location),((t.protocol&&":"!==t.protocol?t.protocol:window.location.protocol)+"//"+t.host).replace(/:80$|:443$/,"")},r._generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},r.prototype.onConnect=function(){var e=this;return this._connected?this._promise.resolve():this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):(this._requests.connect||(this._requests.connect=[]),new this._promise(function(t,n){var r=setTimeout(function(){n(new Error("CrossStorageClient could not connect"))},e._timeout);e._requests.connect.push(function(e){if(clearTimeout(r),e)return n(e);t()})}))},r.prototype.set=function(e,t){return this._request("set",{key:e,value:t})},r.prototype.get=function(e){var t=Array.prototype.slice.call(arguments);return this._request("get",{keys:t})},r.prototype.del=function(){var e=Array.prototype.slice.call(arguments);return this._request("del",{keys:e})},r.prototype.clear=function(){return this._request("clear")},r.prototype.getKeys=function(){return this._request("getKeys")},r.prototype.close=function(){var e=document.getElementById(this._frameId);e&&e.parentNode.removeChild(e),window.removeEventListener?window.removeEventListener("message",this._listener,!1):window.detachEvent("onmessage",this._listener),this._connected=!1,this._closed=!0},r.prototype._installListener=function(){var o=this;this._listener=function(e){var t,n,r;if(!o._closed&&e.data&&"string"==typeof e.data&&("null"===e.origin?"file://":e.origin)===o._origin)if("cross-storage:unavailable"!==e.data){if(-1!==e.data.indexOf("cross-storage:")&&!o._connected){if(o._connected=!0,!o._requests.connect)return;for(t=0;t<o._requests.connect.length;t++)o._requests.connect[t](n);delete o._requests.connect}if("cross-storage:ready"!==e.data){try{r=JSON.parse(e.data)}catch(i){return}r.id&&o._requests[r.id]&&o._requests[r.id](r.error,r.result)}}else{if(o._closed||o.close(),!o._requests.connect)return;for(n=new Error("Closing client. Could not access localStorage in hub."),t=0;t<o._requests.connect.length;t++)o._requests.connect[t](n)}},window.addEventListener?window.addEventListener("message",this._listener,!1):window.attachEvent("onmessage",this._listener)},r.prototype._poll=function(){var e,t,n;n="file://"===(e=this)._origin?"*":e._origin,t=setInterval(function(){if(e._connected)return clearInterval(t);e._hub&&e._hub.postMessage("cross-storage:poll",n)},1e3)},r.prototype._createFrame=function(e){var t,n;for(n in(t=window.document.createElement("iframe")).id=this._frameId,r.frameStyle)r.frameStyle.hasOwnProperty(n)&&(t.style[n]=r.frameStyle[n]);return window.document.body.appendChild(t),t.src=e,t},r.prototype._request=function(e,t){var o,s;return this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):((s=this)._count++,o={id:this._id+":"+s._count,method:"cross-storage:"+e,params:t},new this._promise(function(n,r){var i,e,t;i=setTimeout(function(){s._requests[o.id]&&(delete s._requests[o.id],r(new Error("Timeout: could not perform "+o.method)))},s._timeout),s._requests[o.id]=function(e,t){if(clearTimeout(i),delete s._requests[o.id],e)return r(new Error(e));n(t)},Array.prototype.toJSON&&(e=Array.prototype.toJSON,Array.prototype.toJSON=null),t="file://"===s._origin?"*":s._origin,s._hub.postMessage(JSON.stringify(o),t),e&&(Array.prototype.toJSON=e)}))},"undefined"!=typeof module&&module.exports?module.exports=r:"undefined"!=typeof exports?exports.CrossStorageClient=r:"function"==typeof define&&define.amd?define([],function(){return r}):e.CrossStorageClient=r}(this);
!function(t,e){var d,u,a;t.widgets||(t.widgets={}),d=t.jQuery,u=t.NProgress,a=t.widgets["nav/page"],{base:"/searchfront/",tpl:{statusTpl:d("#status-tpl").html(),searchSugTpl:d("#search-sug-tpl").html(),historyOfSearchTpl:d("#history-of-search-tpl").html(),filterTpl:d("#filter-tpl").html(),isbnTpl:d("#isbn-tpl").html(),listTpl:d("#list-tpl").html(),pagerTpl:d("#pager-tpl").html(),feeTpl:d("#fee-tpl").html(),activityIconTpl:d("#activity-icon-tpl").html(),activityTextTpl:d("#activity-text-tpl").html(),holidayTpl:d("#holiday-tpl").html(),warnTpl:d("#warn-tpl").html()},dom:{searchForm:d("#searchForm"),searchPut:d("input[name=searchWord]"),searchSugBox:d("#searchSugBox"),crumbsBar:d("#crumbsBar"),searchMainBox:d("#searchMain"),smartFilterBox:d("#smartFilter"),smartFilterWriteBox:d("#smartFilterWrite"),orderBox:d("#orderBox"),priceOrderBox:d("#priceOrder"),statusBox:d("#statusBox"),pageTopBox:d("#pageTop"),pagerBox:d("#pagerBox"),categoryBox:d("#categoryBox"),filterBox:d("#filterBox"),isbnBox:d("#isbnBox"),listBox:d("#listBox"),resultMainBox:d("#resultMainBox"),resultNoneBox:d("#resultNoneBox")},searchInfo:{type:"key",searchWord:"",key:{text:"全部项"},author:{text:"作者"},itemname:{text:"书名"},press:{text:"出版社"},selectType:{key:"0",itemname:"1",author:"2",press:"3"},otherStatusList:[{type:"key",text:"全部项"},{type:"author",text:"作者"},{type:"itemname",text:"书名"},{type:"press",text:"出版社"}]},order:{orderDefaultInfo:{defaultOrder:{order:"config",text:"综合排序"},publishTimeOrder:{order:"normal",text:"出版时间"},finishedOrder:{order:"config",text:"售罄时间"},putTimeOrder:{order:"config",text:"最新上架"},shopLevelOrder:{order:"config",text:"书店等级"},priceOrder:{order:"normal",text:"价格"}},orderInfo:{defaultOrder:{config:{order:"0",text:"综合排序",className:""}},publishTimeOrder:{normal:{order:"4",text:"最新出版",className:"down"},4:{order:"3",text:"最早出版",className:"up"},3:{order:"4",text:"最新出版",className:"down"}},finishedOrder:{config:{order:"9",text:"售罄时间",className:""}},putTimeOrder:{config:{order:"6",text:"最新上架",className:""}},shopLevelOrder:{config:{order:"7",text:"书店等级",className:""}},priceOrder:{normal:{order:"1",text:"价格从低到高",className:"up"},1:{order:"2",text:"价格从高到低",className:"down"},2:{order:"1",text:"价格从低到高",className:"up"}}}},pageInfo:{curpage:parseInt(d(".page-text[type=curpage]").text()),countpage:parseInt(d(".page-text[type=countpage]").text())},listInfo:{promotionInfo:[]},storage:new CrossStorageClient(window.KFZ.site.www+"search-suggest-history-iframe.html"),historyOfSearch:[],searchTool:new window.KFZ.searchTools,listAjaxFlag:!0,shippingFeeFlag:!1,addCartAjaxFlag:!0,collectionAjaxFlag:!0,historyCanWrite:window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/(iPod|iPhone|iPad|WebApps\/.+CFNetwork)/),init:function(){var e=this;a.base=this.base,this.historyCanWrite&&window.addEventListener("popstate",function(){e.popstateWatch()}),this.initNprogress(),""==window.location.search?this.searchTool.setParamStr("?status=0","normal"):this.searchTool.setParamStr(window.location.search,"normal"),this.contactManagerConf(),this.headerSearchInit(),this.categoryInit(),this.filterInit(),this.isbnInit(),this.listInit(!0),this.pagerInit(),"1"!=this.searchTool.getParam("status")&&window.imNotice.showCartList(),this.storage.onConnect().then(function(){e.storage.get("historyOfSearch").then(function(t){t&&(e.historyOfSearch=JSON.parse(t))})}),this.tableChange()},tableChange:function(){var e=this;d(document).on("visibilitychange",function(t){document.hidden&&e.dom.searchPut.blur()})},popstateWatch:function(){if(window.location.search&&window.location.search==this.searchTool.paramStr.normal)return!1;this.searchTool=new window.KFZ.searchTools,""==window.location.search?this.searchTool.setParamStr("?status=0","normal"):this.searchTool.setParamStr(window.location.search,"normal");var t=this.searchTool.getParam("order"),e=(this.searchTool.getParam("pagenum"),this.dom.orderBox.find(".item")),a="";switch(t){case"0":a="defaultOrder";break;case"1":case"2":a="priceOrder";break;case"3":case"4":a="publishTimeOrder";break;case"6":a="putTimeOrder";break;case"7":a="shopLevelOrder";break;case"9":a="finishedOrder";break;default:a="defaultOrder"}this.setDefaultOrderBtn(),a&&this.order.orderInfo[a][t]?e.filter("[name="+a+"]").addClass("active").addClass(this.order.orderInfo[a][t].className).attr("order",this.order.orderInfo[a][t].order).find(".text").text(this.order.orderInfo[a][t].text):e.filter("[name="+a+"]").addClass("active"),u.start(),this.getList()},initNprogress:function(){u.configure({showSpinner:!1})},contactManagerConf:function(){var e=this;window.KFZ.tools.contactManager.on("updateArea",function(){var t=window.KFZ.tools.cookies("reciever_area");t&&window.KFZ.ajaxFlag.promotionShippingFee&&0<e.listInfo.promotionInfo.length&&(e.dom.listBox.find("span[name=activity-baoyou]").remove(),e.dom.listBox.find(".ship-fee-box").html(""),e.shippingFeeFlag?window.location.reload():e.getShippingFee({params:e.listInfo.promotionInfo,area:t}))},{from:"search",description:"收货地址更新 -> 同步列表运费信息 contactManagerConf"})},headerSearchInit:function(){var t="key",e=this.searchTool.getParam("select"),a=decodeURIComponent(this.searchTool.params.key||""),r=this.searchTool.getParams();(a||e)&&("1"==e&&r[t="itemname"]&&(a=r[t]||""),"2"==e&&r[t="author"]&&r[t][1]&&(a=r[t][1].param||""),"3"==e&&r[t="press"]&&r[t][1]&&(a=r[t][1].param||"")),this.searchInfo.type=t,this.searchInfo.searchWord=a,this.dom.searchPut.val(a),this.renderStatusBox({preType:t,curStatus:{type:t,text:this.searchInfo[t].text},otherStatusList:this.searchInfo.otherStatusList}),this.searchPutWatch(),this.statusInit()},searchPutWatch:function(){var c=this,a=!1,r=d("#searchBtn"),h="",o="gray9",s="商品名称、作者、出版社、ISBN";this.dom.searchSugBox.delegate(".sug-item","click",function(){var t=d(this),e="";e=t.hasClass("blue")?t.find(".text").text():t.text(),c.dom.searchPut.removeClass("gray9").val(e),c.dom.searchSugBox.hide(),r.click()}).parent().mouseleave(function(){!a&&c.dom.searchSugBox.hide(),a=!1}),this.dom.searchSugBox.delegate(".clear-btn","click",function(t){a=!0,t.preventDefault(),t.stopPropagation();var e=d(this);return c.historyOfSearch.splice(e.parent().index()-1,1),c.storage.onConnect().then(function(){c.storage.set("historyOfSearch",JSON.stringify(c.historyOfSearch))}),e.parent().remove(),0==c.historyOfSearch.length&&c.dom.searchSugBox.hide(),!1}),this.dom.searchPut.focus(function(){var t=d(this);t.val()!=s&&""!=t.val()||(t.val("").removeClass(o),c.renderHistoryOfSearchBox())}).click(function(t){var e=d(this),a=e.val(),r=e.is(":focus");if(r&&""===a)return c.renderHistoryOfSearchBox(),!1}).keyup(function(t){var e=d(this),a=e.val(),r=t.keyCode||t.charCode;if(38!=r&&40!=r)if(13!=r){if(a!=h){if(""==a)return c.renderHistoryOfSearchBox(),!1;c.searchTool.sug({query:a},function(){c.renderSearchSugBox()})}}else c.dom.searchSugBox.hide()}).keydown(function(t){var e=d(this),a=e.val(),r=t.keyCode||t.charCode;if(38==r||40==r){var o=c.dom.searchSugBox.find(".sug-item"),s=o.length;if(!s)return;if("none"==c.dom.searchSugBox.css("display")&&s)return void c.dom.searchSugBox.show();var i=-1;d.each(o,function(t){if(d(this).hasClass("active"))return i=t,!1}),38==r?i--:40==r&&i++,s-1<i&&(i=0),i<0&&(i=s-1);var n=o.eq(i),l=n.hasClass("blue")?n.find(".text").text():n.text();return o.removeClass("active").eq(i).addClass("active"),c.dom.searchPut.val(l).focus(),h=l,!1}h=a}).blur(function(t){var e=d(this);""==e.val()&&e.val(s).addClass(o),t.stopPropagation(),setTimeout(function(){!a&&c.dom.searchSugBox.hide(),a=!1},200)}),this.dom.searchForm.submit(function(t){var a=d.trim(c.dom.searchPut.val()),e=c.dom.statusBox.find(".cur-status").attr("type");if(t.preventDefault(),c.searchTool.delParam(c.searchInfo.type),""==a)return!1;d.each(c.historyOfSearch,function(t,e){if(a==e)return c.historyOfSearch.splice(t,1),!1}),c.historyOfSearch.unshift(a),10<c.historyOfSearch.length&&c.historyOfSearch.pop(),c.storage.onConnect().then(function(){c.storage.set("historyOfSearch",JSON.stringify(c.historyOfSearch))}),"author"!=e&&"press"!=e||(a="h"+c.searchTool.charToUnicode(a)),"itemname"==e&&(a=c.searchTool.charToUnicode(a)),u.start(),window.location.href="/product_result/?select="+c.searchInfo.selectType[e]+"&"+e+"="+encodeURIComponent(a)}),r.click(function(){var a=d.trim(c.dom.searchPut.val()),t=c.dom.statusBox.find(".cur-status").attr("type");if(c.searchTool.delParam(c.searchInfo.type),""==a)return!1;d.each(c.historyOfSearch,function(t,e){if(a==e)return c.historyOfSearch.splice(t,1),!1}),c.historyOfSearch.unshift(a),10<c.historyOfSearch.length&&c.historyOfSearch.pop(),c.storage.onConnect().then(function(){c.storage.set("historyOfSearch",JSON.stringify(c.historyOfSearch))}),"author"!=t&&"press"!=t||(a="h"+c.searchTool.charToUnicode(a)),"itemname"==t&&(a=c.searchTool.charToUnicode(a)),u.start(),window.location.href="/product_result/?select="+c.searchInfo.selectType[t]+"&"+t+"="+encodeURIComponent(a)})},renderSearchSugBox:function(){var t=window.sugWords||[],e=doT.template(this.tpl.searchSugTpl);0<t.length?(this.dom.searchSugBox.html(e({sugWords:t})),this.dom.searchSugBox.show()):this.dom.searchSugBox.hide()},renderHistoryOfSearchBox:function(){var t=doT.template(this.tpl.historyOfSearchTpl);0<this.historyOfSearch.length?(this.dom.searchSugBox.html(t({list:this.historyOfSearch})),this.dom.searchSugBox.show()):this.dom.searchSugBox.hide()},renderStatusBox:function(t){var e=doT.template(this.tpl.statusTpl);this.dom.statusBox.html(e(t)),this.statusInit()},statusInit:function(){var a=this,t=this.dom.statusBox.find(".status-other");t.find(".item").click(function(){var t=d(this),e=t.attr("type");a.smartFilterBoxToggle(e),a.renderStatusBox({curStatus:{type:e,text:a.searchInfo[e].text},otherStatusList:a.searchInfo.otherStatusList}),a.dom.statusBox.removeClass("show")}),this.dom.statusBox.mouseenter(function(){d(this).addClass("show")}).mouseleave(function(){d(this).removeClass("show")})},categoryInit:function(){this.toggleWatch()},toggleWatch:function(){this.dom.categoryBox.find(".filter-item .more").click(function(){var t=d(this);t.removeClass("show"),t.siblings(".category").addClass("show"),t.siblings(".normal").addClass("show")}),this.dom.categoryBox.find(".filter-item .normal").click(function(){var t=d(this);t.removeClass("show"),t.siblings(".category:gt(4)").removeClass("show"),t.siblings(".more").addClass("show")})},filterInit:function(){this.crumbsBarMouseWatch(),this.filterLink(),this.getFilter(),this.orderList(),this.priceOrderList(),this.priceBoxFocus(),this.shipPlaceMouseWatch(),this.smartFilterWatch(),this.pageTopWatch()},crumbsBarMouseWatch:function(){var t=d("#crumbsBar"),e=t.find(".crumbs-nav-item");e.mouseenter(function(){d(this).addClass("active")}).mouseleave(function(){d(this).removeClass("active")})},filterLink:function(){var s=this;this.dom.categoryBox.delegate("a","click",function(){var t=d(this),e=t.attr("name"),a=t.attr("type"),r=t.attr("code");if("back"==a)return s.searchTool.delParam("pagenum").delParam("catnum").delParam("sibu").delParam("special1").delParam("special2").delParam("special3"),window.location.href="/product_result/"+s.searchTool.paramStr.normal,!1;if("link"==a){s.searchTool.delParam("pagenum");var o={};return o[e]=r,"catnum"==e&&s.searchTool.delParam("sibu"),s.searchTool.setParam(o,"normal"),window.location.href="/product_result/"+s.searchTool.paramStr.normal,!1}}),this.dom.filterBox.delegate("a","click",function(){var t=d(this),e=t.attr("name"),a=t.attr("type"),r=t.attr("code");if("back"==a)return s.searchTool.delParam("pagenum"),s.searchTool.delParam(e),"quality"==e&&s.searchTool.delParam("quaselect"),window.location.href="/product_result/"+s.searchTool.paramStr.normal,!1;if("link"==a){s.searchTool.delParam("pagenum");var o={};return o[e]=r,s.searchTool.setParam(o,"normal"),"quality"==e&&"100"!=r&&s.searchTool.setParam({quaselect:2}),window.location.href="/product_result/"+s.searchTool.paramStr.normal,!1}if("link"==a){s.searchTool.delParam("pagenum");var o={};return o[e]=r,"catnum"==e&&s.searchTool.delParam("sibu"),s.searchTool.setParam(o,"normal"),window.location.href="/product_result/"+s.searchTool.paramStr.normal,!1}}),this.dom.filterBox.delegate("a","click",function(){var t=d(this),e=t.attr("name"),a=t.attr("type"),r=t.attr("code");if("back"==a)return s.searchTool.delParam("pagenum"),s.searchTool.delParam(e),"quality"==e&&s.searchTool.delParam("quaselect"),window.location.href="/product_result/"+s.searchTool.paramStr.normal,!1;if("link"==a){s.searchTool.delParam("pagenum");var o={};return o[e]=r,s.searchTool.setParam(o,"normal"),"quality"==e&&"100"!=r&&s.searchTool.setParam({quaselect:2}),window.location.href="/product_result/"+s.searchTool.paramStr.normal,!1}})},getFilter:function(){var a=this,r=this.searchTool.getParam("status")||"0";d.ajax({url:"/product_result/"+a.searchTool.paramStr.normal+"&type=1&ajaxdata=2",type:"get",cache:!1,success:function(t){if(t.status){if(t.data.filterList){var e=!1;t.data.status=r,d.each(t.data.filterList,function(t,a){"author"!=a.name&&"shopname"!=a.name&&"press"!=a.name||(e=!0),a.self.hasOwnProperty("name")?("自定义"==a.self.name?a.userDefined="1":a.userDefined="0",a.backStatus="1",d.each(a.value,function(t,e){a.self.code==e.code?e.active="1":e.active="0"})):(a.backStatus="",a.userDefined="1")}),e&&a.renderFilterBox(t.data)}}else"1"==t.other.code&&(window.location.href=window.KFZ.site.search+"/check.html?bizflag="+t.other.bizflag+"&refer="+window.location.href),"2"==t.other.code&&(window.location.href=window.KFZ.site.search+"/forbidden.html")},error:function(t,e,a){},complete:function(t,e,a){}})},renderFilterBox:function(t){var e=doT.template(this.tpl.filterTpl);this.dom.filterBox.html(e(t)),this.timeBoxFocus(),this.qualityBoxFocus()},timeBoxFocus:function(){var i=this,t=d("#timeBox"),n=t.find("input"),l="grayb",c="月",e=this.searchTool.getParam("pubdate");if(e){var a=e[0].param.substr(0,4),r=e[0].param.substr(4),o=e[1].param.substr(0,4),s=e[1].param.substr(4);a&&n.filter("[name=startYear]").val(a).removeClass(l),r&&n.filter("[name=startMonth]").val(r).removeClass(l),o&&n.filter("[name=endYear]").val(o).removeClass(l),s&&n.filter("[name=endMonth]").val(s).removeClass(l)}n.keypress(function(t){var e=t.keyCode||t.charCode;e&&(e<48||57<e)&&t.preventDefault()}).focus(function(){var t=d(this).attr("name"),e="年";"startYear"!=t&&"endYear"!=t||(e="年"),"startMonth"!=t&&"endMonth"!=t||(e=c),d(this).val()==e&&d(this).val("").removeClass(l)}).keyup(function(t){var e=d(this),a=n.index(e),r=d.trim(e.val()),o=d(this).attr("name");if(new RegExp("^[0-9]+$","g"),("startYear"==o||"endYear"==o)&&4===r.length||("startMonth"==o||"endMonth"==o)&&2===r.length){if(3===a)return;d(n[a+1]).focus()}}).blur(function(t){var e=d(this),a=d(this).attr("name"),r=d.trim(e.val()),o=new RegExp("^[0-9]+$","g");if(o.test(r)){if("startYear"==a||"endYear"==a)for(;r.length<4;)r="0"+r;"startMonth"!=a&&"endMonth"!=a||(12<1*r&&(r="12"),1*r<1&&(r="01"),1===r.length&&(r="0"+r)),e.val(r)}else{var s="年";"startYear"!=a&&"endYear"!=a||(s="年"),"startMonth"!=a&&"endMonth"!=a||(s=c),e.val(s).addClass(l)}t.stopPropagation()}),t.find(".btn").click(function(){var t=n.filter("[name=startYear]").val(),e=n.filter("[name=startMonth]").val(),a=n.filter("[name=endYear]").val(),r=n.filter("[name=endMonth]").val(),o="",s="";return"年"==t&&"年"==a?(n.filter("[name=startMonth]").val(c).addClass(l),n.filter("[name=endMonth]").val(c).addClass(l)):("年"==t&&(e=t=""),"年"==a&&(r=a=""),""!=t&&""!=a&&a<t?(s=e==c?t+"12":t+e,o=r==c?a+"01":a+r):(e==c&&(e="01"),r==c&&(r="12"),o=t+e,s=a+r),years=""==o?"h"+s:""==s?o+"h":""==o&&""==s?"":o+"h"+s,i.searchTool.delParam("pagenum"),i.searchTool.delParam("years"),i.searchTool.setParam({pubdate:years}),u.start(),window.location.href="/product_result/"+i.searchTool.paramStr.normal),!1}),t.mouseenter(function(){d(this).addClass("time-input-focus")}).mouseleave(function(){d(this).removeClass("time-input-focus")})},qualityText:function(t){return"40"==t?"四品":"50"==t?"五品":"60"==t?"六品":"70"==t?"七品":"80"==t?"八品":"90"==t?"九品":"95"==t?"九五品":void 0},qualityBoxFocus:function(){var o=this,t=d("#qualityBox"),s=t.find(".select-box"),e=this.searchTool.getParam("quaselect"),a=this.searchTool.getParam("quality");if("3"==e&&a){var r=a[0].param,i=a[1].param;r&&s.filter("[name=startQuality]").find(".name").removeClass("default").attr("quality",r).text(this.qualityText(r)),i&&s.filter("[name=endQuality]").find(".name").removeClass("default").attr("quality",i).text(this.qualityText(i))}s.find(".item").click(function(){var t=d(this),e=t.attr("quality");t.parents(".select-box").find(".name").removeClass("default").attr("quality",e).text(t.text())}),t.find(".btn").click(function(){var t=s.filter("[name=startQuality]").find(".name").attr("quality"),e=s.filter("[name=endQuality]").find(".name").attr("quality"),a="";if("normal"==t&&"normal"==e)return!1;if("normal"==t)a="h"+e;else if("normal"==e)a=t+"h";else if("normal"==t&&"normal"==e)a="";else{if(e<t){var r=t;t=e,e=r}a=t+"h"+e}return o.searchTool.delParam("pagenum"),o.searchTool.setParam({quality:a}),o.searchTool.setParam({quaselect:3}),u.start(),window.location.href="/product_result/"+o.searchTool.paramStr.normal,!1}),s.mouseenter(function(){d(this).addClass("show")}).mouseleave(function(){d(this).removeClass("show")}),t.mouseenter(function(){d(this).addClass("quality-focus")}).mouseleave(function(){d(this).removeClass("quality-focus")})},setDefaultOrderBtn:function(){var o=this;this.dom.orderBox.find(".item").each(function(t,e){var a=d(this),r=a.attr("name");a.removeClass("active").removeClass("up").removeClass("down").attr("order",o.order.orderDefaultInfo[r].order).find(".text").text(o.order.orderDefaultInfo[r].text)}),this.dom.priceOrderBox.removeClass("active")},orderList:function(){var o=this,t=this.dom.orderBox.find(".item"),s=document.title;t.on("click",function(t){var e=d(this),a=e.attr("name"),r=e.attr("order");return!!(1<t.which||t.metaKey)||(!e.hasClass("active")||"defaultOrder"!=a&&"putTimeOrder"!=a&&"shopLevelOrder"!=a&&"finishedOrder"!=a?void(o.historyCanWrite&&(t.preventDefault(),o.setDefaultOrderBtn(),e.addClass("active").addClass(o.order.orderInfo[a][r].className).attr("order",o.order.orderInfo[a][r].order).find(".text").text(o.order.orderInfo[a][r].text),o.dom.priceOrderBox.find(".name").html("价格"),o.dom.priceOrderBox.find(".price-section-item.active").removeClass("active"),o.searchTool.delParam("pagenum"),o.searchTool.setParam({order:o.order.orderInfo[a][r].order}),history.pushState("No_Refresh",s,"/product_result/"+o.searchTool.paramStr.normal),u.start(),o.getList())):(t.preventDefault(),!1))})},priceOrderList:function(){var r=this,t=this.dom.priceOrderBox.find(".price-section-item"),o=document.title;t.on("click",function(t){var e=d(this),a=e.attr("order");return!!(1<t.which||t.metaKey)||(e.hasClass("active")?(t.preventDefault(),!1):void(r.historyCanWrite&&(t.preventDefault(),r.setDefaultOrderBtn(),r.dom.priceOrderBox.addClass("active").find(".price-text .name").text(e.text()),e.addClass("active").siblings().removeClass("active"),r.searchTool.delParam("pagenum"),r.searchTool.setParam({order:a}),history.pushState("No_Refresh",o,"/product_result/"+r.searchTool.paramStr.normal),u.start(),r.getList())))})},priceBoxFocus:function(){var r=this,s=d("#priceBox"),o=s.find("input"),i="grayb",n="¥";function l(t){return 999999999<(t=(1*t).toFixed(2))&&(t="999999999.00"),t}o.length&&(o.keypress(function(t){var e=t.keyCode||t.charCode;e&&(e<48||57<e)&&46!=e&&8!=e&&37!=e&&39!=e&&t.preventDefault(),46==e&&-1!==this.value.indexOf(".")&&t.preventDefault()}).keyup(function(t){var e=d(this),a=this.value.indexOf("."),r=d.trim(e.val()),o=t.keyCode||t.charCode;0===a&&(r="0"+r,e.val(r)),13==o&&s.find(".btn").click()}).focus(function(){var t=d(this);t.val()==n&&t.val("").removeClass(i)}).blur(function(t){var e=d(this);""==e.val()&&e.val(n).addClass(i),t.stopPropagation()}),s.find(".btn").click(function(){var t=d.trim(o.eq(0).val()),e=d.trim(o.eq(1).val());if(isNaN(1*t)&&(o.eq(0).val(n).addClass(i),t=n),isNaN(1*e)&&(o.eq(1).val(n).addClass(i),e=n),t!=n&&e!=n){if(1*t==0&&1*e==0)return o.val(n).addClass(i),!1;if(t=l(t),1*(e=l(e))<1*t){var a=t;t=e,e=a}r.searchTool.setParam({price:t+"h"+e})}else if(t!=n)t=l(t),r.searchTool.setParam({price:t+"h"});else{if(e==n)return!1;e=l(e),r.searchTool.setParam({price:"h"+e})}return r.searchTool.delParam("pagenum"),u.start(),window.location.href="/product_result/"+r.searchTool.paramStr.normal,!1}),s.mouseenter(function(){d(this).addClass("price-focus")}).mouseleave(function(){d(this).removeClass("price-focus")}))},shipPlaceMouseWatch:function(){var a=this,t=d("#shipPlace"),r=this.searchTool.getParam("location");r&&(t.find(".name").text(r),t.find(".cancel-btn").show(),t.find(".city-text").each(function(){var t=d(this),e=t.text();e==r&&t.addClass("active")})),t.find(".cancel-btn").click(function(){u.start(),a.searchTool.delParam("location").delParam("pagenum"),window.location.href="/product_result/"+a.searchTool.paramStr.normal}),t.find(".city-text").click(function(){var t=d(this),e=a.searchTool.charToUnicode(t.text());u.start(),a.searchTool.setParam({location:e}),a.searchTool.delParam("pagenum"),window.location.href="/product_result/"+a.searchTool.paramStr.normal}),t.mouseenter(function(){var t=d(this),e=a.dom.pageTopBox.width()+a.dom.smartFilterBox.width()+38;1e3==a.dom.searchMainBox.width()?t.find(".place-select-box").css({left:"auto",right:-e}):t.find(".place-select-box").css({left:0,right:"auto"}),t.addClass("show")}).mouseleave(function(){var t=d(this),e=a.dom.pageTopBox.width()+a.dom.smartFilterBox.width()+48;1e3==a.dom.searchMainBox.width()?t.find(".place-select-box").css({left:"auto",right:-e}):t.find(".place-select-box").css({left:0,right:"auto"}),t.removeClass("show")})},smartFilterWatch:function(){var i=this,n=[],e=["exkey","itemname","author","press","shopname"];d.each(i.searchTool.orderParams,function(t,a){d.each(e,function(t,e){a.param.hasOwnProperty(e)&&n.push({name:e,value:i.searchTool.params[e]})})}),this.dom.smartFilterBox.click(function(){var t=d(this);t.toggleClass("show"),i.dom.smartFilterWriteBox.toggleClass("show"),i.searchTool.setParam({itemfilter:t.hasClass("show")?1:0})}),this.dom.smartFilterWriteBox.find("input").keyup(function(t){var e=t.keyCode||t.charCode;13==e&&(d(this).blur(),i.dom.smartFilterWriteBox.find(".smart-filter-btn").click())}).blur(function(t){var e=d(this),a="normal",r=e.attr("name"),o=i.searchTool.charToUnicode(d.trim(e.val())),s={name:r,value:o};"exkey"!=r&&"itemname"!=r&&s.value&&(s.value="h"+o),d.each(n,function(t,e){if(e.name==s.name)return a=t,!1}),"normal"!=a&&n.splice(a,1),n.push(s),t.stopPropagation()}),this.dom.smartFilterWriteBox.find(".smart-filter-btn").click(function(){if(0==n.length)return!1;var t=i.searchTool.paramStr.normal;return d.each(n,function(t,e){var a={};""==e.value?i.searchTool.params[e.name]&&i.searchTool.delParam(e.name):(a[e.name]=e.value,i.searchTool.setParam(a))}),t==i.searchTool.paramStr.normal||(i.searchTool.delParam("pagenum"),u.start(),window.location.href="/product_result/"+i.searchTool.paramStr.normal),!1}),this.dom.smartFilterWriteBox.addClass("show"),this.dom.smartFilterBox.addClass("show")},smartFilterBoxToggle:function(r){this.dom.smartFilterWriteBox.find(".smart-filter-put-box").each(function(t,e){var a=d(this);a.removeClass("hide"),a.attr("name")==r&&a.addClass("hide")})},pageTopWatch:function(){var o=this,s=document.title;this.dom.pageTopBox.find(".btn").click(function(){var t=d(this),e=t.attr("type"),a=o.pageInfo.curpage,r=o.pageInfo.countpage;return!("prev"==e&&--a<1)&&!("next"==e&&r<++a)&&!!o.listAjaxFlag&&(o.listAjaxFlag=!1,u.start(),o.searchTool.setParam({pagenum:a}),void(o.historyCanWrite?(history.pushState("No_Refresh",s,"/product_result/"+o.searchTool.paramStr.normal),o.getList()):window.location.href="/product_result/"+o.searchTool.paramStr.normal))})},isbnInit:function(){this.getIsbn()},getIsbn:function(){var e=this,t=e.dom.isbnBox.attr("status");if("1"!=t)return!1;d.ajax({url:"/product_result/"+e.searchTool.paramStr.normal+"&type=1&ajaxdata=3",type:"get",dataType:"json",cache:!1,success:function(t){t.status&&("display_isbn_none"==t.message?e.dom.isbnBox.hide().parent().addClass("off-isbn"):(t.site=window.KFZ.site,t.more="?select="+e.searchInfo.selectType[e.searchInfo.type]+"&"+e.searchInfo.type+"="+e.searchTool.params[e.searchInfo.type],e.renderIsbnBox(t)))},error:function(t,e,a){},complete:function(t,e,a){}})},renderIsbnBox:function(t){var e=doT.template(this.tpl.isbnTpl);this.dom.isbnBox.find(".isbn-con").html(e(t))},listInit:function(t){var e=this.searchTool.getParam("status")||"0",a=window.KFZ.tools.cookies("reciever_area");if(this.imgError(),this.mouseWatch(),"1"==e)return!1;var s=[],i=[],n=[];this.dom.listBox.find(".item").each(function(){var t=d(this),e=t.attr("shopid"),a=t.attr("itemid"),r=t.attr("userId"),o={userId:r,itemId:a};s.push(o),i.push(e),n.push(r)}),this.listInfo.promotionInfo=s,window.KFZ.ajaxFlag&&(!t&&!this.shippingFeeFlag&&window.KFZ.ajaxFlag.promotionShippingFee&&a&&s.length&&this.getShippingFee({params:s,area:a}),window.KFZ.ajaxFlag.holiday&&i.length&&this.getHoliday({shopIds:d.unique(i).join(",")}),window.KFZ.ajaxFlag.lastLoginStatus&&n.length&&this.getLastLoginStatus({userIds:d.unique(n).join(","),beforeDay:10})),this.imNoticePageInit("列表数据更新 -> 列表消息在线状态重新获取 点击事件重新绑定")},imgError:function(){var t=this;this.dom.listBox.find(".item-img img").on("error",function(){d(this).attr("error","1"),window.KFZ.tools.onErrorReplace(t.base+"img/error.jpg",this,d(this))})},mouseWatch:function(){var s=this,t=this.dom.listBox.find(".item"),e=this.searchTool.getParam("status");t.find(".item-img").mouseenter(function(){var t=d(this),e=t.find(".img-box img").attr("error"),a=t.find(".big-img-box img"),r=a.attr("_src");if("1"==e)return!1;a.length&&(t.find(".big-img-box").show(),window.KFZ.tools.loadImage(r,function(){a.attr("src",r).removeClass("loading")}))}).mouseleave(function(){d(this).find(".big-img-box").hide()}),e!=undefined&&"0"!=e||(t.find(".add-cart-btn").click(function(){var t=d(this),e=t.parents(".btns-group"),a=e.attr("shopid"),r=e.attr("itemid");if(!s.addCartAjaxFlag)return!1;s.addCartAjaxFlag=!1,t.siblings(".suc-tip").removeClass("normal").hide(),t.siblings(".err-tip").hide();var o={shopId:a,itemId:r,num:1};s.addCart(o,t)}),t.find(".collection-btn").click(function(){var t=d(this),e=t.parents(".btns-group"),a=e.attr("shopid"),r=e.attr("itemid");if(window.KFZ&&window.KFZ.userInfo&&!window.KFZ.userInfo.isLogin)"function"==typeof window.loginWin&&window.loginWin(window.KFZ.site.login,"login");else{if(!s.collectionAjaxFlag)return!1;s.collectionAjaxFlag=!1,t.siblings(".suc-tip").removeClass("normal").hide(),t.siblings(".err-tip").hide();var o={shopId:a,itemId:r};s.addFavBook(o,t)}}))},tipWin:function(r,t){var o=this,s=t.type||"s",i=t.text||"";this.tipTimer=this.tipTimer?this.tipTimer:"",o.tipTimer&&(clearTimeout(o.tipTimer),d(".suc-tip").hide(60),d(".err-tip").hide()),function(){var t=r.siblings(".suc-tip"),e=r.siblings(".err-tip");"s"==s?t.show(60).find(".suc-text").html(i):"e"==s&&e.show().find(".err-text").html(i);var a=setTimeout(function(){t.hide(60),e.hide()},2e3);o.tipTimer=a,e.find(".login-btn").click(function(){"function"==typeof window.loginWin&&window.loginWin(window.KFZ.site.login,"login")})}()},addCart:function(t,e){var a=this;d.ajax({url:window.KFZ.site.cart+"jsonp/add",type:"get",dataType:"jsonp",data:t,jsonp:"callback",complete:function(){a.addCartAjaxFlag=!0},success:function(t){t.status?(a.tipWin(e,{type:"s",text:"成功加入购物车"}),a.cartNotice()):a.tipWin(e,{type:"e",text:t.errMessage})},error:function(){a.tipWin(e,{type:"e",text:"对不起，服务器开小差了，请重新加入购物车"})}})},cartNotice:function(){window.KFZ.tools.contactManager.run("cartNotice",{from:"购物车 cartNotice ",description:"购物车数量发生变化"})},addFavBook:function(t,e){var a=this;d.ajax({url:window.KFZ.site.shop+"book/shopsearch/addFavBook",type:"get",dataType:"jsonp",data:t,jsonp:"callback",complete:function(){a.collectionAjaxFlag=!0},success:function(t){t&&t.status?a.tipWin(e,{type:"s",text:"收藏成功"}):"user_not_login"==t.errorCode||"1"==t.errType?a.tipWin(e,{type:"e",text:'请先<span class="login-btn">登录</span>'}):"already_exists"==t.errorCode?a.tipWin(e,{type:"e",text:"您已收藏过"}):a.tipWin(e,{type:"e",text:t.message})},error:function(){a.tipWin(e,{type:"e",text:"对不起，服务器开小差了，请重新收藏"})}})},getShippingFee:function(t){var a=this;d.ajax({url:window.KFZ.site.shop+"book/shopsearch/getShippingFee",type:"get",dataType:"jsonp",data:{params:JSON.stringify(t)},jsonp:"callback",success:function(t){t&&t.status&&t.data&&0<t.data.length&&(a.shippingFeeFlag=!0,d.each(t.data,function(t,e){a.renderPromotionShippingFee(a.dom.listBox.find(".item[userid="+e.userId+"][itemid="+e.itemId+"]"),e)}))}})},renderPromotionShippingFee:function(t,e){if(e.autoSureOrder,e.isSeller){var a=doT.template(this.tpl.activityTextTpl);t.find(".activity").append(a({name:"activity-baoyou",nameText:"包邮",title:"包邮"})).show()}else{var r=doT.template(this.tpl.feeTpl);t.find(".ship-fee-box").append(r({fee:e.fee})).show()}},getLastLoginStatus:function(t){var a=this;d.ajax({url:window.KFZ.site.user+"interface/jsonp/beforeLoginCheck",type:"get",dataType:"jsonp",data:t,jsonp:"callback",success:function(t){t&&t.status&&t.data&&0<t.data.length&&d.each(t.data,function(t,e){a.renderLastLoginStatus(a.dom.listBox.find(".item[userid="+e.userId+"]"),e)})}})},renderLastLoginStatus:function(t,e){if(e.lastLoginStatus){var a=doT.template(this.tpl.warnTpl);t.find(".warn-info-box").append(a({name:"卖家超过10天未登录"})).show()}},getHoliday:function(t){var a=this;d.ajax({url:window.KFZ.site.shop+"book/shopsearch/getShopIsHoliday",type:"get",dataType:"jsonp",data:t,jsonp:"callback",success:function(t){t&&t.status&&t.data&&0<t.data.length&&d.each(t.data,function(t,e){a.renderHoliday(a.dom.listBox.find(".item[shopid="+e.shopId+"]"),e)})}})},renderHoliday:function(t,e){if(e.promotionStatus){var a=doT.template(this.tpl.holidayTpl);t.find(".holiday-info-box").append(a({name:"该店主正在休假"})).show()}},imNoticePageInit:function(t){window.KFZ.tools.contactManager.run("imNoticePageInit",{from:"搜索页面",description:t||"未知描述"})},getList:function(){var r=this,e=this.searchTool.getParam("status")||"0";d.ajax({url:"/product_result/"+r.searchTool.paramStr.normal+"&type=1&ajaxdata=1",type:"get",dataType:"json",cache:!1,complete:function(t,e,a){r.listAjaxFlag=!0,u.done(),r.searchInfo.shopIds=[]},success:function(t){u.done(),t.status?(t.data&&0<t.data.itemList.length?(r.dom.resultMainBox.removeClass("hide"),r.dom.resultNoneBox.addClass("hide"),t.data.status=e,t.data.site=window.KFZ.site,r.renderList(t.data)):(r.dom.resultMainBox.addClass("hide"),r.dom.resultNoneBox.removeClass("hide")),r.pageInfo.curpage=parseInt(t.other.curpage),r.pageInfo.countpage=parseInt(t.other.page_count),r.renderPager()):("1"==t.other.code&&(window.location.href=window.KFZ.site.search+"/check.html?bizflag="+t.other.bizflag+"&refer="+window.location.href),"2"==t.other.code&&(window.location.href=window.KFZ.site.search+"/forbidden.html"))},error:function(t,e,a){u.done()}})},renderList:function(t){var e=doT.template(this.tpl.listTpl);this.dom.listBox.html(e(t)),this.shippingFeeFlag=!1,this.listInit()},makePagerData:function(t){var e=[];if(t.countpage<14)for(var a=1;a<=t.countpage;a++)e.push({type:"page",active:t.curpage==a?"1":"0",text:a});else{if(t.curpage<7)for(var a=1;a<=t.curpage;a++)e.push({type:"page",active:t.curpage==a?"1":"0",text:a});else{for(var a=1;a<3;a++)e.push({type:"page",active:"0",text:a});e.push({type:"ellipsis",active:!1,text:"..."});for(var a=t.curpage-3;a<=t.curpage;a++)e.push({type:"page",active:t.curpage==a?"1":"0",text:a})}if(t.countpage-t.curpage<6)for(var a=t.curpage+1;a<=t.countpage;a++)e.push({type:"page",active:"0",text:a});else{if(t.curpage<7)for(var a=t.curpage+1;a<=9;a++)e.push({type:"page",active:"0",text:a});else for(var a=t.curpage+1;a<=t.curpage+2;a++)e.push({type:"page",active:"0",text:a});e.push({type:"ellipsis",active:!1,text:"..."});for(var a=t.countpage-1;a<=t.countpage;a++)e.push({type:"page",active:"0",text:a})}}return e},renderPager:function(){var e={curpage:this.pageInfo.curpage||1,countpage:this.pageInfo.countpage||1,pagerItems:[],hasEllipsis:!1};e.pagerItems=this.makePagerData(e),d.each(e.pagerItems,function(t){if(t.type="ellipsis")return!(e.hasEllipsis=!0)}),this.renderPageTopStatus(e);var t=doT.template(this.tpl.pagerTpl);this.dom.pagerBox.html(t(e)),this.pagerInit()},renderPageTopStatus:function(a){this.dom.pageTopBox.find(".page-text[type=curpage]").text(a.curpage),this.dom.pageTopBox.find(".page-text[type=countpage]").text(a.countpage),this.dom.pageTopBox.find(".btn").each(function(){var t=d(this),e=t.attr("type");"prev"==e&&(1==a.curpage?t.addClass("disabled"):t.removeClass("disabled")),"next"==e&&(a.curpage==a.countpage?t.addClass("disabled"):t.removeClass("disabled"))})},pagerInit:function(){var r=this,o=document.title;this.dom.pagerBox.find(".item-page").click(function(){var t=d(this),e=t.hasClass("active"),a=t.attr("page");return!e&&!!r.listAjaxFlag&&(r.listAjaxFlag=!1,u.start(),r.searchTool.setParam({pagenum:a}),void(r.historyCanWrite?(history.pushState("No_Refresh",o,"/product_result/"+r.searchTool.paramStr.normal),r.getList(),d("body,html").scrollTop(0)):location.href="/product_result/"+r.searchTool.paramStr.normal))}),this.dom.pagerBox.find(".prev-btn").click(function(){var t=d(this),e=(t.hasClass("disabled"),r.pageInfo.curpage-1);return!(e<1)&&!!r.listAjaxFlag&&(r.listAjaxFlag=!1,u.start(),r.searchTool.setParam({pagenum:e}),void(r.historyCanWrite?(history.pushState("No_Refresh",o,"/product_result/"+r.searchTool.paramStr.normal),r.getList(),d("body,html").scrollTop(0)):location.href="/product_result/"+r.searchTool.paramStr.normal))}),this.dom.pagerBox.find(".next-btn").click(function(){var t=d(this),e=(t.hasClass("disabled"),r.pageInfo.curpage+1);return!(e>r.pageInfo.countpage)&&!!r.listAjaxFlag&&(r.listAjaxFlag=!1,u.start(),r.searchTool.setParam({pagenum:e}),void(r.historyCanWrite?(history.pushState("No_Refresh",o,"/product_result/"+r.searchTool.paramStr.normal),r.getList(),d("body,html").scrollTop(0)):location.href="/product_result/"+r.searchTool.paramStr.normal))}),this.dom.pagerBox.find(".go-btn").click(function(){var t=d(this),e=d.trim(t.siblings(".go-num").val());return!!/[0-9]+/g.test(e)&&(parseInt(e)>r.pageInfo.countpage&&(e=r.pageInfo.countpage),!!r.listAjaxFlag&&(r.listAjaxFlag=!1,u.start(),r.searchTool.setParam({pagenum:e}),void(r.historyCanWrite?(history.pushState("No_Refresh",o,"/product_result/"+r.searchTool.paramStr.normal),r.getList(),d("body,html").scrollTop(0)):location.href="/product_result/"+r.searchTool.paramStr.normal)))}),this.dom.pagerBox.find(".go-num").keypress(function(t){var e=t.keyCode||t.charCode;e&&(e<48||57<e)&&t.preventDefault()}).keyup(function(t){var e=d(this),a=t.keyCode||t.charCode;13==a&&e.siblings(".go-btn").click()})}}.init()}(this);